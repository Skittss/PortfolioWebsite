{"version":3,"sources":["projects/homeTemplate.jsx","projects/tableofcontents.jsx","projects/projectPage.jsx","projects/annotatedImage.jsx","../node_modules/@ant-design/react-slick/es/initial-state.js","../node_modules/@ant-design/react-slick/es/utils/innerSliderUtils.js","../node_modules/@ant-design/react-slick/es/track.js","../node_modules/@ant-design/react-slick/es/dots.js","../node_modules/@ant-design/react-slick/es/arrows.js","../node_modules/@ant-design/react-slick/es/inner-slider.js","../node_modules/@ant-design/react-slick/es/default-props.js","../node_modules/@ant-design/react-slick/es/index.js","../node_modules/@ant-design/react-slick/es/slider.js","../node_modules/antd/es/carousel/style/index.js","../node_modules/antd/es/carousel/index.js","content/projects/RayTracer/tea_cerem_direct.png","content/projects/RayTracer/tea_cerem_indirect.png","content/projects/RayTracer/tea_cerem_specular.png","content/projects/RayTracer/tea_cerem_caustic.png","content/projects/RayTracer/tea_cerem_2048.png","content/projects/RayTracer/csg/csg_completed_brighter-crop.png","content/projects/RayTracer/csg/csg-breakdown.png","content/projects/RayTracer/csg/t-value-operations.png","content/projects/RayTracer/csg/csg-fsm.png","content/projects/RayTracer/quadratics/cone.png","content/projects/RayTracer/quadratics/cylinder.png","content/projects/RayTracer/quadratics/ellipse.png","content/projects/RayTracer/quadratics/hyperbolic-cylinder.png","content/projects/RayTracer/quadratics/hyperbolic-paraboloid.png","content/projects/RayTracer/quadratics/hyperboloid-one-sheet.png","content/projects/RayTracer/quadratics/hyperboloid-two-sheet.png","content/projects/RayTracer/quadratics/parabolic.png","content/projects/RayTracer/normals/face_normals.png","content/projects/RayTracer/normals/vertex_normals.png","content/projects/RayTracer/bounding/bv_overlay.png","content/projects/RayTracer/materials/lambertian_diffuse.png","content/projects/RayTracer/materials/phong.png","content/projects/RayTracer/mirrors/mirrors-1-bounce.png","content/projects/RayTracer/mirrors/mirrors-3-bounces.png","content/projects/RayTracer/mirrors/mirrors-5-bounces.png","content/projects/RayTracer/mirrors/mirrors-8-bounces.png","content/projects/RayTracer/dielectrics/dielectric-no-fresnel-1.0f.png","content/projects/RayTracer/dielectrics/dielectric-no-fresnel-1.3f.png","content/projects/RayTracer/dielectrics/dielectric-no-fresnel-1.5f.png","content/projects/RayTracer/dielectrics/dielectric-no-fresnel-1.7f.png","content/projects/RayTracer/dielectrics/dielectric-no-fresnel-2.5f.png","content/projects/RayTracer/dielectrics/dielectric-fresnel-fresnel.png","content/projects/RayTracer/dielectrics/dielectric-fresnel-schlick.png","content/projects/RayTracer/shadows/brighter-1-sample-crop.png","content/projects/RayTracer/shadows/brighter-5-samples-crop.png","content/projects/RayTracer/shadows/brighter-10-samples-crop.png","content/projects/RayTracer/shadows/brighter-25-samples-crop.png","content/projects/RayTracer/shadows/brighter-50-samples-crop.png","content/projects/RayTracer/shadows/brighter-100-samples-crop.png","content/projects/RayTracer/shadows/brighter-200-samples-crop.png","content/projects/RayTracer/ssaa/5xSSAA-crop.png","content/projects/RayTracer/ssaa/10xSSAA-crop.png","content/projects/RayTracer/ssaa/25xSSAA-crop.png","content/projects/RayTracer/ssaa/50xSSAA-crop.png","content/projects/RayTracer/photonmap/cornell-wi.png","content/projects/RayTracer/photonmap/cornell-pm.png","content/projects/RayTracer/photonmap/global_photon_map_visualisation.png","content/projects/RayTracer/photonmap/caustic_photon_map_visualisation.png","content/projects/RayTracer/photonmap/cornell-wi-512.png","content/projects/RayTracer/photonmap/indirect_illum_1035313n.png","content/projects/RayTracer/photonmap/specular_glossy.png","content/projects/RayTracer/photonmap/caustics_filter_1024162.png","content/projects/RayTracer/photonmap/cornell-pm-512.png","projects/RayTracer/home.jsx","content/projects/RayTracer/code_snippets/plane_intersection.js","content/projects/RayTracer/code_snippets/triangle_intersection.js","content/projects/RayTracer/code_snippets/sphere_intersection.js","content/projects/RayTracer/code_snippets/cuboid_intersection.js","content/projects/RayTracer/ssaa/0xSSAA-crop.png","content/projects/RayTracer/code_snippets/hemisphere_scatter.js","../node_modules/json2mq/index.js","../node_modules/string-convert/camel2hyphen.js"],"names":["HomeTemplate","title","githubURL","projectRoute","projectLink","thumb","loc","useLocation","pathname","useEffect","window","scrollTo","style","marginTop","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","height","zIndex","className","position","width","top","left","transform","id","display","padding","undefined","placement","href","target","to","borderTopWidth","borderTopColor","opacity","getNestedHeadings","headingElements","headingAttention","filter","e","l","nodeName","ki","headingLst","map","key","innerHTML","level","parseInt","slice","result","indices","levels","forEach","o","index","findIndex","push","length","Object","assign","children","TableOfContents","nestedHeadings","useState","setNestedHeadings","Array","from","document","querySelectorAll","newNestedHeadings","useHeadingsData","navHeight","setNavHeight","navbar","getElementById","console","log","offsetHeight","useNavHeight","anchorHeight","setAnchorHeight","breadcrumbRef","paddingBottom","items","maxHeight","overflow","targetOffset","onClick","preventDefault","useBreakpoint","Grid","ProjectPage","footer","screens","gutter","xs","lg","marginRight","marginLeft","justifyContent","marginBottom","AnnotatedImage","annotation","fontSize","props","bottom","backgroundColor","textAlign","initialState","animating","autoplaying","currentDirection","currentLeft","currentSlide","direction","dragging","edgeDragged","initialized","lazyLoadedList","listHeight","listWidth","scrolling","slideCount","slideHeight","slideWidth","swipeLeft","swiped","swiping","touchObject","startX","startY","curX","curY","trackStyle","trackWidth","targetSlide","clamp","number","lowerBound","upperBound","Math","max","min","safePreventDefault","event","includes","_reactName","getOnDemandLazySlides","spec","onDemandSlides","startIndex","lazyStartIndex","endIndex","lazyEndIndex","slideIndex","indexOf","lazySlidesOnLeft","lazySlidesOnRight","centerMode","floor","slidesToShow","centerPadding","getWidth","elem","offsetWidth","getHeight","getSwipeDirection","xDist","yDist","r","swipeAngle","verticalSwiping","arguments","atan2","round","PI","abs","canGoNext","canGo","infinite","extractObject","keys","newObject","slideHandler","waitForAnimate","fade","lazyLoad","slidesToScroll","useCSS","finalSlide","animationLeft","finalLeft","animationSlide","state","nextState","concat","getTrackLeft","_objectSpread","getTrackAnimateCSS","getTrackCSS","changeSlide","options","indexOffset","previousInt","slideOffset","previousTargetSlide","message","siblingDirection","Number","checkNavigable","navigables","breakpoint","counter","indexes","getNavigableIndexes","prevNavigable","n","getSlideCount","centerOffset","swipeToSlide","swipedSlide","slickList","listRef","slides","every","slide","vertical","offsetTop","offsetLeft","currentIndex","rtl","dataset","checkSpecKeys","keysArray","reduce","value","hasOwnProperty","error","trackHeight","trackChildren","getTotalSlides","transition","WebkitTransition","useTransform","WebkitTransform","msTransform","addEventListener","attachEvent","speed","cssEase","unslick","targetLeft","trackRef","variableWidth","slidesToOffset","getPreClones","targetSlideIndex","trackElem","node","childNodes","getPostClones","slidesOnRight","slidesOnLeft","_ref","right","_ref2","canUseDOM","createElement","getSlideClasses","slickActive","slickCenter","slickCloned","getKey","child","fallbackKey","renderSlides","preCloneSlides","postCloneSlides","childrenCount","React","Children","count","childOnClickOptions","childStyle","getSlideStyle","slideClass","slideClasses","cloneElement","classnames","tabIndex","outline","focusOnSelect","preCloneNo","reverse","Track","_React$PureComponent","_inherits","_super","_createSuper","_this","_classCallCheck","this","_len","args","_key","call","apply","_defineProperty","_assertThisInitialized","ref","_createClass","_this$props","mouseEvents","onMouseEnter","onMouseOver","onMouseLeave","_extends","handleRef","PureComponent","Dots","clickHandler","dotCount","ceil","dots","i","_rightBound","rightBound","_leftBound","leftBound","dotOptions","bind","customPaging","appendDots","dotsClass","PrevArrow","prevClasses","prevHandler","prevArrowProps","customProps","prevArrow","type","NextArrow","_React$PureComponent2","_super2","nextClasses","nextHandler","nextArrowProps","nextArrow","_excluded","InnerSlider","_React$Component","list","track","adaptiveHeight","querySelector","onInit","slidesToLoad","setState","prevState","onLazyLoad","updateState","adaptHeight","autoplay","autoPlay","lazyLoadTimer","setInterval","progressiveLazyLoad","ro","ResizeObserver","onWindowResized","callbackTimers","setTimeout","observe","prototype","onfocus","pauseOnFocus","onSlideFocus","onblur","onSlideBlur","animationEndCallback","clearTimeout","clearInterval","timer","removeEventListener","detachEvent","autoplayTimer","disconnect","prevProps","checkImagesLoad","onReInit","setTrackStyle","didPropsChange","autoplaySpeed","pause","debouncedResize","cancel","debounce","resizeWindow","isTrackMounted","Boolean","callback","updatedState","listNode","trackNode","centerPaddingAdj","initialSlide","initializedState","_trackWidth","_trackLeft","childrenWidths","preClones","postClones","_i","_i2","_trackStyle","currentWidth","trackLeft","images","imagesCount","loadedCount","image","handler","onclick","prevClickHandler","parentNode","focus","onload","onerror","onLazyLoadError","_index","dontAnimate","asNavFor","beforeChange","afterChange","_slideHandler","asNavForIndex","innerSlider","firstBatch","_objectWithoutProperties","nodes","clickable","stopPropagation","dir","accessibility","tagName","match","keyCode","keyHandler","ontouchmove","returnValue","disableBodyScroll","swipe","draggable","touches","pageX","clientX","pageY","clientY","swipeStart","edgeFriction","onEdge","swipeEvent","curLeft","swipeLength","sqrt","pow","verticalSwipeLength","positionOffset","swipeDirection","touchSwipeLength","swipeMove","touchThreshold","onSwipe","minSwipe","newSlide","activeSlide","swipeEnd","triggerSlideHandler","enableBodyScroll","isNaN","nextIndex","playType","play","pauseType","trackProps","pauseOnHover","onTrackOver","onTrackLeave","selectHandler","dotProps","pauseOnDotsHover","onDotsLeave","onDotsOver","arrowProps","arrows","verticalHeightStyle","centerPaddingStyle","listStyle","touchMove","listProps","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","touchEnd","onTouchCancel","onKeyDown","innerSliderProps","listRefHandler","trackRefHandler","ssrState","ssrInit","_i3","_Object$keys","_typeof","Component","defaultProps","easing","responsive","rows","slidesPerRow","Slider","slickPrev","slickNext","slickGoTo","_responsiveMediaHandlers","query","mql","matchMedia","listener","matches","addListener","_this2","breakpoints","breakpt","sort","x","y","bQuery","json2mq","minWidth","maxWidth","media","obj","removeListener","settings","newProps","_this3","resp","toArray","trim","warn","newChildren","j","row","k","innerSliderRefHandler","genCarouselStyle","token","componentCls","antCls","carouselArrowSize","carouselDotOffset","arrowOffset","carouselDotMargin","marginXXS","resetComponent","boxSizing","touchAction","WebkitTouchCallout","WebkitTapHighlightColor","margin","cursor","pointerEvents","visibility","verticalAlign","insetInlineStart","content","clear","float","minHeight","img","color","lineHeight","background","border","insetInlineEnd","paddingInlineStart","li","flex","dotWidth","dotHeight","marginInline","textIndent","motionDurationSlow","button","colorBgContainer","borderRadius","inset","dotWidthActive","genCarouselVerticalStyle","reverseSizeOfDot","flexDirection","genCarouselRtlStyle","genComponentStyleHook","controlHeightLG","controlHeightSM","carouselToken","mergeToken","__rest","s","t","p","getOwnPropertySymbols","propertyIsEnumerable","Carousel","_a","dotPosition","rootClassName","ConfigContext","getPrefixCls","slickRef","goTo","current","prev","next","prevCount","effect","prefixCls","enableDots","dsClass","classNames","useStyle","wrapSSR","hashId","SlickCarousel","Home","Meta","preview","src","f_img","f_img_direct","f_img_indirect","f_img_specular","f_img_caustic","paddingLeft","paddingRight","language","showLineNumbers","dracula","startingLineNumber","face_normals","vertex_normals","quad_ellipse","quad_cone","quad_cylinder","quad_paraboloid","quad_hyp_one_sheet","quad_hyp_two_sheet","quad_hyp_cylinder","quad_hyp_paraboloid","span","sm","csg_completed","csg_breakdown","csg_t_values","csg_fsm","bounding_overlay","lambertian","phong","mirror_bounce_1","mirror_bounce_3","mirror_bounce_5","mirror_bounce_8","dielectric_refract_1_0","dielectric_refract_2_5","dielectric_refract_1_7","dielectric_refract_1_5","dielectric_refract_1_3","dielectric_fresnel_f","dielectric_fresnel_s","shadows_1","shadows_5","shadows_10","shadows_25","shadows_50","shadows_100","shadows_200","ssaa_5","ssaa_10","ssaa_25","ssaa_50","photon_map_direct","photon_map_global","photon_map_global_vis","photon_map_caustic_vis","c_img","c_img_direct","c_img_indirect","c_img_specular","c_img_caustic","camel2hyphen","require","obj2mq","mq","features","feature","test","isDimension","module","exports","q","str","replace","toLowerCase"],"mappings":"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","file":"static/js/13.15b7eb62.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { Divider, Tooltip, Image } from 'antd';\r\nimport { GithubOutlined, SendOutlined } from '@ant-design/icons';\r\n\r\nimport \"../css/projectpage.scss\";\r\n\r\nconst HomeTemplate = ({title, githubURL, projectRoute, projectLink, thumb}) => {\r\n    const loc = useLocation().pathname;\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0)\r\n      }, [])\r\n\r\n    return (\r\n        <>\r\n        <div style={{\r\n            marginTop: \"-3rem\",\r\n            backgroundImage: `url(${thumb})`,\r\n            backgroundPosition: 'center',\r\n            backgroundSize: 'cover',\r\n            backgroundRepeat: 'no-repeat',\r\n            height: '100vh',\r\n            zIndex: -1,\r\n        }} />\r\n        <div className=\"project-home-wrapper\" style={{position: \"absolute\", width: \"100%\", top: \"101vh\", left: \"0px\", transform: \"translate(0, -100%)\"}}>\r\n            <header className=\"home-header\">\r\n                <h1 id=\"title\" style={{display: 'inline-block'}}>{title}</h1>\r\n                <span style={{padding: \"0 1em\", display: 'inline-block'}}>\r\n                    {githubURL != undefined ? (\r\n                        <Tooltip title=\"View on Github\" placement=\"bottom\">\r\n                            <a href={githubURL} target=\"_blank\">\r\n                                <GithubOutlined className=\"title-icon\"/>\r\n                            </a>\r\n                        </Tooltip>\r\n                    ) : null}\r\n\r\n                    {projectRoute != undefined  ? (\r\n                        <Tooltip title=\"View project\" placement=\"bottom\">\r\n                            <Link to={loc + projectRoute}>\r\n                                <SendOutlined className=\"title-icon\"/>\r\n                            </Link>\r\n                        </Tooltip>\r\n                    ) : null}\r\n\r\n                    {projectLink != undefined  ? (\r\n                        <Tooltip title=\"View project\" placement=\"bottom\">\r\n                            <a href={projectLink} target=\"_blank\">\r\n                                <SendOutlined className=\"title-icon\"/>\r\n                            </a>\r\n                        </Tooltip>\r\n                    ) : null}\r\n\r\n                </span>\r\n                <Divider style={{borderTopWidth: \"1px\", borderTopColor: \"#000000\", opacity: 0.5}}/>\r\n            </header>\r\n            <div style={{height: \"8em\"}}>\r\n\r\n            </div>\r\n        </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default HomeTemplate;","\r\nimport { Breadcrumb, Anchor } from 'antd';\r\nimport { HashLink } from 'react-router-hash-link';\r\nimport React, { useState, useEffect, useRef } from 'react';\r\n\r\nconst useHeadingsData = () => {\r\n\tconst [nestedHeadings, setNestedHeadings] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst headingElements = Array.from(\r\n\t\t\tdocument.querySelectorAll(\"h1, h2, h3\")\r\n\t\t);\r\n\r\n\t\t// Created a list of headings, with H3s nested\r\n\t\tconst newNestedHeadings = getNestedHeadings(headingElements);\r\n\r\n\t\tsetNestedHeadings(newNestedHeadings);\r\n\t}, []);\r\n\r\n\treturn { nestedHeadings };\r\n};\r\n\r\nconst getNestedHeadings = (headingElements) => {\r\n\tvar headingAttention = headingElements.filter(e => {\r\n\t\tlet l = e.nodeName;\r\n\t\treturn e.id !== \"title\" && (l === \"H1\" || l === \"H2\" || l === \"H3\");\r\n\t})\r\n\r\n\tlet ki = -1;\r\n\tvar headingLst = headingAttention.map(e => {\r\n\t\tki++;\r\n\t\treturn ({ key: `contents_${ki}`, href: `#${e.id}`, title: e.innerHTML, level: parseInt(e.nodeName.slice(-1)) })\r\n\t})\r\n\tvar result = [],\r\n\t\tindices = [],\r\n\t\tlevels = [result]\r\n\r\n\theadingLst.forEach(o => {\r\n\t\tvar index = indices.findIndex(level => level >= o.level);\r\n\t\tif (index === -1) {\r\n\t\t\tindex = indices.push(o.level) - 1;\r\n\t\t} else {\r\n\t\t\tindices.length = index + 1;\r\n\t\t}\r\n\t\tlevels[index].push(Object.assign({}, o, { children: levels[index + 1] = [] }));\r\n\t});\r\n\r\n\r\n\treturn result;\r\n};\r\n\r\nconst useNavHeight = () => {\r\n\tconst [navHeight, setNavHeight] = useState(0);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst navbar = document.getElementById(\"main-navbar\");\r\n\t\tconsole.log(navbar)\r\n\r\n\t\tsetNavHeight(navbar.offsetHeight);\r\n\t}, []);\r\n\r\n\treturn { navHeight };\r\n}\r\n\r\nconst TableOfContents = ({ title }) => {\r\n\tconst { nestedHeadings } = useHeadingsData();\r\n\tconst { navHeight } = useNavHeight();\r\n\r\n\tconst [anchorHeight, setAnchorHeight] = useState(\"85vh\");\r\n\r\n\tuseEffect(() => {\r\n\t\tconst breadcrumbRef = document.getElementById(\"toc-breadcrumb\");\r\n\t\tif (breadcrumbRef) {\r\n\t\t\tsetAnchorHeight(`calc(100vh - 6rem - ${breadcrumbRef.offsetHeight}px)`)\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Breadcrumb id=\"toc-breadcrumb\" style={{paddingBottom: \"14px\", position: \"sticky\"}}\r\n\t\t\t\titems={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: <a href=\"#home\">Portfolio</a>,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: <a href=\"#projects\">Projects</a>,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: `${title}`\r\n\t\t\t\t\t}\r\n\t\t\t\t]}\r\n\t\t\t/>\r\n\t\t\t<Anchor\r\n\t\t\t\tstyle={{maxHeight: anchorHeight, overflow: \"auto\"}}\r\n\t\t\t\ttargetOffset={navHeight}\r\n\t\t\t\tonClick={(e, l) => {\r\n\t\t\t\t\t// I have no idea why this works in hash router link... but sure\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\titems={nestedHeadings}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TableOfContents","import FadeIn from 'react-fade-in';\r\nimport HomeTemplate from './homeTemplate';\r\nimport TableOfContents from './tableofcontents';\r\nimport { Row, Col, Grid } from 'antd';\r\nconst { useBreakpoint } = Grid\r\n\r\nconst ProjectPage = ({title, thumb, projectLink, projectRoute, githubURL, footer, children}) => {\r\n    const screens = useBreakpoint();\r\n\r\n    return (\r\n    \r\n        <>\r\n        <FadeIn>\r\n            <HomeTemplate \r\n                title={title} \r\n                thumb={thumb} \r\n                projectRoute={projectRoute} \r\n                projectLink={projectLink} \r\n                githubURL={githubURL} />\r\n            <Row gutter={0}>\r\n            <Col xs={0} lg={5}>\r\n            <div className='project-toc-wrapper'>\r\n                <TableOfContents title={title}/> \r\n            </div>\r\n            </Col>\r\n            <Col xs={24} lg={19}>\r\n            <div className=\"project-content-wrapper\" style={{marginRight: screens.lg? \"17.5vw\" : \"6vw\", marginLeft: screens.lg? 0 : \"6vw\"}}>\r\n                {children}\r\n            </div>\r\n            <div className='project-footer-wrapper' style={{\r\n                display: \"flex\", justifyContent: \"center\", \r\n                marginTop: \"8vh\", marginBottom: \"5vh\",\r\n                marginRight: screens.lg? \"17.5vw\" : \"6vw\", marginLeft: screens.lg? 0 : \"6vw\"\r\n                }}>\r\n                {footer ? {footer} : \"❋ That's all! Thanks for reading. ❋\"}\r\n            </div>\r\n            </Col>\r\n            </Row>\r\n        </FadeIn>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ProjectPage;","import React from 'react'\r\nimport {Image} from 'antd'\r\n\r\nconst AnnotatedImage = ({annotation, fontSize, ...props}) => {\r\n\r\n    const paddingBottom = props.paddingBottom ? props.paddingBottom : \"20px\"\r\n\r\n    return (\r\n        <div style={{position: \"relative\"}}>\r\n            <Image {...props} />\r\n            {annotation ? (\r\n                <div className=\"styled-text\" style={{\r\n                    position: \"absolute\", \r\n                    bottom: 0, \r\n                    left: 0, \r\n                    backgroundColor: 'rgba(21, 25, 31, 0.65)',\r\n                    width: \"100%\", \r\n                    fontSize: fontSize && fontSize,\r\n                    textAlign: 'center',\r\n                    padding: \"10px 5px\",\r\n                    paddingBottom: paddingBottom\r\n                }}>\r\n                    {annotation}\r\n                </div>\r\n            ) : null}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AnnotatedImage;","var initialState = {\n  animating: false,\n  autoplaying: null,\n  currentDirection: 0,\n  currentLeft: null,\n  currentSlide: 0,\n  direction: 1,\n  dragging: false,\n  edgeDragged: false,\n  initialized: false,\n  lazyLoadedList: [],\n  listHeight: null,\n  listWidth: null,\n  scrolling: false,\n  slideCount: null,\n  slideHeight: null,\n  slideWidth: null,\n  swipeLeft: null,\n  swiped: false,\n  // used by swipeEvent. differentites between touch and swipe.\n  swiping: false,\n  touchObject: {\n    startX: 0,\n    startY: 0,\n    curX: 0,\n    curY: 0\n  },\n  trackStyle: {},\n  trackWidth: 0,\n  targetSlide: 0\n};\nexport default initialState;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport React from \"react\";\nexport function clamp(number, lowerBound, upperBound) {\n  return Math.max(lowerBound, Math.min(number, upperBound));\n}\nexport var safePreventDefault = function safePreventDefault(event) {\n  var passiveEvents = [\"onTouchStart\", \"onTouchMove\", \"onWheel\"];\n  if (!passiveEvents.includes(event._reactName)) {\n    event.preventDefault();\n  }\n};\nexport var getOnDemandLazySlides = function getOnDemandLazySlides(spec) {\n  var onDemandSlides = [];\n  var startIndex = lazyStartIndex(spec);\n  var endIndex = lazyEndIndex(spec);\n  for (var slideIndex = startIndex; slideIndex < endIndex; slideIndex++) {\n    if (spec.lazyLoadedList.indexOf(slideIndex) < 0) {\n      onDemandSlides.push(slideIndex);\n    }\n  }\n  return onDemandSlides;\n};\n\n// return list of slides that need to be present\nexport var getRequiredLazySlides = function getRequiredLazySlides(spec) {\n  var requiredSlides = [];\n  var startIndex = lazyStartIndex(spec);\n  var endIndex = lazyEndIndex(spec);\n  for (var slideIndex = startIndex; slideIndex < endIndex; slideIndex++) {\n    requiredSlides.push(slideIndex);\n  }\n  return requiredSlides;\n};\n\n// startIndex that needs to be present\nexport var lazyStartIndex = function lazyStartIndex(spec) {\n  return spec.currentSlide - lazySlidesOnLeft(spec);\n};\nexport var lazyEndIndex = function lazyEndIndex(spec) {\n  return spec.currentSlide + lazySlidesOnRight(spec);\n};\nexport var lazySlidesOnLeft = function lazySlidesOnLeft(spec) {\n  return spec.centerMode ? Math.floor(spec.slidesToShow / 2) + (parseInt(spec.centerPadding) > 0 ? 1 : 0) : 0;\n};\nexport var lazySlidesOnRight = function lazySlidesOnRight(spec) {\n  return spec.centerMode ? Math.floor((spec.slidesToShow - 1) / 2) + 1 + (parseInt(spec.centerPadding) > 0 ? 1 : 0) : spec.slidesToShow;\n};\n\n// get width of an element\nexport var getWidth = function getWidth(elem) {\n  return elem && elem.offsetWidth || 0;\n};\nexport var getHeight = function getHeight(elem) {\n  return elem && elem.offsetHeight || 0;\n};\nexport var getSwipeDirection = function getSwipeDirection(touchObject) {\n  var verticalSwiping = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var xDist, yDist, r, swipeAngle;\n  xDist = touchObject.startX - touchObject.curX;\n  yDist = touchObject.startY - touchObject.curY;\n  r = Math.atan2(yDist, xDist);\n  swipeAngle = Math.round(r * 180 / Math.PI);\n  if (swipeAngle < 0) {\n    swipeAngle = 360 - Math.abs(swipeAngle);\n  }\n  if (swipeAngle <= 45 && swipeAngle >= 0 || swipeAngle <= 360 && swipeAngle >= 315) {\n    return \"left\";\n  }\n  if (swipeAngle >= 135 && swipeAngle <= 225) {\n    return \"right\";\n  }\n  if (verticalSwiping === true) {\n    if (swipeAngle >= 35 && swipeAngle <= 135) {\n      return \"up\";\n    } else {\n      return \"down\";\n    }\n  }\n  return \"vertical\";\n};\n\n// whether or not we can go next\nexport var canGoNext = function canGoNext(spec) {\n  var canGo = true;\n  if (!spec.infinite) {\n    if (spec.centerMode && spec.currentSlide >= spec.slideCount - 1) {\n      canGo = false;\n    } else if (spec.slideCount <= spec.slidesToShow || spec.currentSlide >= spec.slideCount - spec.slidesToShow) {\n      canGo = false;\n    }\n  }\n  return canGo;\n};\n\n// given an object and a list of keys, return new object with given keys\nexport var extractObject = function extractObject(spec, keys) {\n  var newObject = {};\n  keys.forEach(function (key) {\n    return newObject[key] = spec[key];\n  });\n  return newObject;\n};\n\n// get initialized state\nexport var initializedState = function initializedState(spec) {\n  // spec also contains listRef, trackRef\n  var slideCount = React.Children.count(spec.children);\n  var listNode = spec.listRef;\n  var listWidth = Math.ceil(getWidth(listNode));\n  var trackNode = spec.trackRef && spec.trackRef.node;\n  var trackWidth = Math.ceil(getWidth(trackNode));\n  var slideWidth;\n  if (!spec.vertical) {\n    var centerPaddingAdj = spec.centerMode && parseInt(spec.centerPadding) * 2;\n    if (typeof spec.centerPadding === \"string\" && spec.centerPadding.slice(-1) === \"%\") {\n      centerPaddingAdj *= listWidth / 100;\n    }\n    slideWidth = Math.ceil((listWidth - centerPaddingAdj) / spec.slidesToShow);\n  } else {\n    slideWidth = listWidth;\n  }\n  var slideHeight = listNode && getHeight(listNode.querySelector('[data-index=\"0\"]'));\n  var listHeight = slideHeight * spec.slidesToShow;\n  var currentSlide = spec.currentSlide === undefined ? spec.initialSlide : spec.currentSlide;\n  if (spec.rtl && spec.currentSlide === undefined) {\n    currentSlide = slideCount - 1 - spec.initialSlide;\n  }\n  var lazyLoadedList = spec.lazyLoadedList || [];\n  var slidesToLoad = getOnDemandLazySlides(_objectSpread(_objectSpread({}, spec), {}, {\n    currentSlide: currentSlide,\n    lazyLoadedList: lazyLoadedList\n  }));\n  lazyLoadedList = lazyLoadedList.concat(slidesToLoad);\n  var state = {\n    slideCount: slideCount,\n    slideWidth: slideWidth,\n    listWidth: listWidth,\n    trackWidth: trackWidth,\n    currentSlide: currentSlide,\n    slideHeight: slideHeight,\n    listHeight: listHeight,\n    lazyLoadedList: lazyLoadedList\n  };\n  if (spec.autoplaying === null && spec.autoplay) {\n    state[\"autoplaying\"] = \"playing\";\n  }\n  return state;\n};\nexport var slideHandler = function slideHandler(spec) {\n  var waitForAnimate = spec.waitForAnimate,\n    animating = spec.animating,\n    fade = spec.fade,\n    infinite = spec.infinite,\n    index = spec.index,\n    slideCount = spec.slideCount,\n    lazyLoad = spec.lazyLoad,\n    currentSlide = spec.currentSlide,\n    centerMode = spec.centerMode,\n    slidesToScroll = spec.slidesToScroll,\n    slidesToShow = spec.slidesToShow,\n    useCSS = spec.useCSS;\n  var lazyLoadedList = spec.lazyLoadedList;\n  if (waitForAnimate && animating) return {};\n  var animationSlide = index,\n    finalSlide,\n    animationLeft,\n    finalLeft;\n  var state = {},\n    nextState = {};\n  var targetSlide = infinite ? index : clamp(index, 0, slideCount - 1);\n  if (fade) {\n    if (!infinite && (index < 0 || index >= slideCount)) return {};\n    if (index < 0) {\n      animationSlide = index + slideCount;\n    } else if (index >= slideCount) {\n      animationSlide = index - slideCount;\n    }\n    if (lazyLoad && lazyLoadedList.indexOf(animationSlide) < 0) {\n      lazyLoadedList = lazyLoadedList.concat(animationSlide);\n    }\n    state = {\n      animating: true,\n      currentSlide: animationSlide,\n      lazyLoadedList: lazyLoadedList,\n      targetSlide: animationSlide\n    };\n    nextState = {\n      animating: false,\n      targetSlide: animationSlide\n    };\n  } else {\n    finalSlide = animationSlide;\n    if (animationSlide < 0) {\n      finalSlide = animationSlide + slideCount;\n      if (!infinite) finalSlide = 0;else if (slideCount % slidesToScroll !== 0) finalSlide = slideCount - slideCount % slidesToScroll;\n    } else if (!canGoNext(spec) && animationSlide > currentSlide) {\n      animationSlide = finalSlide = currentSlide;\n    } else if (centerMode && animationSlide >= slideCount) {\n      animationSlide = infinite ? slideCount : slideCount - 1;\n      finalSlide = infinite ? 0 : slideCount - 1;\n    } else if (animationSlide >= slideCount) {\n      finalSlide = animationSlide - slideCount;\n      if (!infinite) finalSlide = slideCount - slidesToShow;else if (slideCount % slidesToScroll !== 0) finalSlide = 0;\n    }\n    if (!infinite && animationSlide + slidesToShow >= slideCount) {\n      finalSlide = slideCount - slidesToShow;\n    }\n    animationLeft = getTrackLeft(_objectSpread(_objectSpread({}, spec), {}, {\n      slideIndex: animationSlide\n    }));\n    finalLeft = getTrackLeft(_objectSpread(_objectSpread({}, spec), {}, {\n      slideIndex: finalSlide\n    }));\n    if (!infinite) {\n      if (animationLeft === finalLeft) animationSlide = finalSlide;\n      animationLeft = finalLeft;\n    }\n    if (lazyLoad) {\n      lazyLoadedList = lazyLoadedList.concat(getOnDemandLazySlides(_objectSpread(_objectSpread({}, spec), {}, {\n        currentSlide: animationSlide\n      })));\n    }\n    if (!useCSS) {\n      state = {\n        currentSlide: finalSlide,\n        trackStyle: getTrackCSS(_objectSpread(_objectSpread({}, spec), {}, {\n          left: finalLeft\n        })),\n        lazyLoadedList: lazyLoadedList,\n        targetSlide: targetSlide\n      };\n    } else {\n      state = {\n        animating: true,\n        currentSlide: finalSlide,\n        trackStyle: getTrackAnimateCSS(_objectSpread(_objectSpread({}, spec), {}, {\n          left: animationLeft\n        })),\n        lazyLoadedList: lazyLoadedList,\n        targetSlide: targetSlide\n      };\n      nextState = {\n        animating: false,\n        currentSlide: finalSlide,\n        trackStyle: getTrackCSS(_objectSpread(_objectSpread({}, spec), {}, {\n          left: finalLeft\n        })),\n        swipeLeft: null,\n        targetSlide: targetSlide\n      };\n    }\n  }\n  return {\n    state: state,\n    nextState: nextState\n  };\n};\nexport var changeSlide = function changeSlide(spec, options) {\n  var indexOffset, previousInt, slideOffset, unevenOffset, targetSlide;\n  var slidesToScroll = spec.slidesToScroll,\n    slidesToShow = spec.slidesToShow,\n    slideCount = spec.slideCount,\n    currentSlide = spec.currentSlide,\n    previousTargetSlide = spec.targetSlide,\n    lazyLoad = spec.lazyLoad,\n    infinite = spec.infinite;\n  unevenOffset = slideCount % slidesToScroll !== 0;\n  indexOffset = unevenOffset ? 0 : (slideCount - currentSlide) % slidesToScroll;\n  if (options.message === \"previous\") {\n    slideOffset = indexOffset === 0 ? slidesToScroll : slidesToShow - indexOffset;\n    targetSlide = currentSlide - slideOffset;\n    if (lazyLoad && !infinite) {\n      previousInt = currentSlide - slideOffset;\n      targetSlide = previousInt === -1 ? slideCount - 1 : previousInt;\n    }\n    if (!infinite) {\n      targetSlide = previousTargetSlide - slidesToScroll;\n    }\n  } else if (options.message === \"next\") {\n    slideOffset = indexOffset === 0 ? slidesToScroll : indexOffset;\n    targetSlide = currentSlide + slideOffset;\n    if (lazyLoad && !infinite) {\n      targetSlide = (currentSlide + slidesToScroll) % slideCount + indexOffset;\n    }\n    if (!infinite) {\n      targetSlide = previousTargetSlide + slidesToScroll;\n    }\n  } else if (options.message === \"dots\") {\n    // Click on dots\n    targetSlide = options.index * options.slidesToScroll;\n  } else if (options.message === \"children\") {\n    // Click on the slides\n    targetSlide = options.index;\n    if (infinite) {\n      var direction = siblingDirection(_objectSpread(_objectSpread({}, spec), {}, {\n        targetSlide: targetSlide\n      }));\n      if (targetSlide > options.currentSlide && direction === \"left\") {\n        targetSlide = targetSlide - slideCount;\n      } else if (targetSlide < options.currentSlide && direction === \"right\") {\n        targetSlide = targetSlide + slideCount;\n      }\n    }\n  } else if (options.message === \"index\") {\n    targetSlide = Number(options.index);\n  }\n  return targetSlide;\n};\nexport var keyHandler = function keyHandler(e, accessibility, rtl) {\n  if (e.target.tagName.match(\"TEXTAREA|INPUT|SELECT\") || !accessibility) return \"\";\n  if (e.keyCode === 37) return rtl ? \"next\" : \"previous\";\n  if (e.keyCode === 39) return rtl ? \"previous\" : \"next\";\n  return \"\";\n};\nexport var swipeStart = function swipeStart(e, swipe, draggable) {\n  e.target.tagName === \"IMG\" && safePreventDefault(e);\n  if (!swipe || !draggable && e.type.indexOf(\"mouse\") !== -1) return \"\";\n  return {\n    dragging: true,\n    touchObject: {\n      startX: e.touches ? e.touches[0].pageX : e.clientX,\n      startY: e.touches ? e.touches[0].pageY : e.clientY,\n      curX: e.touches ? e.touches[0].pageX : e.clientX,\n      curY: e.touches ? e.touches[0].pageY : e.clientY\n    }\n  };\n};\nexport var swipeMove = function swipeMove(e, spec) {\n  // spec also contains, trackRef and slideIndex\n  var scrolling = spec.scrolling,\n    animating = spec.animating,\n    vertical = spec.vertical,\n    swipeToSlide = spec.swipeToSlide,\n    verticalSwiping = spec.verticalSwiping,\n    rtl = spec.rtl,\n    currentSlide = spec.currentSlide,\n    edgeFriction = spec.edgeFriction,\n    edgeDragged = spec.edgeDragged,\n    onEdge = spec.onEdge,\n    swiped = spec.swiped,\n    swiping = spec.swiping,\n    slideCount = spec.slideCount,\n    slidesToScroll = spec.slidesToScroll,\n    infinite = spec.infinite,\n    touchObject = spec.touchObject,\n    swipeEvent = spec.swipeEvent,\n    listHeight = spec.listHeight,\n    listWidth = spec.listWidth;\n  if (scrolling) return;\n  if (animating) return safePreventDefault(e);\n  if (vertical && swipeToSlide && verticalSwiping) safePreventDefault(e);\n  var swipeLeft,\n    state = {};\n  var curLeft = getTrackLeft(spec);\n  touchObject.curX = e.touches ? e.touches[0].pageX : e.clientX;\n  touchObject.curY = e.touches ? e.touches[0].pageY : e.clientY;\n  touchObject.swipeLength = Math.round(Math.sqrt(Math.pow(touchObject.curX - touchObject.startX, 2)));\n  var verticalSwipeLength = Math.round(Math.sqrt(Math.pow(touchObject.curY - touchObject.startY, 2)));\n  if (!verticalSwiping && !swiping && verticalSwipeLength > 10) {\n    return {\n      scrolling: true\n    };\n  }\n  if (verticalSwiping) touchObject.swipeLength = verticalSwipeLength;\n  var positionOffset = (!rtl ? 1 : -1) * (touchObject.curX > touchObject.startX ? 1 : -1);\n  if (verticalSwiping) positionOffset = touchObject.curY > touchObject.startY ? 1 : -1;\n  var dotCount = Math.ceil(slideCount / slidesToScroll);\n  var swipeDirection = getSwipeDirection(spec.touchObject, verticalSwiping);\n  var touchSwipeLength = touchObject.swipeLength;\n  if (!infinite) {\n    if (currentSlide === 0 && (swipeDirection === \"right\" || swipeDirection === \"down\") || currentSlide + 1 >= dotCount && (swipeDirection === \"left\" || swipeDirection === \"up\") || !canGoNext(spec) && (swipeDirection === \"left\" || swipeDirection === \"up\")) {\n      touchSwipeLength = touchObject.swipeLength * edgeFriction;\n      if (edgeDragged === false && onEdge) {\n        onEdge(swipeDirection);\n        state[\"edgeDragged\"] = true;\n      }\n    }\n  }\n  if (!swiped && swipeEvent) {\n    swipeEvent(swipeDirection);\n    state[\"swiped\"] = true;\n  }\n  if (!vertical) {\n    if (!rtl) {\n      swipeLeft = curLeft + touchSwipeLength * positionOffset;\n    } else {\n      swipeLeft = curLeft - touchSwipeLength * positionOffset;\n    }\n  } else {\n    swipeLeft = curLeft + touchSwipeLength * (listHeight / listWidth) * positionOffset;\n  }\n  if (verticalSwiping) {\n    swipeLeft = curLeft + touchSwipeLength * positionOffset;\n  }\n  state = _objectSpread(_objectSpread({}, state), {}, {\n    touchObject: touchObject,\n    swipeLeft: swipeLeft,\n    trackStyle: getTrackCSS(_objectSpread(_objectSpread({}, spec), {}, {\n      left: swipeLeft\n    }))\n  });\n  if (Math.abs(touchObject.curX - touchObject.startX) < Math.abs(touchObject.curY - touchObject.startY) * 0.8) {\n    return state;\n  }\n  if (touchObject.swipeLength > 10) {\n    state[\"swiping\"] = true;\n    safePreventDefault(e);\n  }\n  return state;\n};\nexport var swipeEnd = function swipeEnd(e, spec) {\n  var dragging = spec.dragging,\n    swipe = spec.swipe,\n    touchObject = spec.touchObject,\n    listWidth = spec.listWidth,\n    touchThreshold = spec.touchThreshold,\n    verticalSwiping = spec.verticalSwiping,\n    listHeight = spec.listHeight,\n    swipeToSlide = spec.swipeToSlide,\n    scrolling = spec.scrolling,\n    onSwipe = spec.onSwipe,\n    targetSlide = spec.targetSlide,\n    currentSlide = spec.currentSlide,\n    infinite = spec.infinite;\n  if (!dragging) {\n    if (swipe) safePreventDefault(e);\n    return {};\n  }\n  var minSwipe = verticalSwiping ? listHeight / touchThreshold : listWidth / touchThreshold;\n  var swipeDirection = getSwipeDirection(touchObject, verticalSwiping);\n  // reset the state of touch related state variables.\n  var state = {\n    dragging: false,\n    edgeDragged: false,\n    scrolling: false,\n    swiping: false,\n    swiped: false,\n    swipeLeft: null,\n    touchObject: {}\n  };\n  if (scrolling) {\n    return state;\n  }\n  if (!touchObject.swipeLength) {\n    return state;\n  }\n  if (touchObject.swipeLength > minSwipe) {\n    safePreventDefault(e);\n    if (onSwipe) {\n      onSwipe(swipeDirection);\n    }\n    var slideCount, newSlide;\n    var activeSlide = infinite ? currentSlide : targetSlide;\n    switch (swipeDirection) {\n      case \"left\":\n      case \"up\":\n        newSlide = activeSlide + getSlideCount(spec);\n        slideCount = swipeToSlide ? checkNavigable(spec, newSlide) : newSlide;\n        state[\"currentDirection\"] = 0;\n        break;\n      case \"right\":\n      case \"down\":\n        newSlide = activeSlide - getSlideCount(spec);\n        slideCount = swipeToSlide ? checkNavigable(spec, newSlide) : newSlide;\n        state[\"currentDirection\"] = 1;\n        break;\n      default:\n        slideCount = activeSlide;\n    }\n    state[\"triggerSlideHandler\"] = slideCount;\n  } else {\n    // Adjust the track back to it's original position.\n    var currentLeft = getTrackLeft(spec);\n    state[\"trackStyle\"] = getTrackAnimateCSS(_objectSpread(_objectSpread({}, spec), {}, {\n      left: currentLeft\n    }));\n  }\n  return state;\n};\nexport var getNavigableIndexes = function getNavigableIndexes(spec) {\n  var max = spec.infinite ? spec.slideCount * 2 : spec.slideCount;\n  var breakpoint = spec.infinite ? spec.slidesToShow * -1 : 0;\n  var counter = spec.infinite ? spec.slidesToShow * -1 : 0;\n  var indexes = [];\n  while (breakpoint < max) {\n    indexes.push(breakpoint);\n    breakpoint = counter + spec.slidesToScroll;\n    counter += Math.min(spec.slidesToScroll, spec.slidesToShow);\n  }\n  return indexes;\n};\nexport var checkNavigable = function checkNavigable(spec, index) {\n  var navigables = getNavigableIndexes(spec);\n  var prevNavigable = 0;\n  if (index > navigables[navigables.length - 1]) {\n    index = navigables[navigables.length - 1];\n  } else {\n    for (var n in navigables) {\n      if (index < navigables[n]) {\n        index = prevNavigable;\n        break;\n      }\n      prevNavigable = navigables[n];\n    }\n  }\n  return index;\n};\nexport var getSlideCount = function getSlideCount(spec) {\n  var centerOffset = spec.centerMode ? spec.slideWidth * Math.floor(spec.slidesToShow / 2) : 0;\n  if (spec.swipeToSlide) {\n    var swipedSlide;\n    var slickList = spec.listRef;\n    var slides = slickList.querySelectorAll && slickList.querySelectorAll(\".slick-slide\") || [];\n    Array.from(slides).every(function (slide) {\n      if (!spec.vertical) {\n        if (slide.offsetLeft - centerOffset + getWidth(slide) / 2 > spec.swipeLeft * -1) {\n          swipedSlide = slide;\n          return false;\n        }\n      } else {\n        if (slide.offsetTop + getHeight(slide) / 2 > spec.swipeLeft * -1) {\n          swipedSlide = slide;\n          return false;\n        }\n      }\n      return true;\n    });\n    if (!swipedSlide) {\n      return 0;\n    }\n    var currentIndex = spec.rtl === true ? spec.slideCount - spec.currentSlide : spec.currentSlide;\n    var slidesTraversed = Math.abs(swipedSlide.dataset.index - currentIndex) || 1;\n    return slidesTraversed;\n  } else {\n    return spec.slidesToScroll;\n  }\n};\nexport var checkSpecKeys = function checkSpecKeys(spec, keysArray) {\n  return (\n    // eslint-disable-next-line no-prototype-builtins\n    keysArray.reduce(function (value, key) {\n      return value && spec.hasOwnProperty(key);\n    }, true) ? null : console.error(\"Keys Missing:\", spec)\n  );\n};\nexport var getTrackCSS = function getTrackCSS(spec) {\n  checkSpecKeys(spec, [\"left\", \"variableWidth\", \"slideCount\", \"slidesToShow\", \"slideWidth\"]);\n  var trackWidth, trackHeight;\n  var trackChildren = spec.slideCount + 2 * spec.slidesToShow;\n  if (!spec.vertical) {\n    trackWidth = getTotalSlides(spec) * spec.slideWidth;\n  } else {\n    trackHeight = trackChildren * spec.slideHeight;\n  }\n  var style = {\n    opacity: 1,\n    transition: \"\",\n    WebkitTransition: \"\"\n  };\n  if (spec.useTransform) {\n    var WebkitTransform = !spec.vertical ? \"translate3d(\" + spec.left + \"px, 0px, 0px)\" : \"translate3d(0px, \" + spec.left + \"px, 0px)\";\n    var transform = !spec.vertical ? \"translate3d(\" + spec.left + \"px, 0px, 0px)\" : \"translate3d(0px, \" + spec.left + \"px, 0px)\";\n    var msTransform = !spec.vertical ? \"translateX(\" + spec.left + \"px)\" : \"translateY(\" + spec.left + \"px)\";\n    style = _objectSpread(_objectSpread({}, style), {}, {\n      WebkitTransform: WebkitTransform,\n      transform: transform,\n      msTransform: msTransform\n    });\n  } else {\n    if (spec.vertical) {\n      style[\"top\"] = spec.left;\n    } else {\n      style[\"left\"] = spec.left;\n    }\n  }\n  if (spec.fade) style = {\n    opacity: 1\n  };\n  if (trackWidth) style.width = trackWidth;\n  if (trackHeight) style.height = trackHeight;\n\n  // Fallback for IE8\n  if (window && !window.addEventListener && window.attachEvent) {\n    if (!spec.vertical) {\n      style.marginLeft = spec.left + \"px\";\n    } else {\n      style.marginTop = spec.left + \"px\";\n    }\n  }\n  return style;\n};\nexport var getTrackAnimateCSS = function getTrackAnimateCSS(spec) {\n  checkSpecKeys(spec, [\"left\", \"variableWidth\", \"slideCount\", \"slidesToShow\", \"slideWidth\", \"speed\", \"cssEase\"]);\n  var style = getTrackCSS(spec);\n  // useCSS is true by default so it can be undefined\n  if (spec.useTransform) {\n    style.WebkitTransition = \"-webkit-transform \" + spec.speed + \"ms \" + spec.cssEase;\n    style.transition = \"transform \" + spec.speed + \"ms \" + spec.cssEase;\n  } else {\n    if (spec.vertical) {\n      style.transition = \"top \" + spec.speed + \"ms \" + spec.cssEase;\n    } else {\n      style.transition = \"left \" + spec.speed + \"ms \" + spec.cssEase;\n    }\n  }\n  return style;\n};\nexport var getTrackLeft = function getTrackLeft(spec) {\n  if (spec.unslick) {\n    return 0;\n  }\n  checkSpecKeys(spec, [\"slideIndex\", \"trackRef\", \"infinite\", \"centerMode\", \"slideCount\", \"slidesToShow\", \"slidesToScroll\", \"slideWidth\", \"listWidth\", \"variableWidth\", \"slideHeight\"]);\n  var slideIndex = spec.slideIndex,\n    trackRef = spec.trackRef,\n    infinite = spec.infinite,\n    centerMode = spec.centerMode,\n    slideCount = spec.slideCount,\n    slidesToShow = spec.slidesToShow,\n    slidesToScroll = spec.slidesToScroll,\n    slideWidth = spec.slideWidth,\n    listWidth = spec.listWidth,\n    variableWidth = spec.variableWidth,\n    slideHeight = spec.slideHeight,\n    fade = spec.fade,\n    vertical = spec.vertical;\n  var slideOffset = 0;\n  var targetLeft;\n  var targetSlide;\n  var verticalOffset = 0;\n  if (fade || spec.slideCount === 1) {\n    return 0;\n  }\n  var slidesToOffset = 0;\n  if (infinite) {\n    slidesToOffset = -getPreClones(spec); // bring active slide to the beginning of visual area\n    // if next scroll doesn't have enough children, just reach till the end of original slides instead of shifting slidesToScroll children\n    if (slideCount % slidesToScroll !== 0 && slideIndex + slidesToScroll > slideCount) {\n      slidesToOffset = -(slideIndex > slideCount ? slidesToShow - (slideIndex - slideCount) : slideCount % slidesToScroll);\n    }\n    // shift current slide to center of the frame\n    if (centerMode) {\n      slidesToOffset += parseInt(slidesToShow / 2);\n    }\n  } else {\n    if (slideCount % slidesToScroll !== 0 && slideIndex + slidesToScroll > slideCount) {\n      slidesToOffset = slidesToShow - slideCount % slidesToScroll;\n    }\n    if (centerMode) {\n      slidesToOffset = parseInt(slidesToShow / 2);\n    }\n  }\n  slideOffset = slidesToOffset * slideWidth;\n  verticalOffset = slidesToOffset * slideHeight;\n  if (!vertical) {\n    targetLeft = slideIndex * slideWidth * -1 + slideOffset;\n  } else {\n    targetLeft = slideIndex * slideHeight * -1 + verticalOffset;\n  }\n  if (variableWidth === true) {\n    var targetSlideIndex;\n    var trackElem = trackRef && trackRef.node;\n    targetSlideIndex = slideIndex + getPreClones(spec);\n    targetSlide = trackElem && trackElem.childNodes[targetSlideIndex];\n    targetLeft = targetSlide ? targetSlide.offsetLeft * -1 : 0;\n    if (centerMode === true) {\n      targetSlideIndex = infinite ? slideIndex + getPreClones(spec) : slideIndex;\n      targetSlide = trackElem && trackElem.children[targetSlideIndex];\n      targetLeft = 0;\n      for (var slide = 0; slide < targetSlideIndex; slide++) {\n        targetLeft -= trackElem && trackElem.children[slide] && trackElem.children[slide].offsetWidth;\n      }\n      targetLeft -= parseInt(spec.centerPadding);\n      targetLeft += targetSlide && (listWidth - targetSlide.offsetWidth) / 2;\n    }\n  }\n  return targetLeft;\n};\nexport var getPreClones = function getPreClones(spec) {\n  if (spec.unslick || !spec.infinite) {\n    return 0;\n  }\n  if (spec.variableWidth) {\n    return spec.slideCount;\n  }\n  return spec.slidesToShow + (spec.centerMode ? 1 : 0);\n};\nexport var getPostClones = function getPostClones(spec) {\n  if (spec.unslick || !spec.infinite) {\n    return 0;\n  }\n  return spec.slideCount;\n};\nexport var getTotalSlides = function getTotalSlides(spec) {\n  return spec.slideCount === 1 ? 1 : getPreClones(spec) + spec.slideCount + getPostClones(spec);\n};\nexport var siblingDirection = function siblingDirection(spec) {\n  if (spec.targetSlide > spec.currentSlide) {\n    if (spec.targetSlide > spec.currentSlide + slidesOnRight(spec)) {\n      return \"left\";\n    }\n    return \"right\";\n  } else {\n    if (spec.targetSlide < spec.currentSlide - slidesOnLeft(spec)) {\n      return \"right\";\n    }\n    return \"left\";\n  }\n};\nexport var slidesOnRight = function slidesOnRight(_ref) {\n  var slidesToShow = _ref.slidesToShow,\n    centerMode = _ref.centerMode,\n    rtl = _ref.rtl,\n    centerPadding = _ref.centerPadding;\n  // returns no of slides on the right of active slide\n  if (centerMode) {\n    var right = (slidesToShow - 1) / 2 + 1;\n    if (parseInt(centerPadding) > 0) right += 1;\n    if (rtl && slidesToShow % 2 === 0) right += 1;\n    return right;\n  }\n  if (rtl) {\n    return 0;\n  }\n  return slidesToShow - 1;\n};\nexport var slidesOnLeft = function slidesOnLeft(_ref2) {\n  var slidesToShow = _ref2.slidesToShow,\n    centerMode = _ref2.centerMode,\n    rtl = _ref2.rtl,\n    centerPadding = _ref2.centerPadding;\n  // returns no of slides on the left of active slide\n  if (centerMode) {\n    var left = (slidesToShow - 1) / 2 + 1;\n    if (parseInt(centerPadding) > 0) left += 1;\n    if (!rtl && slidesToShow % 2 === 0) left += 1;\n    return left;\n  }\n  if (rtl) {\n    return slidesToShow - 1;\n  }\n  return 0;\n};\nexport var canUseDOM = function canUseDOM() {\n  return !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\n};","\"use strict\";\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport React from \"react\";\nimport classnames from \"classnames\";\nimport { lazyStartIndex, lazyEndIndex, getPreClones } from \"./utils/innerSliderUtils\";\n\n// given specifications/props for a slide, fetch all the classes that need to be applied to the slide\nvar getSlideClasses = function getSlideClasses(spec) {\n  var slickActive, slickCenter, slickCloned;\n  var centerOffset, index;\n  if (spec.rtl) {\n    index = spec.slideCount - 1 - spec.index;\n  } else {\n    index = spec.index;\n  }\n  slickCloned = index < 0 || index >= spec.slideCount;\n  if (spec.centerMode) {\n    centerOffset = Math.floor(spec.slidesToShow / 2);\n    slickCenter = (index - spec.currentSlide) % spec.slideCount === 0;\n    if (index > spec.currentSlide - centerOffset - 1 && index <= spec.currentSlide + centerOffset) {\n      slickActive = true;\n    }\n  } else {\n    slickActive = spec.currentSlide <= index && index < spec.currentSlide + spec.slidesToShow;\n  }\n  var focusedSlide;\n  if (spec.targetSlide < 0) {\n    focusedSlide = spec.targetSlide + spec.slideCount;\n  } else if (spec.targetSlide >= spec.slideCount) {\n    focusedSlide = spec.targetSlide - spec.slideCount;\n  } else {\n    focusedSlide = spec.targetSlide;\n  }\n  var slickCurrent = index === focusedSlide;\n  return {\n    \"slick-slide\": true,\n    \"slick-active\": slickActive,\n    \"slick-center\": slickCenter,\n    \"slick-cloned\": slickCloned,\n    \"slick-current\": slickCurrent // dubious in case of RTL\n  };\n};\n\nvar getSlideStyle = function getSlideStyle(spec) {\n  var style = {};\n  if (spec.variableWidth === undefined || spec.variableWidth === false) {\n    style.width = spec.slideWidth;\n  }\n  if (spec.fade) {\n    style.position = \"relative\";\n    if (spec.vertical && spec.slideHeight) {\n      style.top = -spec.index * parseInt(spec.slideHeight);\n    } else {\n      style.left = -spec.index * parseInt(spec.slideWidth);\n    }\n    style.opacity = spec.currentSlide === spec.index ? 1 : 0;\n    if (spec.useCSS) {\n      style.transition = \"opacity \" + spec.speed + \"ms \" + spec.cssEase + \", \" + \"visibility \" + spec.speed + \"ms \" + spec.cssEase;\n    }\n  }\n  return style;\n};\nvar getKey = function getKey(child, fallbackKey) {\n  return child.key + \"-\" + fallbackKey;\n};\nvar renderSlides = function renderSlides(spec) {\n  var key;\n  var slides = [];\n  var preCloneSlides = [];\n  var postCloneSlides = [];\n  var childrenCount = React.Children.count(spec.children);\n  var startIndex = lazyStartIndex(spec);\n  var endIndex = lazyEndIndex(spec);\n  React.Children.forEach(spec.children, function (elem, index) {\n    var child;\n    var childOnClickOptions = {\n      message: \"children\",\n      index: index,\n      slidesToScroll: spec.slidesToScroll,\n      currentSlide: spec.currentSlide\n    };\n\n    // in case of lazyLoad, whether or not we want to fetch the slide\n    if (!spec.lazyLoad || spec.lazyLoad && spec.lazyLoadedList.indexOf(index) >= 0) {\n      child = elem;\n    } else {\n      child = /*#__PURE__*/React.createElement(\"div\", null);\n    }\n    var childStyle = getSlideStyle(_objectSpread(_objectSpread({}, spec), {}, {\n      index: index\n    }));\n    var slideClass = child.props.className || \"\";\n    var slideClasses = getSlideClasses(_objectSpread(_objectSpread({}, spec), {}, {\n      index: index\n    }));\n    // push a cloned element of the desired slide\n    slides.push( /*#__PURE__*/React.cloneElement(child, {\n      key: \"original\" + getKey(child, index),\n      \"data-index\": index,\n      className: classnames(slideClasses, slideClass),\n      tabIndex: \"-1\",\n      \"aria-hidden\": !slideClasses[\"slick-active\"],\n      style: _objectSpread(_objectSpread({\n        outline: \"none\"\n      }, child.props.style || {}), childStyle),\n      onClick: function onClick(e) {\n        child.props && child.props.onClick && child.props.onClick(e);\n        if (spec.focusOnSelect) {\n          spec.focusOnSelect(childOnClickOptions);\n        }\n      }\n    }));\n\n    // if slide needs to be precloned or postcloned\n    if (spec.infinite && spec.fade === false) {\n      var preCloneNo = childrenCount - index;\n      if (preCloneNo <= getPreClones(spec) && childrenCount !== spec.slidesToShow) {\n        key = -preCloneNo;\n        if (key >= startIndex) {\n          child = elem;\n        }\n        slideClasses = getSlideClasses(_objectSpread(_objectSpread({}, spec), {}, {\n          index: key\n        }));\n        preCloneSlides.push( /*#__PURE__*/React.cloneElement(child, {\n          key: \"precloned\" + getKey(child, key),\n          \"data-index\": key,\n          tabIndex: \"-1\",\n          className: classnames(slideClasses, slideClass),\n          \"aria-hidden\": !slideClasses[\"slick-active\"],\n          style: _objectSpread(_objectSpread({}, child.props.style || {}), childStyle),\n          onClick: function onClick(e) {\n            child.props && child.props.onClick && child.props.onClick(e);\n            if (spec.focusOnSelect) {\n              spec.focusOnSelect(childOnClickOptions);\n            }\n          }\n        }));\n      }\n      if (childrenCount !== spec.slidesToShow) {\n        key = childrenCount + index;\n        if (key < endIndex) {\n          child = elem;\n        }\n        slideClasses = getSlideClasses(_objectSpread(_objectSpread({}, spec), {}, {\n          index: key\n        }));\n        postCloneSlides.push( /*#__PURE__*/React.cloneElement(child, {\n          key: \"postcloned\" + getKey(child, key),\n          \"data-index\": key,\n          tabIndex: \"-1\",\n          className: classnames(slideClasses, slideClass),\n          \"aria-hidden\": !slideClasses[\"slick-active\"],\n          style: _objectSpread(_objectSpread({}, child.props.style || {}), childStyle),\n          onClick: function onClick(e) {\n            child.props && child.props.onClick && child.props.onClick(e);\n            if (spec.focusOnSelect) {\n              spec.focusOnSelect(childOnClickOptions);\n            }\n          }\n        }));\n      }\n    }\n  });\n  if (spec.rtl) {\n    return preCloneSlides.concat(slides, postCloneSlides).reverse();\n  } else {\n    return preCloneSlides.concat(slides, postCloneSlides);\n  }\n};\nexport var Track = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Track, _React$PureComponent);\n  var _super = _createSuper(Track);\n  function Track() {\n    var _this;\n    _classCallCheck(this, Track);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"node\", null);\n    _defineProperty(_assertThisInitialized(_this), \"handleRef\", function (ref) {\n      _this.node = ref;\n    });\n    return _this;\n  }\n  _createClass(Track, [{\n    key: \"render\",\n    value: function render() {\n      var slides = renderSlides(this.props);\n      var _this$props = this.props,\n        onMouseEnter = _this$props.onMouseEnter,\n        onMouseOver = _this$props.onMouseOver,\n        onMouseLeave = _this$props.onMouseLeave;\n      var mouseEvents = {\n        onMouseEnter: onMouseEnter,\n        onMouseOver: onMouseOver,\n        onMouseLeave: onMouseLeave\n      };\n      return /*#__PURE__*/React.createElement(\"div\", _extends({\n        ref: this.handleRef,\n        className: \"slick-track\",\n        style: this.props.trackStyle\n      }, mouseEvents), slides);\n    }\n  }]);\n  return Track;\n}(React.PureComponent);","\"use strict\";\n\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport React from \"react\";\nimport classnames from \"classnames\";\nimport { clamp } from \"./utils/innerSliderUtils\";\nvar getDotCount = function getDotCount(spec) {\n  var dots;\n  if (spec.infinite) {\n    dots = Math.ceil(spec.slideCount / spec.slidesToScroll);\n  } else {\n    dots = Math.ceil((spec.slideCount - spec.slidesToShow) / spec.slidesToScroll) + 1;\n  }\n  return dots;\n};\nexport var Dots = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Dots, _React$PureComponent);\n  var _super = _createSuper(Dots);\n  function Dots() {\n    _classCallCheck(this, Dots);\n    return _super.apply(this, arguments);\n  }\n  _createClass(Dots, [{\n    key: \"clickHandler\",\n    value: function clickHandler(options, e) {\n      // In Autoplay the focus stays on clicked button even after transition\n      // to next slide. That only goes away by click somewhere outside\n      e.preventDefault();\n      this.props.clickHandler(options);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        onMouseEnter = _this$props.onMouseEnter,\n        onMouseOver = _this$props.onMouseOver,\n        onMouseLeave = _this$props.onMouseLeave,\n        infinite = _this$props.infinite,\n        slidesToScroll = _this$props.slidesToScroll,\n        slidesToShow = _this$props.slidesToShow,\n        slideCount = _this$props.slideCount,\n        currentSlide = _this$props.currentSlide;\n      var dotCount = getDotCount({\n        slideCount: slideCount,\n        slidesToScroll: slidesToScroll,\n        slidesToShow: slidesToShow,\n        infinite: infinite\n      });\n      var mouseEvents = {\n        onMouseEnter: onMouseEnter,\n        onMouseOver: onMouseOver,\n        onMouseLeave: onMouseLeave\n      };\n      var dots = [];\n      for (var i = 0; i < dotCount; i++) {\n        var _rightBound = (i + 1) * slidesToScroll - 1;\n        var rightBound = infinite ? _rightBound : clamp(_rightBound, 0, slideCount - 1);\n        var _leftBound = rightBound - (slidesToScroll - 1);\n        var leftBound = infinite ? _leftBound : clamp(_leftBound, 0, slideCount - 1);\n        var className = classnames({\n          \"slick-active\": infinite ? currentSlide >= leftBound && currentSlide <= rightBound : currentSlide === leftBound\n        });\n        var dotOptions = {\n          message: \"dots\",\n          index: i,\n          slidesToScroll: slidesToScroll,\n          currentSlide: currentSlide\n        };\n        var onClick = this.clickHandler.bind(this, dotOptions);\n        dots = dots.concat( /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          className: className\n        }, /*#__PURE__*/React.cloneElement(this.props.customPaging(i), {\n          onClick: onClick\n        })));\n      }\n      return /*#__PURE__*/React.cloneElement(this.props.appendDots(dots), _objectSpread({\n        className: this.props.dotsClass\n      }, mouseEvents));\n    }\n  }]);\n  return Dots;\n}(React.PureComponent);","\"use strict\";\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport React from \"react\";\nimport classnames from \"classnames\";\nimport { canGoNext } from \"./utils/innerSliderUtils\";\nexport var PrevArrow = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(PrevArrow, _React$PureComponent);\n  var _super = _createSuper(PrevArrow);\n  function PrevArrow() {\n    _classCallCheck(this, PrevArrow);\n    return _super.apply(this, arguments);\n  }\n  _createClass(PrevArrow, [{\n    key: \"clickHandler\",\n    value: function clickHandler(options, e) {\n      if (e) {\n        e.preventDefault();\n      }\n      this.props.clickHandler(options, e);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var prevClasses = {\n        \"slick-arrow\": true,\n        \"slick-prev\": true\n      };\n      var prevHandler = this.clickHandler.bind(this, {\n        message: \"previous\"\n      });\n      if (!this.props.infinite && (this.props.currentSlide === 0 || this.props.slideCount <= this.props.slidesToShow)) {\n        prevClasses[\"slick-disabled\"] = true;\n        prevHandler = null;\n      }\n      var prevArrowProps = {\n        key: \"0\",\n        \"data-role\": \"none\",\n        className: classnames(prevClasses),\n        style: {\n          display: \"block\"\n        },\n        onClick: prevHandler\n      };\n      var customProps = {\n        currentSlide: this.props.currentSlide,\n        slideCount: this.props.slideCount\n      };\n      var prevArrow;\n      if (this.props.prevArrow) {\n        prevArrow = /*#__PURE__*/React.cloneElement(this.props.prevArrow, _objectSpread(_objectSpread({}, prevArrowProps), customProps));\n      } else {\n        prevArrow = /*#__PURE__*/React.createElement(\"button\", _extends({\n          key: \"0\",\n          type: \"button\"\n        }, prevArrowProps), \" \", \"Previous\");\n      }\n      return prevArrow;\n    }\n  }]);\n  return PrevArrow;\n}(React.PureComponent);\nexport var NextArrow = /*#__PURE__*/function (_React$PureComponent2) {\n  _inherits(NextArrow, _React$PureComponent2);\n  var _super2 = _createSuper(NextArrow);\n  function NextArrow() {\n    _classCallCheck(this, NextArrow);\n    return _super2.apply(this, arguments);\n  }\n  _createClass(NextArrow, [{\n    key: \"clickHandler\",\n    value: function clickHandler(options, e) {\n      if (e) {\n        e.preventDefault();\n      }\n      this.props.clickHandler(options, e);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var nextClasses = {\n        \"slick-arrow\": true,\n        \"slick-next\": true\n      };\n      var nextHandler = this.clickHandler.bind(this, {\n        message: \"next\"\n      });\n      if (!canGoNext(this.props)) {\n        nextClasses[\"slick-disabled\"] = true;\n        nextHandler = null;\n      }\n      var nextArrowProps = {\n        key: \"1\",\n        \"data-role\": \"none\",\n        className: classnames(nextClasses),\n        style: {\n          display: \"block\"\n        },\n        onClick: nextHandler\n      };\n      var customProps = {\n        currentSlide: this.props.currentSlide,\n        slideCount: this.props.slideCount\n      };\n      var nextArrow;\n      if (this.props.nextArrow) {\n        nextArrow = /*#__PURE__*/React.cloneElement(this.props.nextArrow, _objectSpread(_objectSpread({}, nextArrowProps), customProps));\n      } else {\n        nextArrow = /*#__PURE__*/React.createElement(\"button\", _extends({\n          key: \"1\",\n          type: \"button\"\n        }, nextArrowProps), \" \", \"Next\");\n      }\n      return nextArrow;\n    }\n  }]);\n  return NextArrow;\n}(React.PureComponent);","\"use strict\";\n\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"animating\"];\nimport React from \"react\";\nimport initialState from \"./initial-state\";\nimport { debounce } from \"throttle-debounce\";\nimport classnames from \"classnames\";\nimport { getOnDemandLazySlides, extractObject, initializedState, getHeight, canGoNext, slideHandler, changeSlide, keyHandler, swipeStart, swipeMove, swipeEnd, getPreClones, getPostClones, getTrackLeft, getTrackCSS } from \"./utils/innerSliderUtils\";\nimport { Track } from \"./track\";\nimport { Dots } from \"./dots\";\nimport { PrevArrow, NextArrow } from \"./arrows\";\nimport ResizeObserver from \"resize-observer-polyfill\";\nexport var InnerSlider = /*#__PURE__*/function (_React$Component) {\n  _inherits(InnerSlider, _React$Component);\n  var _super = _createSuper(InnerSlider);\n  function InnerSlider(props) {\n    var _this;\n    _classCallCheck(this, InnerSlider);\n    _this = _super.call(this, props);\n    _defineProperty(_assertThisInitialized(_this), \"listRefHandler\", function (ref) {\n      return _this.list = ref;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"trackRefHandler\", function (ref) {\n      return _this.track = ref;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"adaptHeight\", function () {\n      if (_this.props.adaptiveHeight && _this.list) {\n        var elem = _this.list.querySelector(\"[data-index=\\\"\".concat(_this.state.currentSlide, \"\\\"]\"));\n        _this.list.style.height = getHeight(elem) + \"px\";\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", function () {\n      _this.props.onInit && _this.props.onInit();\n      if (_this.props.lazyLoad) {\n        var slidesToLoad = getOnDemandLazySlides(_objectSpread(_objectSpread({}, _this.props), _this.state));\n        if (slidesToLoad.length > 0) {\n          _this.setState(function (prevState) {\n            return {\n              lazyLoadedList: prevState.lazyLoadedList.concat(slidesToLoad)\n            };\n          });\n          if (_this.props.onLazyLoad) {\n            _this.props.onLazyLoad(slidesToLoad);\n          }\n        }\n      }\n      var spec = _objectSpread({\n        listRef: _this.list,\n        trackRef: _this.track\n      }, _this.props);\n      _this.updateState(spec, true, function () {\n        _this.adaptHeight();\n        _this.props.autoplay && _this.autoPlay(\"playing\");\n      });\n      if (_this.props.lazyLoad === \"progressive\") {\n        _this.lazyLoadTimer = setInterval(_this.progressiveLazyLoad, 1000);\n      }\n      _this.ro = new ResizeObserver(function () {\n        if (_this.state.animating) {\n          _this.onWindowResized(false); // don't set trackStyle hence don't break animation\n          _this.callbackTimers.push(setTimeout(function () {\n            return _this.onWindowResized();\n          }, _this.props.speed));\n        } else {\n          _this.onWindowResized();\n        }\n      });\n      _this.ro.observe(_this.list);\n      document.querySelectorAll && Array.prototype.forEach.call(document.querySelectorAll(\".slick-slide\"), function (slide) {\n        slide.onfocus = _this.props.pauseOnFocus ? _this.onSlideFocus : null;\n        slide.onblur = _this.props.pauseOnFocus ? _this.onSlideBlur : null;\n      });\n      if (window.addEventListener) {\n        window.addEventListener(\"resize\", _this.onWindowResized);\n      } else {\n        window.attachEvent(\"onresize\", _this.onWindowResized);\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"componentWillUnmount\", function () {\n      if (_this.animationEndCallback) {\n        clearTimeout(_this.animationEndCallback);\n      }\n      if (_this.lazyLoadTimer) {\n        clearInterval(_this.lazyLoadTimer);\n      }\n      if (_this.callbackTimers.length) {\n        _this.callbackTimers.forEach(function (timer) {\n          return clearTimeout(timer);\n        });\n        _this.callbackTimers = [];\n      }\n      if (window.addEventListener) {\n        window.removeEventListener(\"resize\", _this.onWindowResized);\n      } else {\n        window.detachEvent(\"onresize\", _this.onWindowResized);\n      }\n      if (_this.autoplayTimer) {\n        clearInterval(_this.autoplayTimer);\n      }\n      _this.ro.disconnect();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"componentDidUpdate\", function (prevProps) {\n      _this.checkImagesLoad();\n      _this.props.onReInit && _this.props.onReInit();\n      if (_this.props.lazyLoad) {\n        var slidesToLoad = getOnDemandLazySlides(_objectSpread(_objectSpread({}, _this.props), _this.state));\n        if (slidesToLoad.length > 0) {\n          _this.setState(function (prevState) {\n            return {\n              lazyLoadedList: prevState.lazyLoadedList.concat(slidesToLoad)\n            };\n          });\n          if (_this.props.onLazyLoad) {\n            _this.props.onLazyLoad(slidesToLoad);\n          }\n        }\n      }\n      // if (this.props.onLazyLoad) {\n      //   this.props.onLazyLoad([leftMostSlide])\n      // }\n      _this.adaptHeight();\n      var spec = _objectSpread(_objectSpread({\n        listRef: _this.list,\n        trackRef: _this.track\n      }, _this.props), _this.state);\n      var setTrackStyle = _this.didPropsChange(prevProps);\n      setTrackStyle && _this.updateState(spec, setTrackStyle, function () {\n        if (_this.state.currentSlide >= React.Children.count(_this.props.children)) {\n          _this.changeSlide({\n            message: \"index\",\n            index: React.Children.count(_this.props.children) - _this.props.slidesToShow,\n            currentSlide: _this.state.currentSlide\n          });\n        }\n        if (prevProps.autoplay !== _this.props.autoplay || prevProps.autoplaySpeed !== _this.props.autoplaySpeed) {\n          if (!prevProps.autoplay && _this.props.autoplay) {\n            _this.autoPlay(\"playing\");\n          } else if (_this.props.autoplay) {\n            _this.autoPlay(\"update\");\n          } else {\n            _this.pause(\"paused\");\n          }\n        }\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onWindowResized\", function (setTrackStyle) {\n      if (_this.debouncedResize) _this.debouncedResize.cancel();\n      _this.debouncedResize = debounce(50, function () {\n        return _this.resizeWindow(setTrackStyle);\n      });\n      _this.debouncedResize();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"resizeWindow\", function () {\n      var setTrackStyle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var isTrackMounted = Boolean(_this.track && _this.track.node);\n      // prevent warning: setting state on unmounted component (server side rendering)\n      if (!isTrackMounted) return;\n      var spec = _objectSpread(_objectSpread({\n        listRef: _this.list,\n        trackRef: _this.track\n      }, _this.props), _this.state);\n      _this.updateState(spec, setTrackStyle, function () {\n        if (_this.props.autoplay) _this.autoPlay(\"update\");else _this.pause(\"paused\");\n      });\n      // animating state should be cleared while resizing, otherwise autoplay stops working\n      _this.setState({\n        animating: false\n      });\n      clearTimeout(_this.animationEndCallback);\n      delete _this.animationEndCallback;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"updateState\", function (spec, setTrackStyle, callback) {\n      var updatedState = initializedState(spec);\n      spec = _objectSpread(_objectSpread(_objectSpread({}, spec), updatedState), {}, {\n        slideIndex: updatedState.currentSlide\n      });\n      var targetLeft = getTrackLeft(spec);\n      spec = _objectSpread(_objectSpread({}, spec), {}, {\n        left: targetLeft\n      });\n      var trackStyle = getTrackCSS(spec);\n      if (setTrackStyle || React.Children.count(_this.props.children) !== React.Children.count(spec.children)) {\n        updatedState[\"trackStyle\"] = trackStyle;\n      }\n      _this.setState(updatedState, callback);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"ssrInit\", function () {\n      if (_this.props.variableWidth) {\n        var _trackWidth = 0,\n          _trackLeft = 0;\n        var childrenWidths = [];\n        var preClones = getPreClones(_objectSpread(_objectSpread(_objectSpread({}, _this.props), _this.state), {}, {\n          slideCount: _this.props.children.length\n        }));\n        var postClones = getPostClones(_objectSpread(_objectSpread(_objectSpread({}, _this.props), _this.state), {}, {\n          slideCount: _this.props.children.length\n        }));\n        _this.props.children.forEach(function (child) {\n          childrenWidths.push(child.props.style.width);\n          _trackWidth += child.props.style.width;\n        });\n        for (var i = 0; i < preClones; i++) {\n          _trackLeft += childrenWidths[childrenWidths.length - 1 - i];\n          _trackWidth += childrenWidths[childrenWidths.length - 1 - i];\n        }\n        for (var _i = 0; _i < postClones; _i++) {\n          _trackWidth += childrenWidths[_i];\n        }\n        for (var _i2 = 0; _i2 < _this.state.currentSlide; _i2++) {\n          _trackLeft += childrenWidths[_i2];\n        }\n        var _trackStyle = {\n          width: _trackWidth + \"px\",\n          left: -_trackLeft + \"px\"\n        };\n        if (_this.props.centerMode) {\n          var currentWidth = \"\".concat(childrenWidths[_this.state.currentSlide], \"px\");\n          _trackStyle.left = \"calc(\".concat(_trackStyle.left, \" + (100% - \").concat(currentWidth, \") / 2 ) \");\n        }\n        return {\n          trackStyle: _trackStyle\n        };\n      }\n      var childrenCount = React.Children.count(_this.props.children);\n      var spec = _objectSpread(_objectSpread(_objectSpread({}, _this.props), _this.state), {}, {\n        slideCount: childrenCount\n      });\n      var slideCount = getPreClones(spec) + getPostClones(spec) + childrenCount;\n      var trackWidth = 100 / _this.props.slidesToShow * slideCount;\n      var slideWidth = 100 / slideCount;\n      var trackLeft = -slideWidth * (getPreClones(spec) + _this.state.currentSlide) * trackWidth / 100;\n      if (_this.props.centerMode) {\n        trackLeft += (100 - slideWidth * trackWidth / 100) / 2;\n      }\n      var trackStyle = {\n        width: trackWidth + \"%\",\n        left: trackLeft + \"%\"\n      };\n      return {\n        slideWidth: slideWidth + \"%\",\n        trackStyle: trackStyle\n      };\n    });\n    _defineProperty(_assertThisInitialized(_this), \"checkImagesLoad\", function () {\n      var images = _this.list && _this.list.querySelectorAll && _this.list.querySelectorAll(\".slick-slide img\") || [];\n      var imagesCount = images.length,\n        loadedCount = 0;\n      Array.prototype.forEach.call(images, function (image) {\n        var handler = function handler() {\n          return ++loadedCount && loadedCount >= imagesCount && _this.onWindowResized();\n        };\n        if (!image.onclick) {\n          image.onclick = function () {\n            return image.parentNode.focus();\n          };\n        } else {\n          var prevClickHandler = image.onclick;\n          image.onclick = function (e) {\n            prevClickHandler(e);\n            image.parentNode.focus();\n          };\n        }\n        if (!image.onload) {\n          if (_this.props.lazyLoad) {\n            image.onload = function () {\n              _this.adaptHeight();\n              _this.callbackTimers.push(setTimeout(_this.onWindowResized, _this.props.speed));\n            };\n          } else {\n            image.onload = handler;\n            image.onerror = function () {\n              handler();\n              _this.props.onLazyLoadError && _this.props.onLazyLoadError();\n            };\n          }\n        }\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"progressiveLazyLoad\", function () {\n      var slidesToLoad = [];\n      var spec = _objectSpread(_objectSpread({}, _this.props), _this.state);\n      for (var index = _this.state.currentSlide; index < _this.state.slideCount + getPostClones(spec); index++) {\n        if (_this.state.lazyLoadedList.indexOf(index) < 0) {\n          slidesToLoad.push(index);\n          break;\n        }\n      }\n      for (var _index = _this.state.currentSlide - 1; _index >= -getPreClones(spec); _index--) {\n        if (_this.state.lazyLoadedList.indexOf(_index) < 0) {\n          slidesToLoad.push(_index);\n          break;\n        }\n      }\n      if (slidesToLoad.length > 0) {\n        _this.setState(function (state) {\n          return {\n            lazyLoadedList: state.lazyLoadedList.concat(slidesToLoad)\n          };\n        });\n        if (_this.props.onLazyLoad) {\n          _this.props.onLazyLoad(slidesToLoad);\n        }\n      } else {\n        if (_this.lazyLoadTimer) {\n          clearInterval(_this.lazyLoadTimer);\n          delete _this.lazyLoadTimer;\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"slideHandler\", function (index) {\n      var dontAnimate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var _this$props = _this.props,\n        asNavFor = _this$props.asNavFor,\n        beforeChange = _this$props.beforeChange,\n        onLazyLoad = _this$props.onLazyLoad,\n        speed = _this$props.speed,\n        afterChange = _this$props.afterChange;\n      // capture currentslide before state is updated\n      var currentSlide = _this.state.currentSlide;\n      var _slideHandler = slideHandler(_objectSpread(_objectSpread(_objectSpread({\n          index: index\n        }, _this.props), _this.state), {}, {\n          trackRef: _this.track,\n          useCSS: _this.props.useCSS && !dontAnimate\n        })),\n        state = _slideHandler.state,\n        nextState = _slideHandler.nextState;\n      if (!state) return;\n      beforeChange && beforeChange(currentSlide, state.currentSlide);\n      var slidesToLoad = state.lazyLoadedList.filter(function (value) {\n        return _this.state.lazyLoadedList.indexOf(value) < 0;\n      });\n      onLazyLoad && slidesToLoad.length > 0 && onLazyLoad(slidesToLoad);\n      if (!_this.props.waitForAnimate && _this.animationEndCallback) {\n        clearTimeout(_this.animationEndCallback);\n        afterChange && afterChange(currentSlide);\n        delete _this.animationEndCallback;\n      }\n      _this.setState(state, function () {\n        // asNavForIndex check is to avoid recursive calls of slideHandler in waitForAnimate=false mode\n        if (asNavFor && _this.asNavForIndex !== index) {\n          _this.asNavForIndex = index;\n          asNavFor.innerSlider.slideHandler(index);\n        }\n        if (!nextState) return;\n        _this.animationEndCallback = setTimeout(function () {\n          var animating = nextState.animating,\n            firstBatch = _objectWithoutProperties(nextState, _excluded);\n          _this.setState(firstBatch, function () {\n            _this.callbackTimers.push(setTimeout(function () {\n              return _this.setState({\n                animating: animating\n              });\n            }, 10));\n            afterChange && afterChange(state.currentSlide);\n            delete _this.animationEndCallback;\n          });\n        }, speed);\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"changeSlide\", function (options) {\n      var dontAnimate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var spec = _objectSpread(_objectSpread({}, _this.props), _this.state);\n      var targetSlide = changeSlide(spec, options);\n      if (targetSlide !== 0 && !targetSlide) return;\n      if (dontAnimate === true) {\n        _this.slideHandler(targetSlide, dontAnimate);\n      } else {\n        _this.slideHandler(targetSlide);\n      }\n      _this.props.autoplay && _this.autoPlay(\"update\");\n      if (_this.props.focusOnSelect) {\n        var nodes = _this.list.querySelectorAll(\".slick-current\");\n        nodes[0] && nodes[0].focus();\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"clickHandler\", function (e) {\n      if (_this.clickable === false) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      _this.clickable = true;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"keyHandler\", function (e) {\n      var dir = keyHandler(e, _this.props.accessibility, _this.props.rtl);\n      dir !== \"\" && _this.changeSlide({\n        message: dir\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"selectHandler\", function (options) {\n      _this.changeSlide(options);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"disableBodyScroll\", function () {\n      var preventDefault = function preventDefault(e) {\n        e = e || window.event;\n        if (e.preventDefault) e.preventDefault();\n        e.returnValue = false;\n      };\n      window.ontouchmove = preventDefault;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"enableBodyScroll\", function () {\n      window.ontouchmove = null;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"swipeStart\", function (e) {\n      if (_this.props.verticalSwiping) {\n        _this.disableBodyScroll();\n      }\n      var state = swipeStart(e, _this.props.swipe, _this.props.draggable);\n      state !== \"\" && _this.setState(state);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"swipeMove\", function (e) {\n      var state = swipeMove(e, _objectSpread(_objectSpread(_objectSpread({}, _this.props), _this.state), {}, {\n        trackRef: _this.track,\n        listRef: _this.list,\n        slideIndex: _this.state.currentSlide\n      }));\n      if (!state) return;\n      if (state[\"swiping\"]) {\n        _this.clickable = false;\n      }\n      _this.setState(state);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"swipeEnd\", function (e) {\n      var state = swipeEnd(e, _objectSpread(_objectSpread(_objectSpread({}, _this.props), _this.state), {}, {\n        trackRef: _this.track,\n        listRef: _this.list,\n        slideIndex: _this.state.currentSlide\n      }));\n      if (!state) return;\n      var triggerSlideHandler = state[\"triggerSlideHandler\"];\n      delete state[\"triggerSlideHandler\"];\n      _this.setState(state);\n      if (triggerSlideHandler === undefined) return;\n      _this.slideHandler(triggerSlideHandler);\n      if (_this.props.verticalSwiping) {\n        _this.enableBodyScroll();\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"touchEnd\", function (e) {\n      _this.swipeEnd(e);\n      _this.clickable = true;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"slickPrev\", function () {\n      // this and fellow methods are wrapped in setTimeout\n      // to make sure initialize setState has happened before\n      // any of such methods are called\n      _this.callbackTimers.push(setTimeout(function () {\n        return _this.changeSlide({\n          message: \"previous\"\n        });\n      }, 0));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"slickNext\", function () {\n      _this.callbackTimers.push(setTimeout(function () {\n        return _this.changeSlide({\n          message: \"next\"\n        });\n      }, 0));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"slickGoTo\", function (slide) {\n      var dontAnimate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      slide = Number(slide);\n      if (isNaN(slide)) return \"\";\n      _this.callbackTimers.push(setTimeout(function () {\n        return _this.changeSlide({\n          message: \"index\",\n          index: slide,\n          currentSlide: _this.state.currentSlide\n        }, dontAnimate);\n      }, 0));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"play\", function () {\n      var nextIndex;\n      if (_this.props.rtl) {\n        nextIndex = _this.state.currentSlide - _this.props.slidesToScroll;\n      } else {\n        if (canGoNext(_objectSpread(_objectSpread({}, _this.props), _this.state))) {\n          nextIndex = _this.state.currentSlide + _this.props.slidesToScroll;\n        } else {\n          return false;\n        }\n      }\n      _this.slideHandler(nextIndex);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"autoPlay\", function (playType) {\n      if (_this.autoplayTimer) {\n        clearInterval(_this.autoplayTimer);\n      }\n      var autoplaying = _this.state.autoplaying;\n      if (playType === \"update\") {\n        if (autoplaying === \"hovered\" || autoplaying === \"focused\" || autoplaying === \"paused\") {\n          return;\n        }\n      } else if (playType === \"leave\") {\n        if (autoplaying === \"paused\" || autoplaying === \"focused\") {\n          return;\n        }\n      } else if (playType === \"blur\") {\n        if (autoplaying === \"paused\" || autoplaying === \"hovered\") {\n          return;\n        }\n      }\n      _this.autoplayTimer = setInterval(_this.play, _this.props.autoplaySpeed + 50);\n      _this.setState({\n        autoplaying: \"playing\"\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"pause\", function (pauseType) {\n      if (_this.autoplayTimer) {\n        clearInterval(_this.autoplayTimer);\n        _this.autoplayTimer = null;\n      }\n      var autoplaying = _this.state.autoplaying;\n      if (pauseType === \"paused\") {\n        _this.setState({\n          autoplaying: \"paused\"\n        });\n      } else if (pauseType === \"focused\") {\n        if (autoplaying === \"hovered\" || autoplaying === \"playing\") {\n          _this.setState({\n            autoplaying: \"focused\"\n          });\n        }\n      } else {\n        // pauseType  is 'hovered'\n        if (autoplaying === \"playing\") {\n          _this.setState({\n            autoplaying: \"hovered\"\n          });\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onDotsOver\", function () {\n      return _this.props.autoplay && _this.pause(\"hovered\");\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onDotsLeave\", function () {\n      return _this.props.autoplay && _this.state.autoplaying === \"hovered\" && _this.autoPlay(\"leave\");\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onTrackOver\", function () {\n      return _this.props.autoplay && _this.pause(\"hovered\");\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onTrackLeave\", function () {\n      return _this.props.autoplay && _this.state.autoplaying === \"hovered\" && _this.autoPlay(\"leave\");\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onSlideFocus\", function () {\n      return _this.props.autoplay && _this.pause(\"focused\");\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onSlideBlur\", function () {\n      return _this.props.autoplay && _this.state.autoplaying === \"focused\" && _this.autoPlay(\"blur\");\n    });\n    _defineProperty(_assertThisInitialized(_this), \"render\", function () {\n      var className = classnames(\"slick-slider\", _this.props.className, {\n        \"slick-vertical\": _this.props.vertical,\n        \"slick-initialized\": true\n      });\n      var spec = _objectSpread(_objectSpread({}, _this.props), _this.state);\n      var trackProps = extractObject(spec, [\"fade\", \"cssEase\", \"speed\", \"infinite\", \"centerMode\", \"focusOnSelect\", \"currentSlide\", \"lazyLoad\", \"lazyLoadedList\", \"rtl\", \"slideWidth\", \"slideHeight\", \"listHeight\", \"vertical\", \"slidesToShow\", \"slidesToScroll\", \"slideCount\", \"trackStyle\", \"variableWidth\", \"unslick\", \"centerPadding\", \"targetSlide\", \"useCSS\"]);\n      var pauseOnHover = _this.props.pauseOnHover;\n      trackProps = _objectSpread(_objectSpread({}, trackProps), {}, {\n        onMouseEnter: pauseOnHover ? _this.onTrackOver : null,\n        onMouseLeave: pauseOnHover ? _this.onTrackLeave : null,\n        onMouseOver: pauseOnHover ? _this.onTrackOver : null,\n        focusOnSelect: _this.props.focusOnSelect && _this.clickable ? _this.selectHandler : null\n      });\n      var dots;\n      if (_this.props.dots === true && _this.state.slideCount >= _this.props.slidesToShow) {\n        var dotProps = extractObject(spec, [\"dotsClass\", \"slideCount\", \"slidesToShow\", \"currentSlide\", \"slidesToScroll\", \"clickHandler\", \"children\", \"customPaging\", \"infinite\", \"appendDots\"]);\n        var pauseOnDotsHover = _this.props.pauseOnDotsHover;\n        dotProps = _objectSpread(_objectSpread({}, dotProps), {}, {\n          clickHandler: _this.changeSlide,\n          onMouseEnter: pauseOnDotsHover ? _this.onDotsLeave : null,\n          onMouseOver: pauseOnDotsHover ? _this.onDotsOver : null,\n          onMouseLeave: pauseOnDotsHover ? _this.onDotsLeave : null\n        });\n        dots = /*#__PURE__*/React.createElement(Dots, dotProps);\n      }\n      var prevArrow, nextArrow;\n      var arrowProps = extractObject(spec, [\"infinite\", \"centerMode\", \"currentSlide\", \"slideCount\", \"slidesToShow\", \"prevArrow\", \"nextArrow\"]);\n      arrowProps.clickHandler = _this.changeSlide;\n      if (_this.props.arrows) {\n        prevArrow = /*#__PURE__*/React.createElement(PrevArrow, arrowProps);\n        nextArrow = /*#__PURE__*/React.createElement(NextArrow, arrowProps);\n      }\n      var verticalHeightStyle = null;\n      if (_this.props.vertical) {\n        verticalHeightStyle = {\n          height: _this.state.listHeight\n        };\n      }\n      var centerPaddingStyle = null;\n      if (_this.props.vertical === false) {\n        if (_this.props.centerMode === true) {\n          centerPaddingStyle = {\n            padding: \"0px \" + _this.props.centerPadding\n          };\n        }\n      } else {\n        if (_this.props.centerMode === true) {\n          centerPaddingStyle = {\n            padding: _this.props.centerPadding + \" 0px\"\n          };\n        }\n      }\n      var listStyle = _objectSpread(_objectSpread({}, verticalHeightStyle), centerPaddingStyle);\n      var touchMove = _this.props.touchMove;\n      var listProps = {\n        className: \"slick-list\",\n        style: listStyle,\n        onClick: _this.clickHandler,\n        onMouseDown: touchMove ? _this.swipeStart : null,\n        onMouseMove: _this.state.dragging && touchMove ? _this.swipeMove : null,\n        onMouseUp: touchMove ? _this.swipeEnd : null,\n        onMouseLeave: _this.state.dragging && touchMove ? _this.swipeEnd : null,\n        onTouchStart: touchMove ? _this.swipeStart : null,\n        onTouchMove: _this.state.dragging && touchMove ? _this.swipeMove : null,\n        onTouchEnd: touchMove ? _this.touchEnd : null,\n        onTouchCancel: _this.state.dragging && touchMove ? _this.swipeEnd : null,\n        onKeyDown: _this.props.accessibility ? _this.keyHandler : null\n      };\n      var innerSliderProps = {\n        className: className,\n        dir: \"ltr\",\n        style: _this.props.style\n      };\n      if (_this.props.unslick) {\n        listProps = {\n          className: \"slick-list\"\n        };\n        innerSliderProps = {\n          className: className\n        };\n      }\n      return /*#__PURE__*/React.createElement(\"div\", innerSliderProps, !_this.props.unslick ? prevArrow : \"\", /*#__PURE__*/React.createElement(\"div\", _extends({\n        ref: _this.listRefHandler\n      }, listProps), /*#__PURE__*/React.createElement(Track, _extends({\n        ref: _this.trackRefHandler\n      }, trackProps), _this.props.children)), !_this.props.unslick ? nextArrow : \"\", !_this.props.unslick ? dots : \"\");\n    });\n    _this.list = null;\n    _this.track = null;\n    _this.state = _objectSpread(_objectSpread({}, initialState), {}, {\n      currentSlide: _this.props.initialSlide,\n      slideCount: React.Children.count(_this.props.children)\n    });\n    _this.callbackTimers = [];\n    _this.clickable = true;\n    _this.debouncedResize = null;\n    var ssrState = _this.ssrInit();\n    _this.state = _objectSpread(_objectSpread({}, _this.state), ssrState);\n    return _this;\n  }\n  _createClass(InnerSlider, [{\n    key: \"didPropsChange\",\n    value: function didPropsChange(prevProps) {\n      var setTrackStyle = false;\n      for (var _i3 = 0, _Object$keys = Object.keys(this.props); _i3 < _Object$keys.length; _i3++) {\n        var key = _Object$keys[_i3];\n        // eslint-disable-next-line no-prototype-builtins\n        if (!prevProps.hasOwnProperty(key)) {\n          setTrackStyle = true;\n          break;\n        }\n        if (_typeof(prevProps[key]) === \"object\" || typeof prevProps[key] === \"function\") {\n          continue;\n        }\n        if (prevProps[key] !== this.props[key]) {\n          setTrackStyle = true;\n          break;\n        }\n      }\n      return setTrackStyle || React.Children.count(this.props.children) !== React.Children.count(prevProps.children);\n    }\n  }]);\n  return InnerSlider;\n}(React.Component);","import React from \"react\";\nvar defaultProps = {\n  accessibility: true,\n  adaptiveHeight: false,\n  afterChange: null,\n  appendDots: function appendDots(dots) {\n    return /*#__PURE__*/React.createElement(\"ul\", {\n      style: {\n        display: \"block\"\n      }\n    }, dots);\n  },\n  arrows: true,\n  autoplay: false,\n  autoplaySpeed: 3000,\n  beforeChange: null,\n  centerMode: false,\n  centerPadding: \"50px\",\n  className: \"\",\n  cssEase: \"ease\",\n  customPaging: function customPaging(i) {\n    return /*#__PURE__*/React.createElement(\"button\", null, i + 1);\n  },\n  dots: false,\n  dotsClass: \"slick-dots\",\n  draggable: true,\n  easing: \"linear\",\n  edgeFriction: 0.35,\n  fade: false,\n  focusOnSelect: false,\n  infinite: true,\n  initialSlide: 0,\n  lazyLoad: null,\n  nextArrow: null,\n  onEdge: null,\n  onInit: null,\n  onLazyLoadError: null,\n  onReInit: null,\n  pauseOnDotsHover: false,\n  pauseOnFocus: false,\n  pauseOnHover: true,\n  prevArrow: null,\n  responsive: null,\n  rows: 1,\n  rtl: false,\n  slide: \"div\",\n  slidesPerRow: 1,\n  slidesToScroll: 1,\n  slidesToShow: 1,\n  speed: 500,\n  swipe: true,\n  swipeEvent: null,\n  swipeToSlide: false,\n  touchMove: true,\n  touchThreshold: 5,\n  useCSS: true,\n  useTransform: true,\n  variableWidth: false,\n  vertical: false,\n  waitForAnimate: true\n};\nexport default defaultProps;","import Slider from \"./slider\";\nexport default Slider;","\"use strict\";\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nimport { InnerSlider } from \"./inner-slider\";\nimport json2mq from \"json2mq\";\nimport defaultProps from \"./default-props\";\nimport { canUseDOM } from \"./utils/innerSliderUtils\";\nvar Slider = /*#__PURE__*/function (_React$Component) {\n  _inherits(Slider, _React$Component);\n  var _super = _createSuper(Slider);\n  function Slider(props) {\n    var _this;\n    _classCallCheck(this, Slider);\n    _this = _super.call(this, props);\n    _defineProperty(_assertThisInitialized(_this), \"innerSliderRefHandler\", function (ref) {\n      return _this.innerSlider = ref;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"slickPrev\", function () {\n      return _this.innerSlider.slickPrev();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"slickNext\", function () {\n      return _this.innerSlider.slickNext();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"slickGoTo\", function (slide) {\n      var dontAnimate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return _this.innerSlider.slickGoTo(slide, dontAnimate);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"slickPause\", function () {\n      return _this.innerSlider.pause(\"paused\");\n    });\n    _defineProperty(_assertThisInitialized(_this), \"slickPlay\", function () {\n      return _this.innerSlider.autoPlay(\"play\");\n    });\n    _this.state = {\n      breakpoint: null\n    };\n    _this._responsiveMediaHandlers = [];\n    return _this;\n  }\n  _createClass(Slider, [{\n    key: \"media\",\n    value: function media(query, handler) {\n      // javascript handler for  css media query\n      var mql = window.matchMedia(query);\n      var listener = function listener(_ref) {\n        var matches = _ref.matches;\n        if (matches) {\n          handler();\n        }\n      };\n      mql.addListener(listener);\n      listener(mql);\n      this._responsiveMediaHandlers.push({\n        mql: mql,\n        query: query,\n        listener: listener\n      });\n    }\n\n    // handles responsive breakpoints\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      // performance monitoring\n      //if (process.env.NODE_ENV !== 'production') {\n      //const { whyDidYouUpdate } = require('why-did-you-update')\n      //whyDidYouUpdate(React)\n      //}\n      if (this.props.responsive) {\n        var breakpoints = this.props.responsive.map(function (breakpt) {\n          return breakpt.breakpoint;\n        });\n        // sort them in increasing order of their numerical value\n        breakpoints.sort(function (x, y) {\n          return x - y;\n        });\n        breakpoints.forEach(function (breakpoint, index) {\n          // media query for each breakpoint\n          var bQuery;\n          if (index === 0) {\n            bQuery = json2mq({\n              minWidth: 0,\n              maxWidth: breakpoint\n            });\n          } else {\n            bQuery = json2mq({\n              minWidth: breakpoints[index - 1] + 1,\n              maxWidth: breakpoint\n            });\n          }\n          // when not using server side rendering\n          canUseDOM() && _this2.media(bQuery, function () {\n            _this2.setState({\n              breakpoint: breakpoint\n            });\n          });\n        });\n\n        // Register media query for full screen. Need to support resize from small to large\n        // convert javascript object to media query string\n        var query = json2mq({\n          minWidth: breakpoints.slice(-1)[0]\n        });\n        canUseDOM() && this.media(query, function () {\n          _this2.setState({\n            breakpoint: null\n          });\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._responsiveMediaHandlers.forEach(function (obj) {\n        obj.mql.removeListener(obj.listener);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var settings;\n      var newProps;\n      if (this.state.breakpoint) {\n        newProps = this.props.responsive.filter(function (resp) {\n          return resp.breakpoint === _this3.state.breakpoint;\n        });\n        settings = newProps[0].settings === \"unslick\" ? \"unslick\" : _objectSpread(_objectSpread(_objectSpread({}, defaultProps), this.props), newProps[0].settings);\n      } else {\n        settings = _objectSpread(_objectSpread({}, defaultProps), this.props);\n      }\n\n      // force scrolling by one if centerMode is on\n      if (settings.centerMode) {\n        if (settings.slidesToScroll > 1 && process.env.NODE_ENV !== \"production\") {\n          console.warn(\"slidesToScroll should be equal to 1 in centerMode, you are using \".concat(settings.slidesToScroll));\n        }\n        settings.slidesToScroll = 1;\n      }\n      // force showing one slide and scrolling by one if the fade mode is on\n      if (settings.fade) {\n        if (settings.slidesToShow > 1 && process.env.NODE_ENV !== \"production\") {\n          console.warn(\"slidesToShow should be equal to 1 when fade is true, you're using \".concat(settings.slidesToShow));\n        }\n        if (settings.slidesToScroll > 1 && process.env.NODE_ENV !== \"production\") {\n          console.warn(\"slidesToScroll should be equal to 1 when fade is true, you're using \".concat(settings.slidesToScroll));\n        }\n        settings.slidesToShow = 1;\n        settings.slidesToScroll = 1;\n      }\n\n      // makes sure that children is an array, even when there is only 1 child\n      var children = React.Children.toArray(this.props.children);\n\n      // Children may contain false or null, so we should filter them\n      // children may also contain string filled with spaces (in certain cases where we use jsx strings)\n      children = children.filter(function (child) {\n        if (typeof child === \"string\") {\n          return !!child.trim();\n        }\n        return !!child;\n      });\n\n      // rows and slidesPerRow logic is handled here\n      if (settings.variableWidth && (settings.rows > 1 || settings.slidesPerRow > 1)) {\n        console.warn(\"variableWidth is not supported in case of rows > 1 or slidesPerRow > 1\");\n        settings.variableWidth = false;\n      }\n      var newChildren = [];\n      var currentWidth = null;\n      for (var i = 0; i < children.length; i += settings.rows * settings.slidesPerRow) {\n        var newSlide = [];\n        for (var j = i; j < i + settings.rows * settings.slidesPerRow; j += settings.slidesPerRow) {\n          var row = [];\n          for (var k = j; k < j + settings.slidesPerRow; k += 1) {\n            if (settings.variableWidth && children[k].props.style) {\n              currentWidth = children[k].props.style.width;\n            }\n            if (k >= children.length) break;\n            row.push( /*#__PURE__*/React.cloneElement(children[k], {\n              key: 100 * i + 10 * j + k,\n              tabIndex: -1,\n              style: {\n                width: \"\".concat(100 / settings.slidesPerRow, \"%\"),\n                display: \"inline-block\"\n              }\n            }));\n          }\n          newSlide.push( /*#__PURE__*/React.createElement(\"div\", {\n            key: 10 * i + j\n          }, row));\n        }\n        if (settings.variableWidth) {\n          newChildren.push( /*#__PURE__*/React.createElement(\"div\", {\n            key: i,\n            style: {\n              width: currentWidth\n            }\n          }, newSlide));\n        } else {\n          newChildren.push( /*#__PURE__*/React.createElement(\"div\", {\n            key: i\n          }, newSlide));\n        }\n      }\n      if (settings === \"unslick\") {\n        var className = \"regular slider \" + (this.props.className || \"\");\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: className\n        }, children);\n      } else if (newChildren.length <= settings.slidesToShow) {\n        settings.unslick = true;\n      }\n      return /*#__PURE__*/React.createElement(InnerSlider, _extends({\n        style: this.props.style,\n        ref: this.innerSliderRefHandler\n      }, settings), newChildren);\n    }\n  }]);\n  return Slider;\n}(React.Component);\nexport { Slider as default };","import { genComponentStyleHook, mergeToken } from '../../theme/internal';\nimport { resetComponent } from '../../style';\nconst genCarouselStyle = token => {\n  const {\n    componentCls,\n    antCls,\n    carouselArrowSize,\n    carouselDotOffset,\n    marginXXS\n  } = token;\n  const arrowOffset = -carouselArrowSize * 1.25;\n  const carouselDotMargin = marginXXS;\n  return {\n    [componentCls]: Object.assign(Object.assign({}, resetComponent(token)), {\n      '.slick-slider': {\n        position: 'relative',\n        display: 'block',\n        boxSizing: 'border-box',\n        touchAction: 'pan-y',\n        WebkitTouchCallout: 'none',\n        WebkitTapHighlightColor: 'transparent',\n        '.slick-track, .slick-list': {\n          transform: 'translate3d(0, 0, 0)',\n          touchAction: 'pan-y'\n        }\n      },\n      '.slick-list': {\n        position: 'relative',\n        display: 'block',\n        margin: 0,\n        padding: 0,\n        overflow: 'hidden',\n        '&:focus': {\n          outline: 'none'\n        },\n        '&.dragging': {\n          cursor: 'pointer'\n        },\n        '.slick-slide': {\n          pointerEvents: 'none',\n          // https://github.com/ant-design/ant-design/issues/23294\n          [`input${antCls}-radio-input, input${antCls}-checkbox-input`]: {\n            visibility: 'hidden'\n          },\n          '&.slick-active': {\n            pointerEvents: 'auto',\n            [`input${antCls}-radio-input, input${antCls}-checkbox-input`]: {\n              visibility: 'visible'\n            }\n          },\n          // fix Carousel content height not match parent node\n          // when children is empty node\n          // https://github.com/ant-design/ant-design/issues/25878\n          '> div > div': {\n            verticalAlign: 'bottom'\n          }\n        }\n      },\n      '.slick-track': {\n        position: 'relative',\n        top: 0,\n        insetInlineStart: 0,\n        display: 'block',\n        '&::before, &::after': {\n          display: 'table',\n          content: '\"\"'\n        },\n        '&::after': {\n          clear: 'both'\n        }\n      },\n      '.slick-slide': {\n        display: 'none',\n        float: 'left',\n        height: '100%',\n        minHeight: 1,\n        img: {\n          display: 'block'\n        },\n        '&.dragging img': {\n          pointerEvents: 'none'\n        }\n      },\n      '.slick-initialized .slick-slide': {\n        display: 'block'\n      },\n      '.slick-vertical .slick-slide': {\n        display: 'block',\n        height: 'auto'\n      },\n      '.slick-arrow.slick-hidden': {\n        display: 'none'\n      },\n      // Arrows\n      '.slick-prev, .slick-next': {\n        position: 'absolute',\n        top: '50%',\n        display: 'block',\n        width: carouselArrowSize,\n        height: carouselArrowSize,\n        marginTop: -carouselArrowSize / 2,\n        padding: 0,\n        color: 'transparent',\n        fontSize: 0,\n        lineHeight: 0,\n        background: 'transparent',\n        border: 0,\n        outline: 'none',\n        cursor: 'pointer',\n        '&:hover, &:focus': {\n          color: 'transparent',\n          background: 'transparent',\n          outline: 'none',\n          '&::before': {\n            opacity: 1\n          }\n        },\n        '&.slick-disabled::before': {\n          opacity: 0.25\n        }\n      },\n      '.slick-prev': {\n        insetInlineStart: arrowOffset,\n        '&::before': {\n          content: '\"←\"'\n        }\n      },\n      '.slick-next': {\n        insetInlineEnd: arrowOffset,\n        '&::before': {\n          content: '\"→\"'\n        }\n      },\n      // Dots\n      '.slick-dots': {\n        position: 'absolute',\n        insetInlineEnd: 0,\n        bottom: 0,\n        insetInlineStart: 0,\n        zIndex: 15,\n        display: 'flex !important',\n        justifyContent: 'center',\n        paddingInlineStart: 0,\n        listStyle: 'none',\n        '&-bottom': {\n          bottom: carouselDotOffset\n        },\n        '&-top': {\n          top: carouselDotOffset,\n          bottom: 'auto'\n        },\n        li: {\n          position: 'relative',\n          display: 'inline-block',\n          flex: '0 1 auto',\n          boxSizing: 'content-box',\n          width: token.dotWidth,\n          height: token.dotHeight,\n          marginInline: carouselDotMargin,\n          padding: 0,\n          textAlign: 'center',\n          textIndent: -999,\n          verticalAlign: 'top',\n          transition: `all ${token.motionDurationSlow}`,\n          button: {\n            position: 'relative',\n            display: 'block',\n            width: '100%',\n            height: token.dotHeight,\n            padding: 0,\n            color: 'transparent',\n            fontSize: 0,\n            background: token.colorBgContainer,\n            border: 0,\n            borderRadius: 1,\n            outline: 'none',\n            cursor: 'pointer',\n            opacity: 0.3,\n            transition: `all ${token.motionDurationSlow}`,\n            '&: hover, &:focus': {\n              opacity: 0.75\n            },\n            '&::after': {\n              position: 'absolute',\n              inset: -carouselDotMargin,\n              content: '\"\"'\n            }\n          },\n          '&.slick-active': {\n            width: token.dotWidthActive,\n            '& button': {\n              background: token.colorBgContainer,\n              opacity: 1\n            },\n            '&: hover, &:focus': {\n              opacity: 1\n            }\n          }\n        }\n      }\n    })\n  };\n};\nconst genCarouselVerticalStyle = token => {\n  const {\n    componentCls,\n    carouselDotOffset,\n    marginXXS\n  } = token;\n  const reverseSizeOfDot = {\n    width: token.dotHeight,\n    height: token.dotWidth\n  };\n  return {\n    [`${componentCls}-vertical`]: {\n      '.slick-dots': {\n        top: '50%',\n        bottom: 'auto',\n        flexDirection: 'column',\n        width: token.dotHeight,\n        height: 'auto',\n        margin: 0,\n        transform: 'translateY(-50%)',\n        '&-left': {\n          insetInlineEnd: 'auto',\n          insetInlineStart: carouselDotOffset\n        },\n        '&-right': {\n          insetInlineEnd: carouselDotOffset,\n          insetInlineStart: 'auto'\n        },\n        li: Object.assign(Object.assign({}, reverseSizeOfDot), {\n          margin: `${marginXXS}px 0`,\n          verticalAlign: 'baseline',\n          button: reverseSizeOfDot,\n          '&.slick-active': Object.assign(Object.assign({}, reverseSizeOfDot), {\n            button: reverseSizeOfDot\n          })\n        })\n      }\n    }\n  };\n};\nconst genCarouselRtlStyle = token => {\n  const {\n    componentCls\n  } = token;\n  return [{\n    [`${componentCls}-rtl`]: {\n      direction: 'rtl',\n      // Dots\n      '.slick-dots': {\n        [`${componentCls}-rtl&`]: {\n          flexDirection: 'row-reverse'\n        }\n      }\n    }\n  }, {\n    [`${componentCls}-vertical`]: {\n      '.slick-dots': {\n        [`${componentCls}-rtl&`]: {\n          flexDirection: 'column'\n        }\n      }\n    }\n  }];\n};\n// ============================== Export ==============================\nexport default genComponentStyleHook('Carousel', token => {\n  const {\n    controlHeightLG,\n    controlHeightSM\n  } = token;\n  const carouselToken = mergeToken(token, {\n    carouselArrowSize: controlHeightLG / 2,\n    carouselDotOffset: controlHeightSM / 2\n  });\n  return [genCarouselStyle(carouselToken), genCarouselVerticalStyle(carouselToken), genCarouselRtlStyle(carouselToken)];\n}, {\n  dotWidth: 16,\n  dotHeight: 3,\n  dotWidthActive: 24\n});","var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport SlickCarousel from '@ant-design/react-slick';\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nimport useStyle from './style';\nconst Carousel = /*#__PURE__*/React.forwardRef((_a, ref) => {\n  var {\n      dots = true,\n      arrows = false,\n      draggable = false,\n      waitForAnimate = false,\n      dotPosition = 'bottom',\n      vertical = dotPosition === 'left' || dotPosition === 'right',\n      rootClassName\n    } = _a,\n    props = __rest(_a, [\"dots\", \"arrows\", \"draggable\", \"waitForAnimate\", \"dotPosition\", \"vertical\", \"rootClassName\"]);\n  const {\n    getPrefixCls,\n    direction\n  } = React.useContext(ConfigContext);\n  const slickRef = React.useRef();\n  const goTo = function (slide) {\n    let dontAnimate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    slickRef.current.slickGoTo(slide, dontAnimate);\n  };\n  React.useImperativeHandle(ref, () => ({\n    goTo,\n    autoPlay: slickRef.current.innerSlider.autoPlay,\n    innerSlider: slickRef.current.innerSlider,\n    prev: slickRef.current.slickPrev,\n    next: slickRef.current.slickNext\n  }), [slickRef.current]);\n  const prevCount = React.useRef(React.Children.count(props.children));\n  React.useEffect(() => {\n    if (prevCount.current !== React.Children.count(props.children)) {\n      goTo(props.initialSlide || 0, false);\n      prevCount.current = React.Children.count(props.children);\n    }\n  }, [props.children]);\n  const newProps = Object.assign({\n    vertical\n  }, props);\n  if (newProps.effect === 'fade') {\n    newProps.fade = true;\n  }\n  const prefixCls = getPrefixCls('carousel', newProps.prefixCls);\n  const dotsClass = 'slick-dots';\n  const enableDots = !!dots;\n  const dsClass = classNames(dotsClass, `${dotsClass}-${dotPosition}`, typeof dots === 'boolean' ? false : dots === null || dots === void 0 ? void 0 : dots.className);\n  const [wrapSSR, hashId] = useStyle(prefixCls);\n  const className = classNames(prefixCls, {\n    [`${prefixCls}-rtl`]: direction === 'rtl',\n    [`${prefixCls}-vertical`]: newProps.vertical\n  }, hashId, rootClassName);\n  return wrapSSR( /*#__PURE__*/React.createElement(\"div\", {\n    className: className\n  }, /*#__PURE__*/React.createElement(SlickCarousel, Object.assign({\n    ref: slickRef\n  }, newProps, {\n    dots: enableDots,\n    dotsClass: dsClass,\n    arrows: arrows,\n    draggable: draggable,\n    waitForAnimate: waitForAnimate\n  }))));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Carousel.displayName = 'Carousel';\n}\nexport default Carousel;","export default __webpack_public_path__ + \"static/media/tea_cerem_direct.c01e52a9.png\";","export default __webpack_public_path__ + \"static/media/tea_cerem_indirect.e97fe36c.png\";","export default __webpack_public_path__ + \"static/media/tea_cerem_specular.ee8a6252.png\";","export default __webpack_public_path__ + \"static/media/tea_cerem_caustic.6faa5135.png\";","export default __webpack_public_path__ + \"static/media/tea_cerem_2048.11221379.png\";","export default __webpack_public_path__ + \"static/media/csg_completed_brighter-crop.e82d1802.png\";","export default __webpack_public_path__ + \"static/media/csg-breakdown.b6a5f2ae.png\";","export default __webpack_public_path__ + \"static/media/t-value-operations.7807e0fb.png\";","export default __webpack_public_path__ + \"static/media/csg-fsm.946e6d04.png\";","export default __webpack_public_path__ + \"static/media/cone.38746363.png\";","export default __webpack_public_path__ + \"static/media/cylinder.18c99440.png\";","export default __webpack_public_path__ + \"static/media/ellipse.d93c8a4c.png\";","export default __webpack_public_path__ + \"static/media/hyperbolic-cylinder.527cf768.png\";","export default __webpack_public_path__ + \"static/media/hyperbolic-paraboloid.38d735fa.png\";","export default __webpack_public_path__ + \"static/media/hyperboloid-one-sheet.79fbe970.png\";","export default __webpack_public_path__ + \"static/media/hyperboloid-two-sheet.d6c35a40.png\";","export default __webpack_public_path__ + \"static/media/parabolic.8f25dfea.png\";","export default __webpack_public_path__ + \"static/media/face_normals.6a21c261.png\";","export default __webpack_public_path__ + \"static/media/vertex_normals.8dca3580.png\";","export default __webpack_public_path__ + \"static/media/bv_overlay.74bfc584.png\";","export default __webpack_public_path__ + \"static/media/lambertian_diffuse.6a9b187d.png\";","export default __webpack_public_path__ + \"static/media/phong.45d41657.png\";","export default __webpack_public_path__ + \"static/media/mirrors-1-bounce.8a084335.png\";","export default __webpack_public_path__ + \"static/media/mirrors-3-bounces.492aba58.png\";","export default __webpack_public_path__ + \"static/media/mirrors-5-bounces.0d820de0.png\";","export default __webpack_public_path__ + \"static/media/mirrors-8-bounces.99cce737.png\";","export default __webpack_public_path__ + \"static/media/dielectric-no-fresnel-1.0f.9a341186.png\";","export default __webpack_public_path__ + \"static/media/dielectric-no-fresnel-1.3f.17426a60.png\";","export default __webpack_public_path__ + \"static/media/dielectric-no-fresnel-1.5f.885ef166.png\";","export default __webpack_public_path__ + \"static/media/dielectric-no-fresnel-1.7f.73fecb2f.png\";","export default __webpack_public_path__ + \"static/media/dielectric-no-fresnel-2.5f.ea0ad815.png\";","export default __webpack_public_path__ + \"static/media/dielectric-fresnel-fresnel.3496ac2c.png\";","export default __webpack_public_path__ + \"static/media/dielectric-fresnel-schlick.f9d199fc.png\";","export default __webpack_public_path__ + \"static/media/brighter-1-sample-crop.d5c3a473.png\";","export default __webpack_public_path__ + \"static/media/brighter-5-samples-crop.926be256.png\";","export default __webpack_public_path__ + \"static/media/brighter-10-samples-crop.c99a3bb5.png\";","export default __webpack_public_path__ + \"static/media/brighter-25-samples-crop.29f6697b.png\";","export default __webpack_public_path__ + \"static/media/brighter-50-samples-crop.595b33fd.png\";","export default __webpack_public_path__ + \"static/media/brighter-100-samples-crop.92193104.png\";","export default __webpack_public_path__ + \"static/media/brighter-200-samples-crop.c47a45d4.png\";","export default __webpack_public_path__ + \"static/media/5xSSAA-crop.239ff7d5.png\";","export default __webpack_public_path__ + \"static/media/10xSSAA-crop.e213c53c.png\";","export default __webpack_public_path__ + \"static/media/25xSSAA-crop.10db6fa6.png\";","export default __webpack_public_path__ + \"static/media/50xSSAA-crop.2d119612.png\";","export default __webpack_public_path__ + \"static/media/cornell-wi.ff42ffb1.png\";","export default __webpack_public_path__ + \"static/media/cornell-pm.c088335c.png\";","export default __webpack_public_path__ + \"static/media/global_photon_map_visualisation.7755718c.png\";","export default __webpack_public_path__ + \"static/media/caustic_photon_map_visualisation.ccc6dab6.png\";","export default __webpack_public_path__ + \"static/media/cornell-wi-512.bf6e06e3.png\";","export default __webpack_public_path__ + \"static/media/indirect_illum_1035313n.d2a4bcc5.png\";","export default __webpack_public_path__ + \"static/media/specular_glossy.6660754b.png\";","export default __webpack_public_path__ + \"static/media/caustics_filter_1024162.8dc08234.png\";","export default __webpack_public_path__ + \"static/media/cornell-pm-512.bd2026d1.png\";","import React from 'react';\r\nimport { HashLink } from 'react-router-hash-link';\r\nimport { Row, Col, Divider, Image, Carousel, Grid } from 'antd';\r\nimport SyntaxHighlighter from 'react-syntax-highlighter';\r\nimport { dracula } from 'react-syntax-highlighter/dist/esm/styles/hljs';\r\n\r\nimport f_img_direct from '../../content/projects/RayTracer/tea_cerem_direct.png'\r\nimport f_img_indirect from '../../content/projects/RayTracer/tea_cerem_indirect.png'\r\nimport f_img_specular from '../../content/projects/RayTracer/tea_cerem_specular.png'\r\nimport f_img_caustic from '../../content/projects/RayTracer/tea_cerem_caustic.png'\r\nimport f_img from '../../content/projects/RayTracer/tea_cerem_2048.png'\r\n\r\nimport csg_completed from '../../content/projects/RayTracer/csg/csg_completed_brighter-crop.png'\r\nimport csg_breakdown from '../../content/projects/RayTracer/csg/csg-breakdown.png'\r\nimport csg_t_values from '../../content/projects/RayTracer/csg/t-value-operations.png'\r\nimport csg_fsm from '../../content/projects/RayTracer/csg/csg-fsm.png'\r\n\r\nimport quad_cone from '../../content/projects/RayTracer/quadratics/cone.png'\r\nimport quad_cylinder from '../../content/projects/RayTracer/quadratics/cylinder.png'\r\nimport quad_ellipse from '../../content/projects/RayTracer/quadratics/ellipse.png'\r\nimport quad_hyp_cylinder from '../../content/projects/RayTracer/quadratics/hyperbolic-cylinder.png'\r\nimport quad_hyp_paraboloid from '../../content/projects/RayTracer/quadratics/hyperbolic-paraboloid.png'\r\nimport quad_hyp_one_sheet from '../../content/projects/RayTracer/quadratics/hyperboloid-one-sheet.png'\r\nimport quad_hyp_two_sheet from '../../content/projects/RayTracer/quadratics/hyperboloid-two-sheet.png'\r\nimport quad_paraboloid from '../../content/projects/RayTracer/quadratics/parabolic.png'\r\n\r\nimport face_normals from '../../content/projects/RayTracer/normals/face_normals.png'\r\nimport vertex_normals from '../../content/projects/RayTracer/normals/vertex_normals.png'\r\n\r\nimport bounding_overlay from '../../content/projects/RayTracer/bounding/bv_overlay.png'\r\n\r\nimport lambertian from '../../content/projects/RayTracer/materials/lambertian_diffuse.png'\r\nimport phong from '../../content/projects/RayTracer/materials/phong.png'\r\n\r\nimport mirror_bounce_1 from '../../content/projects/RayTracer/mirrors/mirrors-1-bounce.png'\r\nimport mirror_bounce_3 from '../../content/projects/RayTracer/mirrors/mirrors-3-bounces.png'\r\nimport mirror_bounce_5 from '../../content/projects/RayTracer/mirrors/mirrors-5-bounces.png'\r\nimport mirror_bounce_8 from '../../content/projects/RayTracer/mirrors/mirrors-8-bounces.png'\r\n\r\nimport dielectric_refract_1_0 from '../../content/projects/RayTracer/dielectrics/dielectric-no-fresnel-1.0f.png'\r\nimport dielectric_refract_1_3 from '../../content/projects/RayTracer/dielectrics/dielectric-no-fresnel-1.3f.png'\r\nimport dielectric_refract_1_5 from '../../content/projects/RayTracer/dielectrics/dielectric-no-fresnel-1.5f.png'\r\nimport dielectric_refract_1_7 from '../../content/projects/RayTracer/dielectrics/dielectric-no-fresnel-1.7f.png'\r\nimport dielectric_refract_2_5 from '../../content/projects/RayTracer/dielectrics/dielectric-no-fresnel-2.5f.png'\r\nimport dielectric_fresnel_f from '../../content/projects/RayTracer/dielectrics/dielectric-fresnel-fresnel.png'\r\nimport dielectric_fresnel_s from '../../content/projects/RayTracer/dielectrics/dielectric-fresnel-schlick.png'\r\n\r\nimport shadows_1 from '../../content/projects/RayTracer/shadows/brighter-1-sample-crop.png'\r\nimport shadows_5 from '../../content/projects/RayTracer/shadows/brighter-5-samples-crop.png'\r\nimport shadows_10 from '../../content/projects/RayTracer/shadows/brighter-10-samples-crop.png'\r\nimport shadows_25 from '../../content/projects/RayTracer/shadows/brighter-25-samples-crop.png'\r\nimport shadows_50 from '../../content/projects/RayTracer/shadows/brighter-50-samples-crop.png'\r\nimport shadows_100 from '../../content/projects/RayTracer/shadows/brighter-100-samples-crop.png'\r\nimport shadows_200 from '../../content/projects/RayTracer/shadows/brighter-200-samples-crop.png'\r\n\r\nimport ssaa_0 from '../../content/projects/RayTracer/ssaa/0xSSAA-crop.png'\r\nimport ssaa_5 from '../../content/projects/RayTracer/ssaa/5xSSAA-crop.png'\r\nimport ssaa_10 from '../../content/projects/RayTracer/ssaa/10xSSAA-crop.png'\r\nimport ssaa_25 from '../../content/projects/RayTracer/ssaa/25xSSAA-crop.png'\r\nimport ssaa_50 from '../../content/projects/RayTracer/ssaa/50xSSAA-crop.png'\r\n\r\nimport photon_map_direct from '../../content/projects/RayTracer/photonmap/cornell-wi.png'\r\nimport photon_map_global from '../../content/projects/RayTracer/photonmap/cornell-pm.png'\r\nimport photon_map_global_vis from '../../content/projects/RayTracer/photonmap/global_photon_map_visualisation.png'\r\nimport photon_map_caustic_vis from '../../content/projects/RayTracer/photonmap/caustic_photon_map_visualisation.png'\r\n\r\nimport c_img_direct from '../../content/projects/RayTracer/photonmap/cornell-wi-512.png'\r\nimport c_img_indirect from '../../content/projects/RayTracer/photonmap/indirect_illum_1035313n.png'\r\nimport c_img_specular from '../../content/projects/RayTracer/photonmap/specular_glossy.png'\r\nimport c_img_caustic from '../../content/projects/RayTracer/photonmap/caustics_filter_1024162.png'\r\nimport c_img from '../../content/projects/RayTracer/photonmap/cornell-pm-512.png'\r\n\r\nimport plane_intersection_code from '../../content/projects/RayTracer/code_snippets/plane_intersection'\r\nimport sphere_intersection_code from '../../content/projects/RayTracer/code_snippets/sphere_intersection'\r\nimport cuboid_intersection_code from '../../content/projects/RayTracer/code_snippets/cuboid_intersection'\r\nimport triangle_intersection_code from '../../content/projects/RayTracer/code_snippets/triangle_intersection'\r\n\r\nimport hemisphere_scatter_code from '../../content/projects/RayTracer/code_snippets/hemisphere_scatter'\r\n\r\nimport 'katex/dist/katex.min.css'\r\nimport Latex from 'react-latex-next';\r\n\r\nimport Meta from '.';\r\nimport ProjectPage from '../projectPage';\r\nimport AnnotatedImage from '../annotatedImage';\r\n\r\nconst { useBreakpoint } = Grid;\r\n\r\nconst Home = () => {\r\n    const screens = useBreakpoint();\r\n\r\n    return (\r\n    \r\n        <ProjectPage title={Meta.title} thumb={Meta.thumb} githubURL=\"https://github.com/Skittss/RayTracer\">\r\n            <h1 id=\"overview\" className=\"raleway-title\">\r\n                Overview\r\n            </h1>\r\n            <Carousel autoplay autoplaySpeed={5000} effect=\"fade\" style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"1000px\"}}>\r\n                <AnnotatedImage preview={false} src={f_img} annotation={\"Example render with global illumination\"}/>\r\n                <AnnotatedImage preview={false} src={f_img_direct} annotation={\"Stage 1: Direct illumination\"}/>\r\n                <AnnotatedImage preview={false} src={f_img_indirect} annotation={\"Stage 2: Indirect illumination (diffuse)\"} />\r\n                <AnnotatedImage preview={false} src={f_img_specular} annotation={\"Stage 3: Specular and Glossy\"} />\r\n                <AnnotatedImage preview={false} src={f_img_caustic} annotation={\"Stage 4: Indirect illumination (caustics)\"} />\r\n            </Carousel>\r\n            <p>\r\n                In this project, I delve into the powerful realm of ray tracing — a groundbreaking light transport technique \r\n                that has reshaped the landscape of computer graphics. As technology advances, so does the demand for more realistic and immersive visual experiences in various applications such as gaming and animation. \r\n                Ray tracing has emerged as a game-changer, enabling us to simulate the intricate behavior of light, resulting in visually stunning and physically accurate renders.\r\n                <br/><br/>\r\n                This post is not entirely designed as a zero-knowledge read, and instead is probably best utilised as supplementary material when   \r\n                you have the basic concepts of 3D rendering and raytracing pinned down. I recommend two great reads if you don't feel comfortable jumping in \r\n                here: <a target=\"_blank\" href=\"https://www.scratchapixel.com/index.html\">Scratchapixel</a> and <a target=\"_blank\" href=\"https://raytracing.github.io/books/RayTracingInOneWeekend.html\">Ray Tracing in One Weekend</a> which\r\n                go into more detail than I do, albeit with a slightly different focus (no photon-mapping for example).\r\n\r\n                <br /><br />\r\n                Code snippets in this post are abbreviated for brevity. The full source code for this renderer is available on <a target=\"_blank\" href=\"https://github.com/Skittss/RayTracer\">GitHub</a>.\r\n            </p>\r\n            <br />\r\n            <Divider style={{borderTopWidth: \"1px\", borderTopColor: \"#000000\", opacity: 0.5}}/>\r\n            <h1 id=\"int-raycast\" className=\"raleway-title\">\r\n                Rendering Objects by Casting Rays\r\n            </h1>\r\n            <p>\r\n                Consider a 3D scene. At its simplest, we have lights, objects, and a virtual camera. How do we generate an image of the objects, given\r\n                the lights, from the viewpoint of the camera? In games and alike, perspective projection is used to map each object onto the image plane of the\r\n                camera as the intrinsic properties of the camera are known, as well as the geometric information of all objects. This has the benefit of being\r\n                fast to run, but in doing so we ommit detail. For example, it might not be immediately obvious how we produce shadows using projection. Or a bigger challenge - \r\n                how would we render a mirror, or transparent objects such as glass? Rendering these phenomena is an inherit challenge with projection-based rendering, and\r\n                thus sets the stage for raytracing. Raytracing is a light transport technique; it accurately simulates how light in the scene interacts with objects and eventually makes its\r\n                way to a virtual camera, producing an image. The simulation of the light itself allows for physically accurate renders to be produced, contrary to projection-based rendering\r\n                which employs auxilliary techniques to mimic physical phenomena.\r\n                <br/><br />\r\n                Light travels in straight lines. This makes rays an appropriate data structure to keep track of how light travels throughout a scene.\r\n                Rays are vectors in 3D space, defined by an origin point <Latex>{`$O$`}</Latex> and direction <Latex>{`$D$`}</Latex>. From this, we can identify every point that falls upon\r\n                the ray with a line defined by a 'distance' parameter <Latex>{`$t$`}</Latex>:\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {`$R=O+Dt$`}\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                In other words, we can find any point along the line by starting at the origin of the ray, and traversing <Latex>{`$t$`}</Latex> distance\r\n                along the line in the direction of the ray.\r\n                <br /><br />\r\n                But how do we render objects using rays? The basic idea is to cast a ray for each pixel in your target image, and find where each ray intersects an object\r\n                in the scene. We calculate the lighting and the intersection point, which determines the pixel colour. Repeating this process for each pixel gives us the final\r\n                render. From this brief description, it should be apparent why raytracing on GPUs has been a recent topic of interest - the process is <i>extremely</i> parallelisable,\r\n                allowing GPU acceleration to push render times into realtime.\r\n            </p>\r\n            <br />\r\n            <h1 id=\"core-concept\" className=\"raleway-title\">\r\n                An Overview of Lighting Calculations\r\n            </h1>\r\n            <p>\r\n                How do we calculate lighting at intersection points? This process is variable depending on the specific raytracing technique used,\r\n                but in general, we calculate a <i>Bidirectional Reflectance Distribution Function</i> (BRDF) at each intersection. This function defines\r\n                the characteristics of an objects material. At its most basic, this is colour, but may also incorporate other properties such as specular highlight approximations (e.g. in Phong materials).\r\n                This function can be defined in any way you see fit, and may not necessarily be physically accurate.\r\n                <br /><br />\r\n                The BRDF is defined as <Latex>{`$f_r(\\\\textbf x, \\\\omega_i, \\\\omega_r)$`}</Latex>, a function of the intersection point <Latex>{`$\\\\textbf x$`}</Latex> in local coordinate space of the object,\r\n                incident light direction <Latex>{`$\\\\omega_i$`}</Latex>, and reflected light direction <Latex>{`$\\\\omega_r$`}</Latex>.\r\n                Typically, <Latex>{`$\\\\omega_r$`}</Latex> is simply <Latex>{`$-D$`}</Latex>, i.e. the vector from the intersection point towards the camera, and <Latex>{`$\\\\omega_i$`}</Latex> can \r\n                be calculated by assuming light has come from a light in the scene, i.e. <Latex>{`$\\\\textbf x - O_\\\\text{light}$`}</Latex>.\r\n            </p>\r\n            <br />\r\n            <h2 id=\"ray-shadow\" className=\"raleway-title\">\r\n                Basic Shadows\r\n            </h2>\r\n            <p>\r\n                The BRDF alone does not paint the full picture of rendering as we still need a way of incorporating shadows. The simplest way of computing hard regions of shadow is to cast a secondary ray at the intersection \r\n                point <Latex>{`$\\\\textbf x$`}</Latex> towards lights, and only calculate the BRDF if the light is not occluded (i.e. there is no intersection between the ray and an object).\r\n                <br /><br />\r\n                This simple approach works well for direct illumination (where we do not simulate light bouncing), but is not applicable to other parts of global illumination, which we will visit next.\r\n                Further down the line we will additionally look at a method to render soft shadows, as this simple approach can only render strict shadow boundaries.\r\n            </p>\r\n            <br />\r\n            <h2 id=\"global-illum\" className=\"raleway-title\">\r\n                Global Illumination\r\n            </h2>\r\n            <p>\r\n                The main benefit of raytacing is that we can simulate many light bounces and BRDF interactions from each ray cast, aggregating them to produce a final colour.\r\n                These light bounces might not come directly from a light therefore. This is called <b>global illumination</b>. We consider light from all sources, including that which has been indirectly bounced\r\n                around the scene. We need extra algorithms and data structures to support this kind of bouncing however, so at its simplest we can not allow bouncing, giving only <b>direct illumination</b>.\r\n            </p>\r\n            <br />\r\n            <h3 id=\"rendering-eq\" className=\"raleway-title\">\r\n                The Rendering Equation\r\n            </h3>            \r\n            <p>\r\n                The rendering equation, introduced by James T. Kajiya, mathematically formalises the calculation of lighting, or 'reflected radiance'. \r\n                I find it beneficial to keep this equation in mind, as it exactly defines what calculations we should do at each intersection and can make organising\r\n                code a lot easier.\r\n                <br /><br />\r\n                The rendering equation is defined as\r\n            </p>\r\n            <p>\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {`$L_r(\\\\textbf{x}, \\\\omega_i, \\\\omega_r) =\r\n                        L_e + \\\\displaystyle\\\\int_\\\\Omega f_r(\\\\textbf{x}, \\\\omega_i, \\\\omega_r) L_i(\\\\textbf{x}, \\\\omega_i)(\\\\omega_i \\\\cdot \\\\textbf n)\\\\ d\\\\omega_i $`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n            </p>\r\n            <p>\r\n                where <Latex>{`$L_r(\\\\textbf{x}, \\\\omega_i, \\\\omega_r)$`}</Latex> denotes the reflected radiance along a\r\n                direction <Latex>{`$\\\\omega_r$`}</Latex> at a point in the scene <Latex>{`$\\\\textbf x$`}</Latex>. In other words, if <Latex>{`$\\\\omega_r$`}</Latex> is the direction\r\n                from <Latex>{`$\\\\textbf x$`}</Latex> to a camera pixel, this is the amount of light we gather at that pixel, i.e. the rendered colour. <Latex>{`$L_e$`}</Latex> denotes\r\n                any light directly emitted from the object at <Latex>{`$\\\\textbf x$`}</Latex>, and serves mostly to support rendering materials that emit light\r\n                and other visible light sources (e.g. an area light).\r\n                <br /><br />\r\n                The integral component states that at point <Latex>{`$\\\\textbf x$`}</Latex>, we gather all the incident radiance from all possible incident directions (<Latex>{`$\\\\omega_i$`}</Latex>) in a\r\n                hemisphere above <Latex>{`$\\\\textbf x$`}</Latex> (<Latex>{`$\\\\Omega$`}</Latex>). We multiply each incident ray by the BRDF <Latex>{`$f_r$`}</Latex> for its given direction to determine how much of the incident\r\n                light is reflected along <Latex>{`$\\\\omega_r$`}</Latex> - thus giving reflected radiance. \r\n                We also apply Lambert's cosine law via <Latex>{`$(\\\\omega_i \\\\cdot x)$`}</Latex>.\r\n                <br /><br />\r\n                The method by which this integral is approximated depends on the specific lighting implementation we are wishing to achieve.\r\n                We are able to fit global illumination models and direct-illumination models (roughly) under this definition. For example, the basic\r\n                direct-illumination ray tracing model can be described as approximating the integral by taking <Latex>{`$\\\\Omega$`}</Latex> as the set of directions to visible\r\n                lights from <Latex>{`$\\\\textbf x$`}</Latex>. Monte Carlo Ray Tracing makes use of Monte Carlo techniques to approximate the integral with a large number of\r\n                importance sampled <Latex>{`$\\\\omega_i $`}</Latex> rays. And in similar fashion, photon mapping uses light bounce caching via the photon map to provide an estimate of <Latex>{`$L_i$`}</Latex> for all\r\n                directions <Latex>{`$\\\\omega_i \\\\in \\\\Omega$`}</Latex>.\r\n            </p>\r\n            <br />\r\n            <Divider style={{borderTopWidth: \"1px\", borderTopColor: \"#000000\", opacity: 0.5}}/>\r\n            <h1 id=\"int-test\" className=\"raleway-title\">\r\n                Geometry - Intersection Testing\r\n            </h1>\r\n            <p>\r\n                We now know that to render an individual pixel, we cast a ray for it, and determine which object in the scene it has hit. We then\r\n                calculate lighting at that point, resulting in a colour for the pixel. In order to determine which object has been hit, we can begin by naively\r\n                checking every object in the scene for intersection, and choose the one which was closest to the camera. It is worth noting that this is a particularly\r\n                slow approach (especially when scenes have many objects), so we will consider acceleration structures to speed this process up later in this section.\r\n                <br /><br />\r\n                The remainder of this section outlines how to calculate intersection points for a number of useful primitives: triangles (used in meshes), flat planes (and curved quadratic variants), spheres, and cuboids.\r\n                The goal is to find the t-value for a given ray which intersects the primitive. We also need to calculate surface normals at intersection points in order to calculate lighting.\r\n                Additionally, we will explore constructive solid geometry, which allows us to combine these basic primitives into more complex objects via boolean operations.\r\n            </p>\r\n            <br />\r\n            <h2 id=\"int-plane\" className=\"raleway-title\">\r\n                Planes\r\n            </h2>\r\n            <p>\r\n                We can determine if a ray intersects a given plane by noting that the vector from the plane center to any point on the plane will be perpendicular to the plane normal. i.e.\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {\r\n                            `$(p - O_p)\\\\cdot n = 0$`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                From this, we can determine if a ray intersects the plane by observing that if they indeed intersect, then there will be a common point between them, i.e. substitute <Latex>{`$p$`}</Latex> for the ray equation:\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {\r\n                            `$((O_r + Dt) - O_p)\\\\cdot n = 0$`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {\r\n                            `$\\\\implies Dt\\\\cdot n + (O_r - O_p) \\\\cdot n = 0$`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {\r\n                            `$\\\\implies t = \\\\displaystyle\\\\frac{(O_p - O_r)\\\\cdot n}{D \\\\cdot n} $`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                Thus we have found the point of intersection (if it exists).\r\n                <br /><br />\r\n                We are not quite done however. If we were only to calculate this t-value with no other considerations, we would not be able to give the plane specific dimensions (width and height).\r\n                As it stands, any the plane will have infinite width and height. We can add width and height into the intersection calculation by considering an alternative vector definition of a 3D plane:\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {\r\n                            `$p=O_p + u\\\\lambda + v\\\\mu$`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                By ensuring that <Latex>{`$\\\\lambda$`}</Latex> and <Latex>{`$\\\\mu$`}</Latex> are perpendicular along the plane (i.e. they form an orthonormal basis with the plane normal), we can \r\n                easily cull intersections which fall outside a certain distance in each direction. This allows us to give the plane a width and height, instead of it being infinite.\r\n                It is easy to calculate this orthonormal basis: We provide an up vector (normal) and right vector (tangent) and can calculate the bitangent by taking the cross product of them.\r\n                <br /><br />\r\n                An implementation of this intersection calculation is shown in the code snippet below.\r\n            </p>\r\n            <div className=\"code-snippet\" style={{width: \"100%\"}}>\r\n                <SyntaxHighlighter \r\n                    language=\"cpp\" \r\n                    showLineNumbers={true}\r\n                    style={dracula}\r\n                    startingLineNumber={0}\r\n                >\r\n                    {plane_intersection_code}\r\n                </SyntaxHighlighter>\r\n            </div>\r\n            <p>\r\n                Finally, the surface normal at an intersection point is constant, and provided with the definition of the plane.\r\n            </p>\r\n            <br />\r\n            <h2 id=\"int-triangle\" className=\"raleway-title\">\r\n                Triangles\r\n            </h2>\r\n            <p>\r\n                Triangles are perhaps the most important primitive to be able to render. By rendering triangles, we can render arbitrary triangle meshes which are ubiquitous in computer graphics.\r\n                Throughout this post, this can be seen with the Utah Teapot - all renders of it were made using a triangle mesh loaded from a .obj file. \r\n                <br /><br />\r\n                Triangle intersection is well explored and well optimised. In this implementation the standard 'Moller Trumbore' algorithm is used to calculate the intersection.\r\n                The core idea behind this algorithm is to use Barycentric Coordinates to calculate a potential intersection point. Barycentric coordinates express points as a linear combination of vertex positions.\r\n                in this case, we define a potential intersection point as a linear combination of the triangles 3 vertices:\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {\r\n                            `$p=(1-u-v)v_1 + uv_2 + vv_3$`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                A valid intersection point is one with valid with valid coefficients for <Latex>{`$v_1, v_2, v_3$`}</Latex>, i.e. <Latex>{`$u + v = 1$`}</Latex>. \r\n                The algorithm calculates these coefficients for the potential intersection point, and rejects any intersections where the above property does not hold.\r\n                <br /><br />\r\n                A C++ implementation is shown below.\r\n            </p>\r\n            <div className=\"code-snippet\" style={{width: \"100%\"}}>\r\n                <SyntaxHighlighter \r\n                    language=\"cpp\" \r\n                    showLineNumbers={true}\r\n                    style={dracula}\r\n                    startingLineNumber={0}\r\n                >\r\n                    {triangle_intersection_code}\r\n                </SyntaxHighlighter>\r\n            </div>\r\n            <p>\r\n                The surface normal for a triangle is a constant, and can be calculated via the cross product like in a plane. However, usually we load these normals from a file\r\n                when dealing with triangular meshes. This makes our job easier, but we also must consider the implication of using a single normal for an entire triangle.\r\n                <br /><br />\r\n                In a large mesh, triangles are usually an approximation of the true geometric form we wish to capture. If we could easily and efficiently render arbitrary continuous surfaces, we would.\r\n                When using a single surface normal for a whole triangle, this approximation becomes more apparent. For smooth surfaces, it would be beneficial if we could change the surface normal of a triangle\r\n                depending on where it is hit. Thus we could mimic smoother lighting on a low-poly surface without giving up lots of performance by using many more triangles.\r\n                <br /><br />\r\n                Per-vertex normals solve this problem. Using the barycentric coordinates generated from the moller-trumbore algorithm (<Latex>{`$u$`}</Latex> and <Latex>{`$v$`}</Latex>), we can\r\n                interpolate between vertex normals, giving a smooth looking surface with only a few triangles. Vertex normals may be provided within the mesh file, but they can also be computed manually by averaging the face normals of neighbouring faces otherwise. In a triangle mesh, we consider three adjacent faces for each triangle.\r\n            </p>\r\n            <Carousel autoplay autoplaySpeed={3000} effect=\"fade\" style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"512px\"}}>\r\n                <AnnotatedImage preview={false} src={face_normals} annotation={\"Triangular mesh rendered with face normals.\"}/>\r\n                <AnnotatedImage preview={false} src={vertex_normals} annotation={\"Triangular mesh rendered with vertex normals and interpolation.\"}/>\r\n            </Carousel>\r\n            <br />\r\n            <h2 id=\"int-sphere\" className=\"raleway-title\">\r\n                Spheres\r\n            </h2>\r\n            <p>\r\n                Calculating the intersection of a sphere is simple, and is derrived from its cartesian definition:\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {\r\n                            `$x^2+y^2+z^2=R^2$`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                Thus we can implicitly define a point on the surface of the sphere as\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {\r\n                            `$p^2-R^2=0$`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                Similarly to the intersection for a plane; if there is an intersection, there will be a common point between the sphere and the ray equation.\r\n                Therefore substituting <Latex>{`$p=O + Dt$`}</Latex>:\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {\r\n                            `$(O + Dt)^2-R^2=0$`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {\r\n                            `$\\\\implies D^2t^2 + 2ODt + O^2 - R^2=0$`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                gives a quadratic equation for <Latex>{`$t$`}</Latex> which can be solved via the general quadratic formula where <Latex>{`$a=D^2,\\\\ b=2OD,\\\\ c=O^2-R^2$`}</Latex>.\r\n                <br /><br />\r\n                This intersection calculation, with variable center point for the sphere <Latex>{`$O_s$`}</Latex> is implemented as below.\r\n            </p>\r\n            <div className=\"code-snippet\" style={{width: \"100%\"}}>\r\n                <SyntaxHighlighter \r\n                    language=\"cpp\" \r\n                    showLineNumbers={true}\r\n                    style={dracula}\r\n                    startingLineNumber={0}\r\n                >\r\n                    {sphere_intersection_code}\r\n                </SyntaxHighlighter>\r\n            </div>\r\n            <p>\r\n                Additionally, we need the surface normal on the sphere at the point of intersection. This is simply the vector from the sphere center to the intersection point, normalised:\r\n            </p>\r\n            <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                <Latex>\r\n                    {\r\n                        `$\\\\textbf n = (p - O_s) / R$`\r\n                    }\r\n                </Latex>\r\n            </div>\r\n            <br />\r\n            <h2 id=\"int-cuboid\" className=\"raleway-title\">\r\n                Cuboids\r\n            </h2>\r\n            <p>\r\n                To implement cuboid intersection, the <i>Axis-aligned bounding box</i> (AABB) algorithm can be used. By default, the algorithm works on a box centered at the origin\r\n                and aligned with the 3 primary axes, but we are able to position it anywhere in 3D space by defining a local coordinate system. We define a local position a local orthonormal basis (set of axes) aligned with the edges of the cuboid. We then  \r\n                convert the ray position and direction into this local coordinate space before doing the AABB calculation. In this local coordinate space, the cuboid is centered at the origin and aligned with the primary axes,\r\n                so AABB can now be used.\r\n                <br /><br />\r\n                The idea behind the AABB intersection algorithm is that we can easily define 6 straight lines with the minimum and maximum extents of each primary axis, which in turn correspond with each edge of the cuboid.\r\n                E.g. <Latex>{`$x=\\\\min_x, y=\\\\min_y, z=\\\\min_z$`}</Latex> and similarly for the maximum bounds. We can perform a simple substitution with the ray equation in the targetted axis to calculate the t-value for each one, for example in <Latex>{`$x$`}</Latex>:\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {\r\n                            `$O_x+D_xt=\\\\min_x$`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {\r\n                            `$\\\\implies O_x+D_xt=\\\\displaystyle\\\\frac{\\\\min_x - O_x}{D_x}$`\r\n                        }\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                Finally, we check if the t-value of each intersection falls within the bounds of the cuboid (as the lines extend in each axis indefinitely), and note that in order to have a valid \r\n                box intersection, we need valid intersection pair from different primary axes. In other words, we have an intersection only when the ray enters the cuboid from one face, and exits through another.\r\n                <br /><br />\r\n                An optimised implementation of the above is shown below.\r\n            </p>\r\n            <div className=\"code-snippet\" style={{width: \"100%\"}}>\r\n                <SyntaxHighlighter \r\n                    language=\"cpp\" \r\n                    showLineNumbers={true}\r\n                    style={dracula}\r\n                    startingLineNumber={0}\r\n                >\r\n                    {cuboid_intersection_code}\r\n                </SyntaxHighlighter>\r\n            </div>\r\n            <p>\r\n                To get the surface normal of an intersection in AABB, we can simply index from a predefined table depending on the position of the intersection point (i.e. which minimum bound it lays on).\r\n                In local coordinate space, there are 6 fixed surface normals:\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>{`$\\\\begin{pmatrix}1\\\\\\\\ 0 \\\\\\\\ 0\\\\end{pmatrix},$`}</Latex>\r\n                    <Latex>{`$\\\\begin{pmatrix}-1\\\\\\\\ 0 \\\\\\\\ 0\\\\end{pmatrix},$`}</Latex>\r\n                    <Latex>{`$\\\\begin{pmatrix}0\\\\\\\\ 1 \\\\\\\\ 0\\\\end{pmatrix},$`}</Latex>\r\n                    <Latex>{`$\\\\begin{pmatrix}0\\\\\\\\ -1 \\\\\\\\ 0\\\\end{pmatrix},$`}</Latex>\r\n                    <Latex>{`$\\\\begin{pmatrix}0\\\\\\\\ 0 \\\\\\\\ 1\\\\end{pmatrix},$`}</Latex>\r\n                    <Latex>{`$\\\\begin{pmatrix}0\\\\\\\\ 0 \\\\\\\\ -1\\\\end{pmatrix}$`}</Latex>\r\n                </div>\r\n                <br />\r\n                which are then transformed into global coordinate space by performing the inverse of the global to local coordinate calculation performed earlier.\r\n            </p>\r\n            <br />\r\n            <h2 id=\"int-quadratic\" className=\"raleway-title\">\r\n                Quadratic Surfaces\r\n            </h2>\r\n            <p>\r\n                Quadratic surfaces are characterised by second degree polynomials. They are very similar to ubiquitous second-degree polynomials\r\n                in <Latex>{`$\\\\R^2$`}</Latex> which are undoubtedly familiar: <Latex>{`$y=x^2$`}</Latex> (parabola), <Latex>{`$x^2 + y^2 = r$`}</Latex> (circle), etc. \r\n                It would be more appropriate to call these unique cases (formally, normal forms) of the general quadratic equation. \r\n                Quadratic surfaces are the same concept but applied to <Latex>{`$\\\\R^3$`}</Latex> defined by the following:\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {`$Ax^2 + By^2 + Cz^2 + Dxy + Eyz + Fxz + Gx + Hy + Iz + J = 0$`}\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                The ray-intersection calculation is handled no differently than for any other implicit surface, and the specific t-values can be\r\n                calculated using the quadratic equation after performing the substitution <Latex>{`$\\\\begin{pmatrix} x & y & z\\\\end{pmatrix} = O + Dt$`}</Latex>  on\r\n                the above equation where <Latex>{`$O$`}</Latex> and <Latex>{`$D$`}</Latex> are the ray origin and direction respectively. This results in a system of equations for t which can\r\n                be solved via matrix calculations.\r\n                <br/><br/>\r\n                The only remaining task is calculating the surface normals, which is again no different than\r\n                for any other continuous implicit surface; the partial derivative of the quadratic surface equation in <Latex>{`$x$`}</Latex>, <Latex>{`$y$`}</Latex> and <Latex>{`$z$`}</Latex>. \r\n                Below are the different normal form quadratic surfaces capable of being created via the above equation.\r\n                <br /><br />\r\n                <Carousel autoplay autoplaySpeed={3000} effect=\"fade\" style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"600px\"}}>\r\n                    <AnnotatedImage src={quad_ellipse} annotation={<>Ellipse <Latex>{`$(C=0.5)$`}</Latex></>} />\r\n                    <AnnotatedImage src={quad_cone} annotation={<>Cone <Latex>{`$(B=-1,\\\\ J=0)$`}</Latex></>} />\r\n                    <AnnotatedImage src={quad_cylinder} annotation={<>Cylinder <Latex>{`$(B=0)$`}</Latex></>} />\r\n                    <AnnotatedImage src={quad_paraboloid} annotation={<>Paraboloid <Latex>{`$(B,J=0,\\\\ H=-1)$`}</Latex></>} />\r\n                    <AnnotatedImage src={quad_hyp_one_sheet} annotation={<>Hyperboloid of 1 sheet <Latex>{`$(B=-1)$`}</Latex></>} />\r\n                    <AnnotatedImage src={quad_hyp_two_sheet} annotation={<>Hyperboloid of 2 sheets <Latex>{`$(B=-1,\\\\ J=1)$`}</Latex></>} />\r\n                    <AnnotatedImage src={quad_hyp_cylinder} annotation={<>Hyperbolic Cylinder <Latex>{`$(B=0,\\\\ C=-1)$`}</Latex></>} />\r\n                    <AnnotatedImage src={quad_hyp_paraboloid} annotation={<>Hyperbolic Paraboloid <Latex>{`$(B,J=0,\\\\ C,H=-1)$`}</Latex></>} />\r\n                </Carousel>\r\n                <br />\r\n                In order to visualise these quadratic surfaces properly, an axis-aligned bounding box (AABB) is used to bound any\r\n                intersection points (i.e. they must be inside the AABB to be valid hits) so that they do not display indefinitely into the distance.\r\n            </p>\r\n            <br />\r\n            <h2 id=\"csg\" className=\"raleway-title\">\r\n                Constructive Solid Geometry\r\n            </h2>\r\n            <Row gutter={[16, 0]} style={{margin: \"0 auto\", width: \"100%\", maxWidth: \"1000px\"}}>\r\n                <Col span={screens.sm ? 12 : 24}>\r\n                    <Image src={csg_completed}/>\r\n                </Col>\r\n                <Col span={screens.sm ? 12 : 24}>\r\n                    <Image src={csg_breakdown}/>\r\n                </Col>\r\n            </Row>\r\n            <br />\r\n            <p>\r\n                Constructive solid geometry is a technique which allows solids to be combined via boolean operations, allowing more complex geometry to be constructed\r\n                from basic primitives. The basic three operations we will be working with here are union, intersection, and difference. For example, we could create a disc\r\n                via calculating the intersection of a sphere and a cuboid.\r\n                <br /><br />\r\n                Constructive solid geometry is implemented as the post-order traversal of a binary tree of 3D objects under elementary set\r\n                operations. We organise objects in a tree as we want to be able to calculate boolean operations between multiple objects, not just between a pair.\r\n                Post order traversal ensures the lowest-level intersections are calculated first and allows them be combined via set\r\n                operations as the traversal moves up the tree. Nodes of the CSG tree are created by providing pairs of other CSG nodes or just\r\n                basic 3D objects. The tricky part of implementing CSG comes down to calculating the intersection, union, and difference of two\r\n                sets of ray-intersections (hits). Luckily, this problem can be visualised and reduced to calculating these operations on two 1D number\r\n                lines:\r\n            </p>\r\n            <div style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"600px\"}}>\r\n                <AnnotatedImage src={csg_t_values}/>\r\n            </div>\r\n            <p>\r\n                Calculating the union is rather straight forward. The problem can be thought of the same as matching parentheses. The two\r\n                sets of hits are merged into one and a depth <Latex>{`$d$`}</Latex> is defined. The merged set of hits is iterated over, with <Latex>{`$d$`}</Latex> denoting how many objects\r\n                we are in at each iteration. <Latex>{`$d$`}</Latex> is initialised at 0, 1, or 2 depending on if the first hits for the two objects were entering or exiting\r\n                hits. Upon entering an object, <Latex>{`$d$`}</Latex> is incremented, and upon exiting an object, <Latex>{`$d$`}</Latex> is decremented. Under this algorithm, the set of\r\n                union points is just the set of points at which <Latex>{`$d=0$`}</Latex> before entering, or <Latex>{`$d=0$`}</Latex> after exiting.\r\n                <br /><br />\r\n                Calculating the difference and intersection is slightly more complicated, but they both follow a similar approach. Again, the\r\n                sets of hits are merged into one, and are iterated over. Instead of keeping track of a depth value, the booleans <Latex>{`$L_\\\\text{prev},L_\\\\text{curr}$`}</Latex> and <Latex>{`$R_\\\\text{prev},R_\\\\text{curr}$`}</Latex> are\r\n                defined which denote if we were in object <Latex>{`$L$`}</Latex> or <Latex>{`$R$`}</Latex> after the last hit, and if we are in them after the current hit that\r\n                is being iterated over. This is easy to keep track of by checking if a hit is entering or exiting at each iteration. For the hit that\r\n                is currently being iterated over, the equation below can be evaluated to check for intersection\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {`$I=((R_\\\\text{prev}\\\\ne R_\\\\text{curr})\\\\land (L_\\\\text{prev}\\\\lor L_\\\\text{curr}))\\\\lor((L_\\\\text{prev}\\\\ne L_\\\\text{curr})\\\\land(R_\\\\text{prev}\\\\lor R_\\\\text{curr}))$`}\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                and the following for difference\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {`$I=((L_\\\\text{prev}\\\\ne L_\\\\text{curr})\\\\land (\\\\lnot R_\\\\text{prev}\\\\land \\\\lnot R_\\\\text{curr}))\\\\lor((R_\\\\text{prev}\\\\ne R_\\\\text{curr})\\\\land(L_\\\\text{prev}\\\\lor L_\\\\text{curr}))$`}\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                The intuition for these equations can be thought of as a finite state machine, shown below. Intersection hits\r\n                are the edges to and from state '<Latex>{`$L\\\\land R$`}</Latex>', and difference hits are the edges to and from '<Latex>{`$L$`}</Latex>'. It is worth noting that union could also\r\n                be calculated in a similar fashion, however the depth approach above is more succinct.\r\n            </p>\r\n            <div style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"600px\"}}>\r\n                <AnnotatedImage src={csg_fsm}/>\r\n            </div>\r\n            <p>\r\n                The only real technical consideration remaining is that the normals of any hits selected from object <Latex>{`$R$`}</Latex> during a difference\r\n                operation must be negated as they create a negative surface imprint.\r\n            </p>\r\n            <br />\r\n            <h2 id=\"acceleration\" className=\"raleway-title\">\r\n                Acceleration Structures\r\n            </h2>\r\n            <p>\r\n                Rendering certain objects can become very costly when done naively. The main perpetrators in this implementation are mesh objects\r\n                (i.e. the teapot) and CSG trees. The high cost can be attributed to their expensive intersection calculation. Without any acceleration\r\n                structure, this intersection must be fully checked for every pixel in the rendered image. For a mesh, this may be thousands to\r\n                hundreds of thousands of triangle intersections, per pixel in the image. This is extremely wasteful - for example if a mesh is visible for\r\n                only a few pixels in the image, an overwhelming majority of intersections will be false yet we do full work for every pixel in the image\r\n                <br /><br />\r\n                Bounding objects are acceleration structures which cut the number of intersection calculations we have to do considerably. This\r\n                is achieved by first coarsely defining the bounds of an object via a cheaper intersection algorithm, and only then doing an expensive\r\n                intersection calculation when the coarse intersection evaluates to true.\r\n            </p>\r\n            <br />\r\n            <h3 id=\"aabb\" className=\"raleway-title\">\r\n                Bounding Primitives\r\n            </h3>\r\n            <p>\r\n                A simple approach is to simply bound complex objects by a primitive volume, reusing the intersection code for that specific primitive.\r\n                A common approach is to use a AABB (cuboid) as the calculation to fit\r\n                the box to another object is simple - we simply make an AABB at the same position as the complex object, and with its width and height to the maximum and minimum object bounds.\r\n                \r\n                This will speed up intersection calculations considerably. We begin by doing a check against the primitive bounding volume, allowing us to cull\r\n                any intersection calculations where it is obvious that there will never be an intersection. This notably increases performance when rendering triangular meshes, as the number of\r\n                triangle intersection checks can be extremely large for each raycast.\r\n            </p>\r\n            <br />\r\n            <h3 id=\"bv\" className=\"raleway-title\">\r\n                14-Plane Bounding Volumes\r\n            </h3>\r\n            <p>\r\n                Performance is still left on the table with AABB and primitives however. Bounding primitives usually only loosely fit to the underlying object, meaning there are still many cases\r\n                where we will end up doing a full intersection check when there should clearly be no intersections. Kay and Kajiya introduced\r\n                a method for bounding volume calculations defined by 14 planes which closer approximates more complex geometry while still\r\n                being cheap. This closer approximation allows for an even larger number of costly\r\n                intersection calls to be culled. The planes defined for the volume are in pairs, similar in essence to opposite faces of an AABB,\r\n                and in fact the first 6 planes are exactly that. The remaining 8 planes are pairs along each diagonal of the 3 primary axes. The\r\n                intersection calculation is relatively simple. Intersection points for each plane-pair are calculated. If the closest intersection has\r\n                a larger t-value than the furthest intersection (i.e. the ray is facing away from the pair of planes), then there must be no intersection.\r\n                If this is not the case for all plane-pairs, there is a valid intersection.\r\n            </p>\r\n            <div style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"1500px\"}}>\r\n                <AnnotatedImage src={bounding_overlay} annotation=\"14-plane bounding volume applied to a mesh of the Utah Teapot, visualised \"/>\r\n            </div>\r\n            <br />\r\n            <h3 id=\"bvh\" className=\"raleway-title\">\r\n                Bounding Volume Hierarchies (BVH)\r\n            </h3>\r\n            <p>\r\n                Bounding Volume Hierarchies allow us to further cull intersection calculations by arranging objects in our scene in a hierarchy. This is typically done using a tree data structure;\r\n                we can use a binary tree, or a wider tree (i.e. variable number of nodes) to group similar objects better. \r\n                We create new bounding volumes (nodes) for groups of objects in our scene, allowing us to first quickly check this parent node for intersection\r\n                and cull depending on the result. We know if a ray does not intersect a parent volume, it can't intersect any children.\r\n                <br /><br />\r\n                Though not implemented in this raytracer (as we work with typically a small number of objects), it is fairly easy to implement a simple BVH.\r\n                Even a simple scene will be useful when dealing with scenes that are composed of many triangle-dense meshes for example. \r\n            </p>\r\n            <br />\r\n            <Divider style={{borderTopWidth: \"1px\", borderTopColor: \"#000000\", opacity: 0.5}}/>\r\n            <h1 id=\"materials\" className=\"raleway-title\">\r\n                Materials\r\n            </h1>\r\n            <p>\r\n                Materials determine what colour an object is rendered with, using the lighting they are under. Materials are simply implementations of a BRDF calculation to calculate reflected radiance (loosely speaking, the colour we see).\r\n                At a technical level, we need one procedure for doing the BRDF calculation, and another for sampling the incident radiance which is used in the calculation. This is because different\r\n                different materials interact with light in different ways, and is a particular concern with <i>global materials</i>, ones which sample radiance from \r\n                from different locations than just the intersection point (think reflection and refraction). We will encounter examples of these materials later.\r\n                <br /><br />\r\n                Before we begin, some terminology. Albedo <Latex>{`$(\\\\rho)$`}</Latex> refers to the intrinsic colour of an object. It specifically defines \r\n                the distribution of reflected light from an object (i.e. what proportion of RGB bands are reflected), but can be thought of simply as 'base colour'.\r\n                We may choose to define more than one albedo for an object which describes the colour of reflected light under different circumstances. A good example of this is the Phong lighting model,\r\n                in which we define 3 separate albedos for ambient, diffuse, and specular lighting.\r\n            </p>\r\n            <br />\r\n            <h2 id=\"diffuse\" className=\"raleway-title\">\r\n                Lambertian Diffuse\r\n            </h2>\r\n            <p>\r\n                Lambertian Diffuse is a simple material that only incorporates diffuse lighting onto the target object.\r\n                Diffuse lighting refers to soft and gradual shadows which arise on matte materials from the random scattering of light at an object's\r\n                surface. When light hits the surface, it can be thought of being randomly scattered in a hemisphere above the intersection location (this is a simplification -\r\n                in reality there is some level of <i>subsurface scattering</i>). The intensity of reflected light obeys Lambert's cosine law, in other words, it is less intense at oblique viewing angles.\r\n                This can be characterised by the following BRDF:\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {`$f_r(\\\\textbf x, \\\\omega_i, \\\\omega_r)=\\\\displaystyle\\\\frac{\\\\rho_d}{\\\\pi}$`}\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                noting that lambert's cosine term <Latex>{`$(\\\\omega_i\\\\cdot \\\\textbf n)$`}</Latex> is included in the full rendering equation.\r\n            </p>\r\n            <div style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"600px\"}}>\r\n                <AnnotatedImage src={lambertian} annotation=\"Cube rendered with a lambertian diffuse material.\"/>\r\n            </div>\r\n            <br />\r\n            <h2 id=\"phong\" className=\"raleway-title\">\r\n                Phong Lighting Model\r\n            </h2>\r\n            <p>\r\n                The Phong lighting model incorporates ambient, diffuse, and specular approximations into the lighting calclation. Diffuse lighting we have seen already with\r\n                Lambertian Diffuse, but what are ambient and specular lighting? Ambient lighting refers to the <i>ambient light</i> in a scene, under which all objects are influenced\r\n                even without making specific lights objects to emit the light. This is simply a constant light colour which all objects should be affected by. Specular lighting are intense\r\n                reflections of light caused by light directly reflecting into the camera. We see this is glossy objects, mirrors, and alike. Some proper specular materials are introduced later (Mirrors, dielectrics),\r\n                but we can make some simple approximations of specular lighting and incorporate them into the BRDF calculation.\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {`$f_r(\\\\textbf x, \\\\omega_i, \\\\omega_r)=L_\\\\text{ambient} + L_\\\\text{diffuse} + L_\\\\text{specular}$`}\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {`$L_\\\\text{ambient} = \\\\rho_a$`}\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {`$L_\\\\text{diffuse} = \\\\displaystyle\\\\frac{\\\\rho_d}{\\\\pi}$`}\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {`$L_\\\\text{specular} = \\\\rho_s\\\\cdot(\\\\omega_r\\\\cdot\\\\text{reflect}(\\\\omega_i, \\\\textbf n))^\\\\alpha$`}\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                Ambient lighting is a constant <Latex>{`$\\\\rho_a$`}</Latex>, and we reuse diffuse lighting calculations from lambertian diffuse, so the\r\n                main addition here is the specular term. We incorporate a specular albedo for colour control, and calculate a similarity measure via cross product between the reflected radiance direction (usually the camera ray direction, inverted), and the perfect\r\n                mirror-like reflection of light from the direction of incident radiance. What we are doing here is adding specular colour proportionally to how much light perfectly reflects into the camera, thus giving us specular highlights. <Latex>{`$\\\\alpha$`}</Latex> is\r\n                included for highlight attenuation. Since <Latex>{`$\\\\omega_r\\\\cdot\\\\text{reflect}(\\\\omega_i, \\\\textbf n)\\\\in[0, 1]$`}</Latex>, exponentinentiation to <Latex>{`$\\\\alpha$`}</Latex> means values further from 1 will contribute less; exponential light falloff for the highlights. Thus, a higher\r\n                value for <Latex>{`$\\\\alpha$`}</Latex> leads to sharper specular highlights. A typical value is <Latex>{`$\\\\alpha\\\\approx 20$`}</Latex>.\r\n            </p>\r\n            <div style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"512px\"}}>\r\n                <AnnotatedImage src={phong} annotation=\"Utah Teapot and a sphere rendered with a Phong material.\"/>\r\n            </div>\r\n            <br />\r\n            <h2 id=\"textures\" className=\"raleway-title\">\r\n                Basic Textures\r\n            </h2>\r\n            <p>\r\n                So far, the albedos of our materials have been constant. This limits us only to block colours for our objects. Textures are images which we can map colour from onto objects, and are a big factor in making realistic, or artistically styled renders.\r\n                The way colour information is mapped from texture to object is a <i>UV map</i>. We define UV coordinates for all of our geometry, which specifies what pixel we should look at in a texture image for the object's colour. \r\n                <br /><br />\r\n                We have already implicitly seen a few ways of generating UV coordinates:\r\n                In planes they were simply direction coefficients from the cartesian definition of plane-points, and for triangles they were given by the barycentric coordinates. In a triangular mesh, they are given per-vertex, and we interpolate texture colour across triangular faces.\r\n                <br /><br />\r\n                There are different ways to generate UV coordinates for a number of objects (e.g. spheres), but I will not delve into them all here.\r\n                The rest of the implementation is easy once we generate UV coordinates, we simply replace <Latex>{`$\\\\rho$`}</Latex> in calculations \r\n                with a uv-read from a texture. This can be an image file, or even procedurally generated, such as the checkerboard pattern seen throughout this post.\r\n            </p>\r\n            <br />\r\n            <h2 id=\"mirrors\" className=\"raleway-title\">\r\n                Mirrors\r\n            </h2>\r\n            <p>\r\n                Perfect mirrors assume that all incident light is perfectly reflected about their surface normal according to the law of \r\n                reflection: <Latex>{`$\\\\theta_i = \\\\theta_r$`}</Latex>.\r\n                This gives rise to the below equation via basic geometry, which can be used to calculate the reflection of an incident direction about a normal <Latex>{`$\\\\textbf n$`}</Latex>.\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>{`$\\\\omega_r = \\\\omega_i - 2(\\\\omega_i \\\\cdot \\\\textbf n)\\\\textbf n$`}</Latex>\r\n                </div>\r\n                <br />\r\n                It should be noted that directional vectors are always normalised.\r\n                (otherwise some very strange and difficult to debug results can occur!)\r\n                <br /><br />\r\n                Now that the reflection direction about a normal can be calculated, rendering a perfect mirror material is a fairly simple process;\r\n                a primary ray is cast from the camera, and upon hitting a perfect mirror at <Latex>{`$\\\\textbf x$`}</Latex>, a secondary ray is generated at <Latex>{`$\\\\textbf x$`}</Latex> with direction\r\n                calculated via <Latex>{`$\\\\omega_r$`}</Latex>. This is done recursively until a non-specular surface is hit. Radiance is still accumulated at specular\r\n                hits of the recursive ray cast, allowing for tinted mirrors.\r\n                <br /><br />\r\n                A final consideration is one for avoiding infinite loops. The above process will infinitely loop in the case where an infinite mirror\r\n                setup is created (two mirrors facing one another with opposite normals, and a ray fired along one of these normals). To avoid this,\r\n                a maximum recursion depth must be defined to terminate the recursion after a certain amount of bounces. Luckily, this doesn’t\r\n                majorly affect the rendered image for most scenes, and still 5 to 8 bounces is enough to get a very realistic looking reflection even\r\n                with multiple participating mirror surfaces.\r\n                <br /><br />\r\n                <Carousel autoplay autoplaySpeed={2000} effect=\"fade\" style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"600px\"}}>\r\n                    <AnnotatedImage preview={false} src={mirror_bounce_1} annotation={\"Mirrors with 1 bounce calculated\"}/>\r\n                    <AnnotatedImage preview={false} src={mirror_bounce_3} annotation={\"Mirrors with 3 bounces calculated\"}/>\r\n                    <AnnotatedImage preview={false} src={mirror_bounce_5} annotation={\"Mirrors with 5 bounces calculated\"}/>\r\n                    <AnnotatedImage preview={false} src={mirror_bounce_8} annotation={\"Mirrors with 8 bounces calculated\"}/>\r\n                </Carousel>\r\n                The implementation of mirrors outlined is a basic one - more complex mirrors such as 'fuzzy mirrors' can also be implemented by changing the\r\n                BRDF. With fuzzy mirrors for example, instead of deterministically calculating the reflected ray <Latex>{`$\\\\omega_r$`}</Latex>, we can sample \r\n                from a cone centered about the perfect reflection angle. This way, we mimick the scattering of light rays on an imperfect reflective\r\n                surface. A simple way of implementing this is to choose a random position on a sphere centered about\r\n                a point on the true reflected ray. A higher radius sphere means more fuzz.\r\n            </p>\r\n            <br />\r\n            <h2 id=\"dielectrics\" className=\"raleway-title\">\r\n                Dielectrics\r\n            </h2>\r\n            <p>\r\n                Dielectrics are materials which can additionally refract incident light through them causing radiance to be transmitted through\r\n                the object. A common example is glass. Refraction is handled the same as reflection in that secondary specular rays are generated, however their direction is\r\n                calculated according the below equation, derived from Snell's law.\r\n            </p>\r\n            <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                <Latex>{`$\\\\omega_r = r\\\\omega_i + \\\\textbf n \\\\bigg(rc- \\\\sqrt{1 - r^2(1 - c^2)}\\\\bigg) \\\\ \\\\ \\\\ \\\\text{where } c=-\\\\textbf n \\\\cdot \\\\omega_i, \\\\ \\\\text{and } {r=\\\\displaystyle\\\\frac{\\\\eta_1}{\\\\eta_2}}$`}</Latex>\r\n            </div>\r\n            <br />\r\n            <p>\r\n                A few technical considerations here are that when light exits a medium, the normal of the medium should be flipped if necessary\r\n                to face the incident specular ray (i.e. <Latex>{`$\\\\omega_i\\\\cdot \\\\textbf n \\\\lt 0$`}</Latex>) as Equation 3 only deals light incident to the normal. \r\n                In a similar manner, <Latex>{`$\\\\eta_1$`}</Latex> should\r\n                always be the index of refraction of the material the light is transmitting <i>from</i> and <Latex>{`$\\\\eta_2$`}</Latex> that of the material transmitting <i>into</i>. \r\n                Typically, we only consider cases of refraction where one material is air. The refractive index of air is 1.0003, which can be approximated as 1, \r\n                making refractive index calculations a lot nicer under this assumption.\r\n                Lastly, total internal reflection must be considered as it causes the expression within the square root to become negative. Therefore\r\n                the enclosed expressed should be checked for negativity beforehand. Figure 6 shows spheres with varying indices of refraction.\r\n            </p>\r\n            <Carousel autoplay autoplaySpeed={2000} effect=\"fade\" style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"600px\"}}>\r\n                <AnnotatedImage preview={false} src={dielectric_refract_1_0} \r\n                    annotation={<>Hollow dielectric sphere <Latex>{`$(\\\\eta_2=1.0)$`}</Latex></>}\r\n                />\r\n                <AnnotatedImage preview={false} src={dielectric_refract_2_5} \r\n                    annotation={<>Refraction only sphere <Latex>{`$(\\\\eta_2=1.1)$`}</Latex></>}\r\n                />\r\n                <AnnotatedImage preview={false} src={dielectric_refract_1_7} \r\n                    annotation={<>Refraction only sphere <Latex>{`$(\\\\eta_2=1.3)$`}</Latex></>}\r\n                />\r\n                <AnnotatedImage preview={false} src={dielectric_refract_1_5}\r\n                    annotation={<>Refraction only sphere <Latex>{`$(\\\\eta_2=1.5)$`}</Latex></>}\r\n                />\r\n                <AnnotatedImage preview={false} src={dielectric_refract_1_3} \r\n                    annotation={<>Refraction only sphere <Latex>{`$(\\\\eta_2=1.7)$`}</Latex></>}\r\n                />\r\n            </Carousel>\r\n            <p>\r\n                Refraction alone isn't quite the full picture though. Dielectrics are materials which both reflect <i>and</i> refract. Common real-life\r\n                examples are glass and water surfaces. It is not immediately obvious that this is the case - but with a keen eye one can notice that\r\n                both water and glass become mirror-like at oblique viewing angles. The formal name for this effect is the 'Fresnel effect' - it formally\r\n                describes the ratio of reflectivity (reflection) against transmittance (refraction) as a function of viewing angle (angle of incidence).\r\n                The equation to compute this ratio given <Latex>{`$\\\\omega_i$`}</Latex> is\r\n                quite complex (to look at, and computationally), so instead Schlick's approximation,\r\n                a cheap yet relatively accurate approximation, can be used:\r\n            </p>\r\n            <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                <Latex>{`$R=R_0+(1 - R_0)(1-\\\\textbf n \\\\cdot \\\\omega_i)^5 \\\\ \\\\ \\\\ \\\\text{where } R_0=\\\\bigg(\\\\displaystyle\\\\frac{\\\\eta_1-\\\\eta_2}{\\\\eta_1 + \\\\eta_2}\\\\bigg)^2$`}</Latex>\r\n            </div>\r\n            <br />\r\n            <p>\r\n                The reflectivity and transmittance act as coefficients for the gathered radiance from the cast specular rays. It should also be\r\n                noted that as reflectivity and transmittance are in a ratio with one \r\n                another, <Latex>{`$T = 1-R$`}</Latex>. The full Fresnel term is also included\r\n                for completeness, and is more accurate at the cost of render time. A comparison is shown below.\r\n            </p>\r\n            <Carousel autoplay autoplaySpeed={3000} effect=\"fade\" style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"2048px\"}}>\r\n                <AnnotatedImage src={dielectric_fresnel_f} \r\n                    annotation={\"Example dielectric sphere rendered with full Fresnel effect (left) and its reflectivity visualised (right).\"}\r\n                />\r\n                <AnnotatedImage src={dielectric_fresnel_s} \r\n                    annotation={\"Example dielectric sphere rendered with Schlick Approximation (left) and its reflectivity visualised (right).\"}\r\n                />\r\n            </Carousel>\r\n            <br />\r\n            <Divider style={{borderTopWidth: \"1px\", borderTopColor: \"#000000\", opacity: 0.5}}/>\r\n            <h1 id=\"distributed-raytracing\" className=\"raleway-title\">\r\n                Distributed Raytracing and Emissive Materials\r\n            </h1>\r\n            <p>\r\n                Up until this point, we have only been able to render hard-shadows. This is a consequence of using only point lights and a single\r\n                occlusion raycast. We had previously seen the term <Latex>{`$L_e$`}</Latex> in the rendering equation which implies that instead of using just point lights, we can make objects themselves into light sources.\r\n                To support emissive materials, we need to change the occlusion calculation to consider percentage occlusion instead of being a boolean calculation. Emissive materials mean our lights have <b>area</b>, and this is where soft shadows come from, i.e. these regions soft shadow regions are regions of <i>partial</i> light occlusion.\r\n                <br /><br />\r\n                To calculate partial occlusion, we can use random sampling. When testing for occlusion, we sample <Latex>{`$n$`}</Latex> random points on an emissive material's surface, and perform a boolean occlusion test on each one.\r\n                The arithmetic mean of these tests then gives the proportion of occlusion. We therefore need a method for generating random points on an object's surface, which is usually similar to the uv-mapping calculating, but in reverse.  The use of random sampling also introduces noise, so we should be sure to use as high <Latex>{`$n$`}</Latex>  as possible.\r\n            </p>\r\n            <Carousel autoplay autoplaySpeed={2000} effect=\"fade\" style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"1370px\"}}>\r\n                <AnnotatedImage src={shadows_1} annotation={\"Shadows rendering with only 1 deterministic ray (no distributed raytracing).\"}/>\r\n                <AnnotatedImage src={shadows_5} annotation={\"Shadows rendered with 5 sample rays.\"}/>\r\n                <AnnotatedImage src={shadows_10} annotation={\"Shadows rendered with 10 sample rays.\"}/>\r\n                <AnnotatedImage src={shadows_25} annotation={\"Shadows rendered with 25 sample rays.\"}/>\r\n                <AnnotatedImage src={shadows_50} annotation={\"Shadows rendered with 50 sample rays.\"}/>\r\n                <AnnotatedImage src={shadows_100} annotation={\"Shadows rendered with 100 sample rays.\"}/>\r\n                <AnnotatedImage src={shadows_200} annotation={\"Shadows rendered with 200 sample rays.\"}/>\r\n            </Carousel>\r\n            <br/>\r\n            <Divider style={{borderTopWidth: \"1px\", borderTopColor: \"#000000\", opacity: 0.5}}/>\r\n            <h1 id=\"ssaa\" className=\"raleway-title\">\r\n                Super-Sampling Anti-Aliasing (SSAA)\r\n            </h1>\r\n            <p>\r\n                Aliasing arises from rendering our continuous 3D scene in a limited number of discrete pixels. This is particularly noticeable at object boundaries and where we have diagonal lines.\r\n                <br /><br />\r\n                There are a number of anti-aliasing techniques that we can employ, but the simplest by far is Super-Sampling Anti-Aliasing (SSAA), and works well for reasonably high resolution images. We\r\n                generate <Latex>{`$n$`}</Latex> rays for each pixel and take the mean colour. Random rays can be generated by taking the principal camera ray and applying a random offset <Latex>{`$\\\\in[-0.5, 0.5]$`}</Latex> in both dimensions of the camera plane.\r\n                Again, the use of random sampling can introduce noise for low <Latex>{`$n$`}</Latex>, so it is best to use as high <Latex>{`$n$`}</Latex> as possible.\r\n                <br /><br />\r\n                SSAA is quite expensive. With each new sample ray we effectively render the whole image once again. If a faster technique is desired, I would suggest having a look at FXAA.\r\n            </p>\r\n            <Carousel autoplay autoplaySpeed={2000} effect=\"fade\" style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"600px\"}}>\r\n                <AnnotatedImage preview={false} src={ssaa_0} annotation={\"Sharp cube edge rendered with no SSAA.\"} />\r\n                <AnnotatedImage preview={false} src={ssaa_5} annotation={\"Sharp cube edge rendered with 5x SSAA.\"}/>\r\n                <AnnotatedImage preview={false} src={ssaa_10} annotation={\"Sharp cube edge rendered with 10x SSAA.\"}/>\r\n                <AnnotatedImage preview={false} src={ssaa_25} annotation={\"Sharp cube edge rendered with 25x SSAA.\"}/>\r\n                <AnnotatedImage preview={false} src={ssaa_50} annotation={\"Sharp cube edge rendered with 50x SSAA.\"} />\r\n            </Carousel>\r\n            <br />\r\n            <Divider style={{borderTopWidth: \"1px\", borderTopColor: \"#000000\", opacity: 0.5}}/>\r\n            <h1 id=\"photon-map\" className=\"raleway-title\">\r\n                Photon Mapping\r\n            </h1>\r\n            <Carousel autoplay autoplaySpeed={3000} effect=\"fade\" style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"600px\"}}>\r\n                <AnnotatedImage preview={false} src={photon_map_direct} annotation={\"Cornell box rendered with direct illumination only.\"} />\r\n                <AnnotatedImage preview={false} src={photon_map_global} annotation={\"Cornell box rendered with global illumination.\"}/>\r\n            </Carousel>\r\n            <p>\r\n                Photon mapping is a two pass algorithm which allows <Latex>{`$L_i$`}</Latex> to be approximated by first bouncing photons around a scene to closer\r\n                mimic how light is actually transported. This closer-to-reality representation allows photon mapping to include global illumination\r\n                in its calculations - more specifically indirect illumination (colour bleeding) and caustics (focussed light). It boasts better time\r\n                complexity and lower-frequency noise in renders than global illumination algorithms of similar age. This comes at the cost of higher\r\n                memory use, as photons need to be stored when bouncing them around the scene. For the first pass, we bounce photons about our scene and store them when they hit certain surfaces.\r\n                For the second pass, during the ray-gathering step, we approximate <Latex>{`L_i`}</Latex> at <Latex>{`$\\\\textbf x$`}</Latex> from nearby stored photons.\r\n            </p>\r\n            <br />\r\n            <h2 id=\"photon-trace\" className=\"raleway-title\">\r\n                Photon Tracing and Storage\r\n            </h2>\r\n            <p>\r\n                Photons are bounced around the scene to emulate real light transport - the process is named photon tracing. Photon tracing starts\r\n                at light sources in the scene and ends when photons bounce off into the void, or are absorbed by a material, just like how light\r\n                can be absorbed in reality. Tracing starts at the light and thus photons propagate flux as they are traced, as opposed to backwards\r\n                ray tracing where radiance is gathered from ray casts.\r\n                <br /><br />\r\n                Photons are stored when they hit certain surfaces. The specific surfaces we target depends on the type of illumination being simulated; we distinguish between specular and diffuse surfaces for example. \r\n                Caustic photons (specular reflections) are stored separately in a 'Caustic Photon Map' from the rest of the illumination - in a 'Global\r\n                Photon Map' - as they require more precision. In both cases photons are stored in a KD-tree, an appropriate acceleration structure for computing\r\n                k-nearest-neighbour (knn) searches which are required for the radiance estimate we will see later.\r\n            </p>\r\n            <Carousel autoplay autoplaySpeed={3000} effect=\"fade\" style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"600px\"}}>\r\n                <AnnotatedImage preview={false} src={photon_map_global_vis} annotation={\"Visualisation of global photon map (~1M Photons).\"} />\r\n                <AnnotatedImage preview={false} src={photon_map_caustic_vis} annotation={\"Visualisation of caustic photon map (~1M Photons).\"}/>\r\n            </Carousel>\r\n            <br />\r\n            <h3 id=\"photon-scatter\" className=\"raleway-title\">\r\n                Photon Scattering\r\n            </h3>\r\n            <p>\r\n                Diffuse reflection is re-emittance of light randomly in a hemisphere above <Latex>{`$\\\\textbf x$`}</Latex> - we saw this with lambertian diffuse materials. We need to be able to compute this in order to \r\n                properly simulate the bouncing of photons around a scene. A method for getting a random direction in this hemisphere in\r\n                world space is therefore required for photon tracing with diffuse surfaces. A random direction in the hemisphere in tangent space (local\r\n                about <Latex>{`$\\\\textbf x$`}</Latex> with the <Latex>{`$y$`}</Latex> basis vector being <Latex>{`$\\\\textbf n$`}</Latex>) can be calculated by generating a random spherical coordinate \r\n                with <Latex>{`$\\\\displaystyle\\\\phi\\\\in\\\\bigg[-\\\\frac{\\\\pi}{2}, \\\\frac{\\\\pi}{2}\\\\bigg],$`}</Latex> <Latex>{`$\\\\theta\\\\in[0,2\\\\pi]$`}</Latex>.\r\n                The spherical coordinate is then transformed into a Cartesian coordinate (still in tangent space), then transformed into world space\r\n                via an affine transformation.\r\n            </p>\r\n            <div className=\"code-snippet\" style={{width: \"100%\"}}>\r\n                <SyntaxHighlighter \r\n                    language=\"cpp\" \r\n                    showLineNumbers={true}\r\n                    style={dracula}\r\n                    startingLineNumber={0}\r\n                >\r\n                    {hemisphere_scatter_code}\r\n                </SyntaxHighlighter>\r\n            </div>\r\n            <br />\r\n            <h3 id=\"photon-roulette\" className=\"raleway-title\">\r\n                Russian Roulette\r\n            </h3>\r\n            <p>\r\n                Russian roulette is a optimisation technique that can be applied to photon tracing to reduce the computational effort expended on\r\n                unuseful photons. When we refer to 'unuseful photons', we mean photons that carry very little contributing colour - in physics, this is the energy they carry or 'flux'. \r\n                Without Russian roulette, it is likely that photons which have been diffusely reflected a few times would have very\r\n                low flux (as they propagate flux with each bounce). Thus, a lot of effort is wasted in simulating further bounces of these photons\r\n                which negligibly contribute to the overall lighting. Russian roulette takes a different approach in an attempt to make all photons\r\n                have similar magnitudes of flux, thus minimising 'wasted' computation time.\r\n                <br /><br />\r\n                The way Russian roulette works here is through the observation that reflecting <Latex>{`$n$`}</Latex> photons at say, 50% power, is equivalent to\r\n                reflecting <Latex>{`$\\\\displaystyle\\\\frac{n}{2}$`}</Latex> photons at 100% power. This can be achieved stochastically; A random \r\n                variable <Latex>{`$\\\\epsilon\\\\in[0, 1]$`}</Latex> is taken, and compared to\r\n                the average reflection coefficients of the material <Latex>{`$\\\\bar\\\\rho_d, \\\\bar\\\\rho_s$`}</Latex>, taken from the material's diffuse and specular albedo by averaging their 3 colour channels. \r\n                The type of reflection is then determined as follows:\r\n                <br/><br/>\r\n                <div style={{textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {`$\\\\begin{aligned}\r\n                            \\\\epsilon\\\\in[0,\\\\bar\\\\rho_d]&\\\\to\\\\text{diffuse reflection}\\\\\\\\\r\n                            \\\\epsilon\\\\in[0, \\\\bar\\\\rho_d+\\\\bar\\\\rho_s]&\\\\to\\\\text{specular reflection}\\\\\\\\\r\n                            \\\\epsilon\\\\in[\\\\bar\\\\rho_d+\\\\bar\\\\rho_s, 1]&\\\\to\\\\text{absorption}\r\n                        \\\\end{aligned}$`}\r\n                    </Latex>\r\n                </div>\r\n            </p>\r\n            <p>\r\n                Note a full BRDF calculation is not used at bounces using this method, instead the flux of reflected photons must be adjusted by \r\n                multiplying by <Latex>{`$\\\\rho_d/\\\\bar\\\\rho_d$`}</Latex> or <Latex>{`$\\\\rho_s/\\\\bar\\\\rho_s$`}</Latex> depending on the type of reflection. \r\n                (i.e. we scale by the colours which would be sampled from the BRDF).\r\n                <br /><br />\r\n                Overall, we can simulate the effect of more photons with a smaller selection by using russian roulette, so it is a worthwhile optimisation considering we may want to fire millions of photons into our\r\n                scene.\r\n            </p>\r\n            <br />\r\n            <h2 id=\"photon-gather\" className=\"raleway-title\">\r\n                Radiance Gathering\r\n            </h2>\r\n            <Carousel autoplay autoplaySpeed={5000} effect=\"fade\" style={{margin: \"0 auto\", paddingBottom: \"20px\", width: \"100%\", maxWidth: \"512px\"}}>\r\n                <AnnotatedImage preview={false} src={c_img} annotation={\"All illumination combined: global illumination\"}/>\r\n                <AnnotatedImage preview={false} src={c_img_direct} annotation={\"Direct illumination\"}/>\r\n                <AnnotatedImage preview={false} src={c_img_indirect} annotation={\"Indirect illumination (diffuse)\"} />\r\n                <AnnotatedImage preview={false} src={c_img_specular} annotation={\"Specular and Glossy\"} />\r\n                <AnnotatedImage preview={false} src={c_img_caustic} annotation={\"Indirect illumination (caustics)\"} />\r\n            </Carousel>\r\n            <p>\r\n                Once we have our photon maps, we can begin rendering our final image. This involves calculating the <Latex>{`$L_i(\\\\textbf x, \\\\omega_i)$`}</Latex> component of the rendering equation.\r\n                The original implementation of photon mapping proposes splitting the different types of illumination in the scene into separate calculations. The main benefit of this is that we\r\n                get to use different techniques for each lighting calculation as we see fit, and makes it easier to not double up on simulated light paths.\r\n                <br /><br />\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                        {`$L_i(\\\\textbf x, \\\\omega_i)=L_{i,l}(\\\\textbf x, \\\\omega_i)+(L_{i,c}(\\\\textbf x, \\\\omega_i)+L_{i,d}(\\\\textbf x, \\\\omega_i))+L_{i,c}(\\\\textbf x, \\\\omega_i)+L_{i,d}(\\\\textbf x, \\\\omega_i)$`}\r\n                    </Latex>\r\n                </div>\r\n                <br />\r\n                where\r\n            </p>\r\n            <div style={{paddingLeft: \"2vw\", paddingRight: \"2vw\"}}>\r\n                <Row className=\"project-style-cont\" style={{display: \"flex\"}}>\r\n                    <Col className=\"project-style-cont\"><b>1. </b> &nbsp;&nbsp;&nbsp;</Col>\r\n                    <Col className=\"project-style-cont\" flex=\"1vw\">\r\n                        <Latex>{`$L_{i,l}$`}</Latex> - <b>Direct Illumination</b> given by <Latex>{`$LDE$`}</Latex> in path notation and is directly gathered using standard gathering rays.\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                <Row className=\"project-style-cont\" style={{display: \"flex\"}}>\r\n                    <Col className=\"project-style-cont\"><b>2. </b> &nbsp;&nbsp;&nbsp;</Col>\r\n                    <Col className=\"project-style-cont\" flex=\"1vw\">\r\n                        <Latex>{`$L_{i,d}$`}</Latex> - <b>Indirect Illumination</b> given by <Latex>{`$LD(S|D)+DE$`}</Latex> in path notation and is approximated using the global photon map.\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                <Row className=\"project-style-cont\" style={{display: \"flex\"}}>\r\n                    <Col className=\"project-style-cont\"><b>3. </b> &nbsp;&nbsp;&nbsp;</Col>\r\n                    <Col className=\"project-style-cont\" flex=\"1vw\">\r\n                        <Latex>{`$L_{i,c}+L_{i,d}$`}</Latex> - <b>Specular and Glossy </b> given by <Latex>{`$L(S|D)^*SE$`}</Latex> in path notation and is again directly gathered using standard gathering rays.\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                <Row className=\"project-style-cont\" style={{display: \"flex\"}}>\r\n                    <Col className=\"project-style-cont\"><b>4. </b> &nbsp;&nbsp;&nbsp;</Col>\r\n                    <Col className=\"project-style-cont\" flex=\"1vw\">\r\n                        <Latex>{`$L_{i,c}$`}</Latex> - <b>Caustics </b> given by <Latex>{`$LS+DE$`}</Latex> in path notation and is approximated using the caustic photon map.\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n            <br/><br />\r\n            <h3 id=\"li-approx\" className=\"raleway-title\">\r\n                Incident Radiance Approximation\r\n            </h3>\r\n            <p>\r\n                <Latex>{`$L_i$`}</Latex> can be approximated from a photon map by calculating the flux density of photons in a sphere <Latex>{`$r$`}</Latex> about <Latex>{`$\\\\textbf x$`}</Latex>. The\r\n                radius of the sphere can be a pre-defined constant, leading to a smoother radiance estimate over larger distances, or dynamically\r\n                calculated by expanding the sphere until a set number of photons are found. The former approach has the effect of smoothing the\r\n                radiance estimate over larger distances which is useful for indirect illumination (global photon map); the latter approach preserves\r\n                all the detail in the photon map leading to higher-frequency detail, useful for rendering caustics (caustic photon map). This is why photons are stored in a KD-tree, \r\n                as it makes it very easy to get all photons in a shere about a point - a simple k-nearest-neighbours query. I won't go\r\n                over the derivation here, but formally, this estimate transforms the rendering equation into the following:\r\n                <br/><br/>\r\n                <div style={{paddingLeft: \"3em\", paddingRight: \"3em\", textAlign: \"center\"}}>\r\n                    <Latex>\r\n                    {\r\n                        `$\\\\displaystyle L_r(\\\\textbf{x}, \\\\omega_i, \\\\omega_r) =\r\n                        \\\\frac{1}{\\\\pi r^2}\\\\sum_{p=1}^n f_r(\\\\textbf{x}, \\\\omega_i, \\\\omega_r)\\\\Delta\\\\Phi_p(\\\\textbf x, \\\\omega_i)$`\r\n                    }                   \r\n                    </Latex>\r\n                </div>\r\n                <br/>\r\n                where <Latex>{`$\\\\Phi_p$`}</Latex> are photons from the knn query of the photon map. The main thing of note here is that we calculate the density by\r\n                assuming the surface around <Latex>{`$\\\\textbf x$`}</Latex> is a flat surface - i.e. a circle not a sphere. This gives rise to the divisor of <Latex>{`$\\\\pi r^2$`}</Latex>.\r\n                It is also worth noting that a sphere is not the most accurate approximation under this assumption - an ellipsoid squished in the direction of <Latex>{`$\\\\textbf x$`}</Latex>'s normal\r\n                would be more accurate, but using a sphere has the benefit of being quickly queried from the photon maps.\r\n            </p>\r\n            <br />\r\n            <Divider style={{borderTopWidth: \"1px\", borderTopColor: \"#000000\", opacity: 0.5}}/>\r\n            <h1 id=\"post-process\" className=\"raleway-title\">\r\n                Post Processing\r\n            </h1>\r\n            <p>\r\n                Now that we have rendered out our 3D scene, what's left is to post-process the image to get a final render.\r\n                At this stage, it is useful to be able to mess with some properties of our image to make it more appealing.\r\n            </p>\r\n            <h2 id=\"post-filters\" className=\"raleway-title\">\r\n                Basic Image Filters\r\n            </h2>\r\n            <p>\r\n                We can build a simple but useful selection of image filters:\r\n            </p>\r\n            <div style={{paddingLeft: \"2vw\", paddingRight: \"2vw\"}}>\r\n                <Row className=\"project-style-cont\" style={{display: \"flex\"}}>\r\n                    <Col className=\"project-style-cont\"><b>1. </b> &nbsp;&nbsp;&nbsp;</Col>\r\n                    <Col className=\"project-style-cont\" flex=\"1vw\">\r\n                        <Latex>{`$\\\\text{exposure}(\\\\textbf v,\\\\ e)=\\\\textbf v\\\\cdot e$`}</Latex>\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                <Row className=\"project-style-cont\" style={{display: \"flex\"}}>\r\n                    <Col className=\"project-style-cont\"><b>2. </b> &nbsp;&nbsp;&nbsp;</Col>\r\n                    <Col className=\"project-style-cont\" flex=\"1vw\">\r\n                        <Latex>{`$\\\\text{contrast}(\\\\textbf v,\\\\ c)=c(\\\\textbf v - 0.5) + 0.5$`}</Latex>\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                <Row className=\"project-style-cont\" style={{display: \"flex\"}}>\r\n                    <Col className=\"project-style-cont\"><b>3. </b> &nbsp;&nbsp;&nbsp;</Col>\r\n                    <Col className=\"project-style-cont\" flex=\"1vw\">\r\n                        <Latex>{`$\\\\text{brightness}(\\\\textbf v,\\\\ b)=\\\\textbf v + b$`}</Latex>\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                <Row className=\"project-style-cont\" style={{display: \"flex\"}}>\r\n                    <Col className=\"project-style-cont\"><b>4. </b> &nbsp;&nbsp;&nbsp;</Col>\r\n                    <Col className=\"project-style-cont\" flex=\"1vw\">\r\n                        <Latex>{`$\\\\text{saturation}(\\\\textbf v,\\\\ s)=\\\\text{lerp}(\\\\textbf v,\\\\ \\\\text{gray}(\\\\textbf v),\\\\ s)$`}</Latex>\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                <Row className=\"project-style-cont\" style={{display: \"flex\"}}>\r\n                    <Col className=\"project-style-cont\"><b>5. </b> &nbsp;&nbsp;&nbsp;</Col>\r\n                    <Col className=\"project-style-cont\" flex=\"1vw\">\r\n                        <Latex>{`$\\\\text{colour overlay}(\\\\textbf v,\\\\ \\\\textbf c)=\\\\textbf v \\\\cdot \\\\textbf c$`}</Latex>\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                <Row className=\"project-style-cont\" style={{display: \"flex\"}}>\r\n                    <Col className=\"project-style-cont\"><b>6. </b> &nbsp;&nbsp;&nbsp;</Col>\r\n                    <Col className=\"project-style-cont\" flex=\"1vw\">\r\n                        <Latex>{`$\\\\text{gamma}(\\\\textbf v, \\\\gamma)=\\\\textbf v ^ \\\\gamma$`}</Latex>\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n            </div>\r\n            <p>\r\n                It is important to clamp the results of these calculations to be greater than zero - we can't have a negative amount of light! These filters can be applied in any order, \r\n                except for the gamma space calculation, which <i>must</i> be the final post processing step, even after tone mapping which we will visit next.\r\n                Many more filters exist that we could apply here as well, but this selection is analogous to the kinds of settings you might find on a digital camera. \r\n            </p>\r\n            <h2 id=\"tone-map\" className=\"raleway-title\">\r\n                HDR and Tone Mapping \r\n            </h2>\r\n            <p>\r\n                Dynamic Range refers to the range of colours we can represent within our image. Up until this point, renders from a raytracer will be unbounded in terms of colour.\r\n                We simply add up all of the reflected radiance and store it in our image buffer. Our image therefore is one of <i>High Dynamic Range</i> (HDR) - we have values outside of \r\n                standard RGB representation. We still wish to display our image in RGB though, so we must do a conversion from HDR to RGB space.\r\n                <br /><br />\r\n                There are various ways of doing this conversion. The most simple method would be to define an exposure cap, like in a digital camera. Any values above our exposure cap are clamped to the cap value <Latex>{`$\\\\in[0, 255]$`}</Latex> in RGB images.\r\n                We could extend this exposure cap to be automatic by stretching or compressing our range of values to <Latex>{`$[0, 255]$`}</Latex> in a similar fashion to a contrast filter. These filters would work fine for a realistic conversion, but we aren't making use of the \r\n                HDR information we have. \r\n                <br /><br />\r\n                Tonemapping makes use of HDR information by mapping HDR colour values to a curve, properly balancing the light levels and also letting us apply a certain level of artistic effect.\r\n                It is basically a variable colour filter, allowing our images to have a certain 'feel' under the curve. For example, we could\r\n                make images have a yellowish tint in their mid-tones for a more cosy feel.\r\n                <br /><br />\r\n                There are many tonemapping curves, a popular choice in video games is the ACES curve. In this implementation, I use a curve made by Hajime Uchimura, the details of which can be found <a target='_blank' href=\"https://www.polyphony.co.jp/publications/sa2018/\">here</a>.\r\n            </p>\r\n        </ProjectPage>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n","const IntersectionCode = `\r\nvector<Hit> Plane::intersection(Ray ray) {\r\n    \r\n    vector<Hit> hits;\r\n\r\n    Vector ro = ray.position - center;\r\n    float dot_product = ro.dot(normal);\r\n    if (dot_product == 0) return hits;\r\n    if (dot_product < 0 && !twoside) return hits;\r\n\r\n    float denominator = ray.direction.dot(normal);\r\n    if (fabs(denominator) < 0.0001f) return hits;\r\n\r\n    float t = -dot_product / denominator; // Unbounded hit on surface plane t\r\n\r\n    // Calculate against 3D Plane equation: c + u x d1 + v x d2\r\n    Vector hit_pos = ray.position + t * ray.direction;\r\n\r\n    Vector center_offset = Vector::v_abs(hit_pos - center);\r\n    float ortho_1 = fabs(tangent.dot(center_offset));\r\n    float ortho_2 = fabs(bitangent.dot(center_offset));\r\n\r\n    if (ortho_1 < tangent_size && ortho_2 < bitangent_size) {        \r\n        // [Abbreviated] ...Emplace new Hit(t) obj to back of hits\r\n    }\r\n\r\n    return hits;\r\n}`\r\n\r\nexport default IntersectionCode;","const IntersectionCode = `\r\nbool UTIL::moller_trumbore(\r\n\tconst Ray& ray, \r\n\tconst Vector &v0, const Vector &v1, const Vector &v2, \r\n\tfloat &t, float &u, float &v\r\n) {\r\n\t\r\n\tconst float epsilon = 0.00001f;\r\n\tVector edge1, edge2, h, s, q;\r\n\tfloat a, f;\r\n\r\n\tedge1 = v1 - v0;\r\n\tedge2 = v2 - v0;\r\n\r\n\th = Vector::cross_product(ray.direction, edge2);\r\n\ta = Vector::dot_product(edge1, h);\r\n\r\n\tif (a > -epsilon && a < epsilon) return false;\r\n\r\n\tf = 1.0f/a;\r\n\ts = ray.position - v0;\r\n\tu = f * Vector::dot_product(s, h);\r\n\r\n\tif (u < 0.0f || u > 1.0f) return false; // Ensure valid barycentric coordinates (i.e. not outside triangle).\r\n\r\n\tq = Vector::cross_product(s, edge1);\r\n\tv = f * Vector::dot_product(ray.direction, q);\r\n\r\n\tif (v < 0.0f || u + v > 1.0f) return false; // Barycentric coord check again.\r\n\r\n\tt = f * Vector::dot_product(edge2, q);\r\n\r\n\tif (t > epsilon) return true;\r\n\treturn false; // Ignore intersections behind the ray origin.\r\n}`\r\n\r\nexport default IntersectionCode;\r\n\r\n","const IntersectionCode = `\r\nvector<Hit> Sphere::intersection(Ray ray)\r\n{\r\n\tvector<Hit> hits;\r\n\r\n\t// Note: simplification of quadratic formula by assuming b = some 2n.\r\n\tVector ray_origin_to_center = ray.position - center;\r\n\tfloat a = ray.direction.length_squared();\r\n\tfloat b_over_two = ray_origin_to_center.dot(ray.direction);\r\n\tfloat c = ray_origin_to_center.length_squared() - radius * radius;\r\n\tfloat discriminant = b_over_two * b_over_two - a * c;\r\n\r\n\tif (discriminant < 0.0f) return hits; // No intersection if discrim < 0\r\n\r\n\tfloat sqrt_d = sqrtf(discriminant);\r\n\r\n\t// Check smallest root first\r\n\tfloat t = (-b_over_two - sqrt_d) / a;\r\n    // [Abbreviated] ...Emplace new Hit(t) obj to back of hits\r\n\r\n    // Check larger root\r\n\tt =  (-b_over_two + sqrt_d) / a;\r\n    // [Abbreviated] ...Emplace new Hit(t) obj to back of hits\r\n\r\n    return hits;\r\n}`\r\n\r\nexport default IntersectionCode;","const IntersectionCode = `\r\nvector<Hit> Cuboid::intersection(Ray ray) {\r\n    \r\n    vector<Hit> hits;\r\n\r\n    Vector local_ray_position = UTIL::world_to_local(ray.position, tangent, up, bitangent);\r\n    Vector local_ray_dir = UTIL::world_to_local(ray.direction, tangent, up, bitangent);\r\n\r\n    Vector half_bounds = Vector(width_ta, width_n, width_bt);\r\n    Vector min_bound = pos - half_bounds;\r\n    Vector max_bound = pos + half_bounds;\r\n    Vector inv_dir = 1.0f / local_ray_dir;\r\n\r\n    Vector negatives = Vector(\r\n        inv_dir.x < 0,\r\n        inv_dir.y < 0,\r\n        inv_dir.z < 0\r\n    );\r\n\r\n    Vector t_min = inv_dir * (Vector::v_lerp(max_bound, min_bound, negatives) - local_ray_position);\r\n    Vector t_max = inv_dir * (Vector::v_lerp(min_bound, max_bound, negatives) - local_ray_position);\r\n\r\n    // Check x-y corner miss edge cases\r\n    if (t_min.x > t_max.y || t_min.y > t_max.x) return hits;\r\n\r\n    float t_near = t_min.x;\r\n    float t_far  = t_max.x;\r\n    Vector min_normal = Vector(-1.0f, 0.0f, 0.0f);\r\n    Vector max_normal = Vector(1.0f, 0.0f, 0.0f);\r\n    \r\n    if (t_min.y > t_min.x) {t_near = t_min.y; min_normal = Vector(0.0f, 1.0f, 0.0f);} // Note +ve y is downwards in this renderer's convention\r\n    if (t_max.y < t_max.x) {t_far  = t_max.y; max_normal = Vector(0.0f, -1.0f, 0.0f);}\r\n\r\n    // Check x (or y, whichever is the relevant intersection) - z miss edge cases\r\n    if (t_near > t_max.z || t_min.z > t_far) return hits;\r\n    \r\n    if (t_min.z > t_near) {t_near = t_min.z; min_normal = Vector(0.0f, 0.0f, -1.0f);}\r\n    if (t_max.z < t_far)  {t_far  = t_max.z; max_normal = Vector(0.0f, 0.0f, 1.0f);}\r\n\r\n    // Note there should *always* be two hits to a cuboid in regular euclidian space.\r\n    // [Abbreviated] ...Emplace new Hit(t_near) obj to back of hits\r\n    // [Abbreviated] ...Emplace new Hit(t_far) obj to back of hits\r\n\r\n    return hits;\r\n}`\r\n\r\nexport default IntersectionCode;","export default \"data:image/png;base64,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\"","const Code = `\r\nVector UTIL::hemisphere_scatter() {\r\n    const float u = UTIL::rand_float(0.0f, 0.999999f);\r\n    const float v = UTIL::rand_float(0.0f, 0.999999f);\r\n    const float theta = 0.5f * acos(UTIL::clamp(1.0f - 2.0f * u, -1.0f, 1.0f));\r\n    const float phi   = 2 * M_PI * v;\r\n    const float cost  = cos(theta);\r\n\r\n    return UTIL::spherical_to_cartesian(theta, phi);\r\n    // ...and conversion to world space when needed outside this function.\r\n}`\r\n\r\nexport default Code;\r\n\r\n","var camel2hyphen = require('string-convert/camel2hyphen');\n\nvar isDimension = function (feature) {\n  var re = /[height|width]$/;\n  return re.test(feature);\n};\n\nvar obj2mq = function (obj) {\n  var mq = '';\n  var features = Object.keys(obj);\n  features.forEach(function (feature, index) {\n    var value = obj[feature];\n    feature = camel2hyphen(feature);\n    // Add px to dimension features\n    if (isDimension(feature) && typeof value === 'number') {\n      value = value + 'px';\n    }\n    if (value === true) {\n      mq += feature;\n    } else if (value === false) {\n      mq += 'not ' + feature;\n    } else {\n      mq += '(' + feature + ': ' + value + ')';\n    }\n    if (index < features.length-1) {\n      mq += ' and '\n    }\n  });\n  return mq;\n};\n\nvar json2mq = function (query) {\n  var mq = '';\n  if (typeof query === 'string') {\n    return query;\n  }\n  // Handling array of media queries\n  if (query instanceof Array) {\n    query.forEach(function (q, index) {\n      mq += obj2mq(q);\n      if (index < query.length-1) {\n        mq += ', '\n      }\n    });\n    return mq;\n  }\n  // Handling single media query\n  return obj2mq(query);\n};\n\nmodule.exports = json2mq;","var camel2hyphen = function (str) {\n  return str\n          .replace(/[A-Z]/g, function (match) {\n            return '-' + match.toLowerCase();\n          })\n          .toLowerCase();\n};\n\nmodule.exports = camel2hyphen;"],"sourceRoot":""}